importArticle({type:'script',article:'u:dev:MediaWiki:AjaxRC.js'});;(function(){if(mw.config.get('wgCanonicalSpecialPageName')!=='AdminDashboard'||window.AdminDashboardBlockLoaded){return;}window.AdminDashboardBlockLoaded=!0;var AdminDashboardBlock={init:function(i18n){console.log(i18n);this.$control=$('<li>',{'class':'control','data-tooltip':i18n.msg('tooltip').plain()}).append($('<a>',{'class':'set',href:mw.util.getUrl('Special:Block')}).append($('<span>',{'class':'representation AdminDashboardBlock'}).append($('<div>').append($('<span>',{text:'block'}))),'Block')).hover($.proxy(this.hover,this),$.proxy(this.unhover,this));$('section.wiki ul.controls').append(this.$control);this.$tooltip=$('.control-section.wiki > header > .dashboard-tooltip');},hover:function(e){this.$tooltip.text(this.$control.data('tooltip'));},unhover:function(e){this.$tooltip.text('');},hook:function(i18n){i18n.loadMessages('AdminDashboard block').then($.proxy(this.init,this));}};mw.hook('dev.i18n').add($.
proxy(AdminDashboardBlock.hook,AdminDashboardBlock));importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'},{type:'style',article:'u:dev:MediaWiki:AdminDashboardBlock.css'});})();;(function(){if(mw.config.get('wgCanonicalSpecialPageName')!=='AdminDashboard'||window.AdminDashboardJSButtonLoaded){return;}window.AdminDashboardJSButtonLoaded=!0;var AdminDashboardJSButton={init:function(i18n){console.log(i18n);this.$control=$('<li>',{'class':'control','data-tooltip':i18n.msg('tooltip').plain()}).append($('<a>',{'class':'set',href:mw.util.getUrl('MediaWiki:Common.js',{action:'edit'})}).append($('<span>',{'class':'representation AdminDashboardJSButton'}).append($('<div>').append($('<span>',{text:'JS_'}))),'JS')).hover($.proxy(this.hover,this),$.proxy(this.unhover,this));$('.control a[data-tracking="special-css"]').parent().after(this.$control);this.$tooltip=$('.control-section.wiki > header > .dashboard-tooltip');},hover:function(e){this.$tooltip.text(this.$control.data(
'tooltip'));},unhover:function(e){this.$tooltip.text('');},hook:function(i18n){i18n.loadMessages('AdminDashboard JS-Button').then($.proxy(this.init,this));}};mw.hook('dev.i18n').add($.proxy(AdminDashboardJSButton.hook,AdminDashboardJSButton));importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'},{type:'style',article:'u:dev:MediaWiki:AdminDashboardJSButton.css'});})();;mw.loader.using(['mediawiki','mediawiki.api','mediawiki.util','mediawiki.user','jquery','jquery.ui.progressbar']).then(function(){var config=mw.config.get(['wgCanonicalNamespace','wgTitle','wgNamespaceNumber','wgArticleId','wgUserId']);if(config.wgCanonicalNamespace==='Special'&&config.wgTitle==='ArticleRating'){importArticle({type:'script',article:'u:dev:MediaWiki:ArticleRating/Insights.js'});return;}var options=$.extend({starSize:[24,24],starColor:['#ccc','#ffba01'],starStroke:'#000',exclude:[]},window.ArticleRating);if(config.wgNamespaceNumber!==0||config.wgArticleId===0||options.exclude.indexOf(
config.wgTitle)>-1||window.ArticleRatingLoaded){return;}window.ArticleRatingLoaded=!0;var api=new mw.Api(),storage='Module:Rating-storage',userId=config.wgUserId||mw.user.id(),current=0,imports=3,icon,i18n={},ratingInfo={};ratingInfo[config.wgArticleId]={},ratingInfo[config.wgArticleId][userId]=0,selectors={module:'rating-module',title:'rating-title',starsWrap:'rating-stars-wrapper',starsBg:'rating-stars-bg',stars:'rating-stars',info:'rating-info',my:'rating-my',text:'rating-text',total:'rating-total',avg:'rating-avg',footer:'rating-footer',bars:'rating-bars',labels:'rating-bars-label'};function prepare(){if(--imports>0)return;icon=window.dev.wds.icon;window.dev.i18n.loadMessages('ArticleRating').done(function(i18nLoaded){i18n=i18nLoaded._messages.en;for(var i in i18n)i18n[i]=i18nLoaded.msg(i).escape();});var colors=window.dev.colors,pageColor=colors.parse(colors.wikia.page),isBright=pageColor.isBright(),style='.rating-bars { background-color: $bar }'+
'.rating-bars > div { background-color: $inner }'+'.page-module { border: 1px solid $border }';mw.util.addCSS(colors.css(style,{bar:isBright?pageColor.lighten(-5):pageColor.lighten(10),inner:isBright?pageColor.lighten(-20):pageColor.lighten(5)}));preload();}function preload(){options.title=options.title||i18n.title;options.values=options.values||[i18n.worst,i18n.bad,i18n.average,i18n.good,i18n.great];api.get({action:'parse',text:'{{'+storage+'}}',prop:'text',disablepp:!0}).done(function(data){data=$(data.parse.text['*']);if(!data.find('a').length){data=data.text();try{data=JSON.parse(data.substr(2,data.length));}catch(e){console.log('Malformed rating storage. Please check: '+location.origin+mw.util.getUrl(storage));return;}ratingInfo=$.extend(ratingInfo,data);}init();});}function init(){var bg='url("data:image/svg+xml,$1") repeat-x',star=
'<svg xmlns="http://www.w3.org/2000/svg" width="$w" height="$h" viewBox="0 0 24 24"><path stroke="$s" fill="$c" d="M12 .288l2.833 8.718h9.167l-7.417 5.389 2.833 8.718-7.416-5.388-7.417 5.388 2.833-8.718-7.416-5.389h9.167z"/></svg>'.replace('$w',options.starSize[0]).replace('$h',options.starSize[1]).replace('$s',options.starStroke),defaultStar=encodeURIComponent(star.replace('$c',options.starColor[0])),activeStar=encodeURIComponent(star.replace('$c',options.starColor[1]));var module=$('<section>',{'class':'rail-module',id:selectors.module,append:[$('<h2>',{'class':'has-icon',id:selectors.title,text:options.title,click:show,css:{cursor:'pointer'},prepend:icon('upvote-small'),append:$('<a>',{html:icon('menu-control-tiny')})}),$('<div>',{id:selectors.starsWrap,css:{width:options.starSize[0]*5,height:options.starSize[1],background:bg.replace('$1',defaultStar)},append:[$('<div>',{id:selectors.starsBg,css:{width:0,height:'100%',transition:'all 0.3s ease-out',background:bg.replace('$1',
activeStar)}}),$('<ul>',{id:selectors.stars})]}),$('<div>',{id:selectors.my,css:{textAlign:'center'},text:i18n.myrating+': ',append:$('<b>',{text:'-'})}),$('<div>',{id:selectors.info,css:{display:'none'},append:[$('<div>'),$('<div>',{append:[$('<div>',{text:i18n.avgrating}),$('<div>',{id:selectors.avg,append:$('<b>')}),$('<div>',{text:i18n.totalrating+': ',id:selectors.total,append:$('<b>')})]}),$('<div>',{css:{width:'100%',marginTop:8},append:$('<a>',{'class':'wds-button wds-is-secondary',css:{margin:'auto'},href:mw.util.getUrl('Special:ArticleRating'),text:i18n.insights})})]}),$('<div>',{id:selectors.footer,append:[$('<div>',{text:i18n.poweredby+' ArticleRating'}),$('<a>',{href:'//dev.fandom.com/wiki/ArticleRating',text:i18n.doc}),' | ',$('<a>',{href:'//dev.fandom.com/wiki/Talk:ArticleRating',text:i18n.report})]})]});switch(options.location){case'bottom-page':module.attr('class','page-module').insertAfter('#WikiaArticle');break;case'bottom-rail':module.insertBefore(
'#WikiaAdInContentPlaceHolder');break;default:module.prependTo('#WikiaRail');break;}for(var i=1;i<=5;i++){$('<li>',{css:{width:options.starSize[0],height:options.starSize[1]},'data-rating':i,appendTo:'#'+selectors.stars,hover:hover,click:rate});$('<div>',{'class':selectors.bars,appendTo:$('#'+selectors.info).children('div').first(),append:$('<span>',{class:selectors.labels,text:i})});}display();}function process(ratingInfo){var prev;var sum=function(sum,num){return sum+num;};var values=Object.values(ratingInfo[config.wgArticleId]).sort();var data={value:parseInt(ratingInfo[config.wgArticleId][userId])||'-',total:Object.keys(ratingInfo[config.wgArticleId]).length,avg:0,rates:[],counts:[]};for(var i in values){if(values[i]===prev)data.counts[data.counts.length-1]++;else{data.rates.push(values[i]);data.counts.push(1);}prev=values[i];}data.avg=(values.reduce(sum)/data.total).toFixed(1);current=data.avg;return data;}function display(){var data=process(ratingInfo);if(data.value===0)return;if
(data.avg==='0.0'&&data.total===1)data.avg=data.total=0;$('#'+selectors.starsBg).width(data.avg*100/5+'%');$('#'+selectors.my).children('b').text(options.values[data.value-1]);$('#'+selectors.total).children('b').text(data.total);$('#'+selectors.avg).children('b').text(data.avg);$('.'+selectors.bars).progressbar({value:0,max:data.total});$(data.rates).each(function(i){$('.'+selectors.bars).eq(data.rates[i]-1).progressbar('value',data.counts[i]);});}function show(){$(this).children('a').toggleClass('show');$('#'+selectors.info).slideToggle(200);}function rate(){ratingInfo[config.wgArticleId][userId]=$(this).data('rating');api.post({action:'edit',title:storage,minor:!0,token:mw.user.tokens.get('editToken'),text:'--'+JSON.stringify(ratingInfo)}).done(function(){$('#'+selectors.stars).children('li').removeAttr('style');display();});}function hover(e){if(e.type==='mouseleave')$('#'+selectors.starsBg).width(current*100/5+'%');else $('#'+selectors.starsBg).width($(this).data('rating')*20+
'%');}importArticles({type:'style',articles:'u:dev:MediaWiki:ArticleRating.css'},{type:'script',articles:['u:dev:MediaWiki:I18n-js/code.js','u:dev:MediaWiki:Colors/code.js','u:dev:MediaWiki:WDSIcons/code.js']});mw.hook('dev.i18n').add(prepare);mw.hook('dev.colors').add(prepare);mw.hook('dev.wds').add(prepare);});;(function(){var config=window.UserStatusSettings||{},colorBlindMode=config.colorBlindMode||1,lightTheme=config.lightTheme||0,statusIndicator=config.statusIndicator||1,avatar='.UserProfileMasthead .masthead-avatar',$user=mw.config.get('wgTitle').split('/'),Api=new mw.Api();if(!$('.UserProfileMasthead').length){return;}function init(i18n){$.ajax({method:'GET',dataType:'text',url:mw.util.wikiScript('index'),data:{title:wgFormattedNamespaces[2]+':'+($user[1]?$user[1]:$user[0])+'/status',action:'raw'},complete:function(data){var status=['online','away','dnd','offline'].indexOf(data.responseText)===-1?'Unknown':data.responseText;var status_masthead=$('<li>');var status_text={
'online':i18n.msg('online').plain(),'away':i18n.msg('away').plain(),'dnd':i18n.msg('dnd').plain(),'offline':i18n.msg('offline').plain(),'unknown':i18n.msg('unknown').plain()};var status_color={'online':'#43b581','away':'#faa61a','dnd':'#f04747','offline':'#747f8d','unknown':'#747f8d'};var statusOptions={'online':'online','away':'away','dnd':'dnd','offline':'offline','unknown':'unknown'};var statusIcons=lightTheme?{'online':'','away':'https://discordapp.com/assets/32e7318f451e2c45e3a6593d6e8a418a.svg','dnd':'https://discordapp.com/assets/7ae003e6cbc0d361fe3953e3c4ae8cc3.svg','offline':'https://discordapp.com/assets/84bda2ff1eb55a521895c9734de3befb.svg','unknown':'https://discordapp.com/assets/84bda2ff1eb55a521895c9734de3befb.svg'}:{'online':'','away':'https://discordapp.com/assets/2cd083e5b360930c23ca95ab6a6073a0.svg','dnd':'https://discordapp.com/assets/5e6b9355e62148b7f463465fd029ab92.svg','offline':'https://discordapp.com/assets/7026428ff08042eb805e579bd9aea182.svg','unknown':
'https://discordapp.com/assets/7026428ff08042eb805e579bd9aea182.svg'};if(statusIndicator){$(avatar).append($('<div>',{'class':'status-indicator si-is-not-colorblind si-is-not-blocked status-indicator-'+status,'title':status_text[status],css:{height:'40px',position:'absolute',right:'5px',bottom:'5px',width:'40px',borderRadius:'50%',background:status_color[status]||'#747f8d',zIndex:'400'}}));}status_masthead.addClass('status-masthead status-masthead-'+status).text(' '+status_text[status]||' '+i18n.msg('unknown').plain()).prepend($('<span>').addClass('user-status-label').text(i18n.msg('status').plain()));$('.masthead-info > .details > ul').append(status_masthead);console.log('UserStatus: Status for '+($user[1]?$user[1]:$user[0])+':',status_text[status]);if(colorBlindMode){$('.si-is-not-colorblind').remove();if(statusIndicator){$(avatar).append($('<div>',{'class':'status-indicator si-is-colorblind si-is-not-blocked status-indicator-'+status,'title':status_text[status],css:{height:'40px',
position:'absolute',right:'5px',bottom:'5px',width:'40px',borderRadius:'50%',background:status_color[status]||'#747f8d',zIndex:'400'}})).append($('<img>',{'src':statusIcons[status]||'https://discordapp.com/assets/7026428ff08042eb805e579bd9aea182.svg','title':status_text[status]||i18n.msg('unknown').plain(),css:{height:'40px',position:'absolute',right:'5px',bottom:'5px',width:'40px',borderRadius:'50%',zIndex:'600'}}));}}$('.UserProfileMasthead .masthead-avatar img').css('border-radius','50%');}});if(($user[1]?$user[1]:$user[0])!==mw.config.get('wgUserName')){return;}var $statusLink=$('<div />').attr('id','StatusChangeWrapper').append($('<div />').addClass('wds-dropdown').attr('id','StatusChange').append($('<a />').attr('title','Change your status').attr('style','cursor: pointer; margin-top: 10px;').text('Status').attr('id','StatusToggle').addClass('wds-button wds-is-secondary wds-dropdown__toggle').append($(
'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" width="12" height="12" class="wds-icon wds-icon-tiny wds-dropdown-chevron"><path d="M6.003 10.002a.997.997 0 0 1-.707-.293L.293 4.706a1 1 0 1 1 1.414-1.414l4.296 4.295 4.293-4.293A1 1 0 1 1 11.71 4.71l-5 5a.997.997 0 0 1-.707.293" fill-rule="evenodd"></path></svg>')).after($('<div>').addClass('wds-is-not-scrollable wds-dropdown__content wds-is-left-aligned').append($('<ul />').addClass('wds-list wds-is-linked').attr('id','StatusMenu').append($('<li>').append($('<a>').attr('target','_blank').attr('style','cursor: pointer;').attr('id','StatusMenu-online').text(i18n.msg('online').plain())).after($('<li>').append($('<a>').attr('target','_blank').attr('style','cursor: pointer;').attr('id','StatusMenu-away').text(i18n.msg('away').plain()))).after($('<li>').append($('<a>').attr('target','_blank').attr('style','cursor: pointer;').attr('id','StatusMenu-dnd').text(i18n.msg('dnd').plain()))).after($('<li>').append($('<a>').attr('target'
,'_blank').attr('style','cursor: pointer;').attr('id','StatusMenu-unknown').text(i18n.msg('offline').plain()))))))));$('.UserProfileMasthead .masthead-info > .details').append($statusLink);$('body').on('click','a[id^="StatusMenu-"]',function(e){e.preventDefault();var content;switch($(e.target).attr('id')){case'StatusMenu-online':content='online';break;case'StatusMenu-away':content='away';break;case'StatusMenu-dnd':content='dnd';break;case'StatusMenu-offline':content='offline';break;}$.ajax({type:'POST',url:mw.util.wikiScript('api'),dataType:'json',data:{action:'edit',title:wgFormattedNamespaces[2]+':'+wgUserName+'/status',summary:i18n.msg('edit-status').plain(),text:content,format:'json',token:mw.user.tokens.get('editToken')}}).done(function(data){if(data.edit.result==='Success'){new BannerNotification(i18n.msg('success').plain(),'confirm').show();}else{new BannerNotification(i18n.msg('error').plain(),'error').show();}}).fail(function(data){new BannerNotification(i18n.msg('error').
plain(),'error').show();});});}var buttonColor=mw.config.get('wgSassParams')['color-buttons'];mw.util.addCSS('#StatusToggle { color:'+buttonColor+'; border-color:'+buttonColor+'}');mw.hook('dev.i18n').add(function(i18n){i18n.loadMessages('UserStatus').then(init);});importArticles({type:'script',articles:['u:dev:I18n-js/code.js','u:dev:UserStatus/banner.js',]});});;(function(){'use strict';var cache={};function addAvatar($content){$content.find('.UserAvatarFetch:not(.loaded)').each(function(){var $this=$(this),username=$this.find('.avi-thisUsername').text(),avatar=cache[username],size=Number($this.find('.avi-thisSize').text());if(!avatar){return;}if(!isNaN(size)){if(size>150){size=150;}else if(size<16){size=16;}avatar=avatar.replace(/\/scale-to-width-down\/\d+/,'/scale-to-width-down/'+size);}$this.html($('<img>',{src:avatar,alt:username,style:'vertical-align: initial; width: '+size+'px; height: '+size+'px;'})).addClass('loaded');});}function findAvatars($content,original){if($content.is
(mw.util.$content)&&!original){return;}var avatars=$content.find('.UserAvatarFetch:not(.loaded) .avi-thisUsername').map(function(_,el){return $(el).text();}).toArray().filter(function(el){return!cache[el];});if(avatars.length>0){$.getJSON(mw.config.get('wgScriptPath')+'/api/v1/User/Details',{ids:avatars.join(',')},function(d){d.items.forEach(function(el){cache[el.name]=el.avatar;});addAvatar($content);});}else{addAvatar($content);}}findAvatars(mw.util.$content,true);mw.hook('wikipage.content').add(findAvatars);})();;(function(){if(window.ColorPreviewLoaded||(mw.config.get('wgAction')!=='edit'&&mw.config.get('wgAction')!=='submit')){return;}function init(i18n){$('#mw-content-text').prepend($('<h2>',{text:i18n.msg('colorPreview').plain()}),$('<div>',{id:'colorbox'}).append($('<p>',{id:'sample'}),$('<textarea>',{id:'colorhex',rows:'1'})),$('<hr/>'));$('#colorhex').keyup(function(){var hexColor,value=$('#colorhex').val();if(value[0]==='#'){hexColor=$('#colorhex').val();}else if(value!=='')
{hexColor='#'+$('#colorhex').val();}else{hexColor='';}$('#sample').html('<span style="color:'+hexColor+'; background-color:'+hexColor+';">'+hexColor+'</span>');});}mw.hook('dev.i18n').add(function(i18n){i18n.loadMessages('ColorPreview').then(init);});importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});})();;require(["mw","wikia.window"],function(mw,wk){"use strict";if(!jQuery("#UserProfileMasthead").exists()||window.isUAALoaded){return;}window.isUAALoaded=!0;var UserAccountAge={constructElement:function($text,$address){return mw.html.element("span",{"class":"tag","id":"userAccountAge-span"},new mw.html.Raw(mw.html.element("a",{"id":"userAccountAge-a","class":"timeago","href":$address,"title":$text},$text)));},getUserData:function($user,callback){var that=this;jQuery.ajax({type:"GET",url:mw.util.wikiScript("api"),data:{action:"query",list:"users",usprop:"registration",ususers:$user,format:"json"}}).done(function($data){if(!$data.error){callback(that,$data);}});},
handleUserData:function(that,$data){if($data.query.users[0].registration===null||$data.query.users[0].hasOwnProperty("missing")||$data.query.users[0].hasOwnProperty("invalid")){return;}var $date=new Date($data.query.users[0].registration).toString();$date=$date.slice(0,3)+", "+$date.slice(4,15)+", "+$date.slice(16,24);var $address=wk.wgScriptPath+"/api.php?format=jsonfm&action=query&list=users"+"&usprop=registration&ususers="+$data.query.users[0].name;var $userTag=that.constructElement($date,$address);mw.util.addCSS("#userAccountAge-a {color:inherit !important;}");jQuery(".masthead-info hgroup").append($userTag);jQuery(".timeago").timeago();},init:function(){var $user=jQuery(".UserProfileMasthead .masthead-info h1").text();this.getUserData($user,this.handleUserData);}};mw.loader.using("mediawiki.util").then(jQuery.proxy(UserAccountAge.init,UserAccountAge));});;(function($,cp){cp=cp||{};cp=$.extend(true,{},cp,{lang:{en:{preview:'Preview',cancel:'Cancel',publish:'Publish'},ar:{preview:
'معاينة',cancel:'إلغاء',publish:'نشر'},az:{preview:'İlkin baxılış',cancel:'Ləğv etmək',publish:'Nəşr etmək'},ba:{preview:'Байҡау',cancel:'Бөтөрөү',publish:'Һаҡлау'},be:{preview:'Перадпрагляд',cancel:'Скасаванне',publish:'Захаваць'},'be-tarask':{preview:'Перадпрагляд',cancel:'Скасаваньне',publish:'Захаваць'},bg:{preview:'Преглед',cancel:'Отмени',publish:'Запази'},br:{preview:'Taol-lagad a-raok embann',cancel:'Diverkañ',publish:'Embann'},bs:{preview:'Pregled',cancel:'Otkaži',publish:'Objavi'},ca:{preview:'Previsualització',cancel:'Canceŀla',publish:'Publica'},co:{preview:'Anteprima',cancel:'Annulla',publish:'Publichi'},cs:{preview:'Náhled',cancel:'Zrušení',publish:'Udržet'},da:{preview:'Forhåndsvisning',cancel:'Afbryd',publish:'Offentliggør'},de:{preview:'Vorschau',cancel:'Abbrechen',publish:'Speichern'},eml:{preview:'Anteprimà',cancel:'Annulla',publish:
'Pubblica'},el:{preview:'Προεπισκόπηση',cancel:'Ακύρωση',publish:'Δημοσίευση'},eo:{preview:'Antaŭvido',cancel:'Nuligi',publish:'Publikigi'},es:{preview:'Previsualización',cancel:'Cancelar',publish:'Publicar'},eu:{preview:'Aurreikuspena',cancel:'Utzi',publish:'Argitaratu'},fi:{preview:'Esikatselu',cancel:'Peruuta',publish:'Julkaise'},fr:{preview:'Prévisualisation',cancel:'Annuler',publish:'Publier'},fo:{preview:'Forskoðan',cancel:'Ógilda',publish:'Geva út'},fy:{preview:'Oerlêze',cancel:'Annulearje',publish:'Publisearje'},ga:{preview:'Réamhléiriú',cancel:'Cealaigh',publish:'Foilsigh'},gd:{preview:'Ro-shealladh',cancel:'Cuir dheth',publish:'Foillsich'},gl:{preview:'Previsualización',cancel:'Cancelar',publish:'Publicar'},gv:{preview:'Roie-haishbynys',cancel:'Dolley magh',publish:'Soilshaghey magh'},hi:{preview:'पूर्वावलोकन',cancel:'रद्द करें',publish:'प्रकाशित करें'},hu:{preview:
'Előnézet',cancel:'Töröl',publish:'Közzétesz'},hr:{preview:'Pregled',cancel:'Otkazivanje',publish:'Uštedjeti'},id:{preview:'Pratinjau',cancel:'Batalkan',publish:'Terbitkan'},is:{preview:'Forskoða',cancel:'Hætta við',publish:'Gefa út'},it:{preview:'Anteprima',cancel:'Annulla',publish:'Pubblica'},ja:{preview:'プレビュー',cancel:'取り消し',publish:'保存'},ka:{preview:'გადახედვა',cancel:'გაუქმება',publish:'გამოქვეყნება'},kk:{preview:'Алдын-ала қарау',cancel:'Болдырмау',publish:'Жариялау'},kn:{preview:'ಪೂರ್ವವೀಕ್ಷಣೆ',cancel:'ರದ್ದುಮಾಡು',publish:'ಪ್ರಕಟಿಸು'},la:{preview:'Prospectus',cancel:'Abrogare',publish:'Divulgare'},li:{preview:'Veurvertuining',cancel:'Braek aaf',publish:'Bring oet'},mhr:{preview:'Ончылгоч ончалаш',cancel:'Шӧраш',publish:'Аныклаш'},mk:{preview:'Преглед',cancel:'Откажи'
,publish:'Објави'},mo:{preview:'Превизуализаре',cancel:'Анулязэ',publish:'Публикэ'},mrj:{preview:'Ончылгоч тӹшлен',cancel:'Вашталтыме',publish:'Перегӹмӹ'},nap:{preview:'Anteprima',cancel:'Annulla',publish:'Pubblìc'},nds:{preview:'Vörschau',cancel:'Afbreken',publish:'Afspiekern'},nl:{preview:'Voorvertoning',cancel:'Annuleren',publish:'Publiceren'},nn:{preview:'Førehandsvis',cancel:'Avbryt',publish:'Publiser'},no:{preview:'Forhåndsvisning',cancel:'Avbryt',publish:'Publiser'},oc:{preview:'Previsualizacion',cancel:'Anullar',publish:'Publicar'},pl:{preview:'Podgląd',cancel:'Anuluj',publish:'Publikuj'},pt:{preview:'Visualizar',cancel:'Voltar',publish:'Publicar'},ro:{preview:'Previzualizare',cancel:'Anulează',publish:'Publică'},ru:{preview:'Предпросмотр',cancel:'Отмена',publish:'Сохранить'},sk:{preview:'Náhľad',cancel:'Zrušenie',publish:'Uložiť'},sl:{preview:'Predogled',cancel:'Prekliči',
publish:'Shrani'},sq:{preview:'Parshtrimi',cancel:'Anulo',publish:'Publikoj'},sr:{preview:'Преглед',cancel:'Откажи',publish:'Објави'},'sr-el':{preview:'Pregled',cancel:'Otkaži',publish:'Objavi'},sv:{preview:'Förhandsgranskning',cancel:'Avbryt',publish:'Publicera'},tr:{preview:'Önizle',cancel:'İptal',publish:'Yayınla'},tt:{preview:'Алдан карау',cancel:'Бетерү',publish:'Саклап'},'tt-latn':{preview:'Aldan karau',cancel:'Beterü',publish:'Saklap'},udm:{preview:'Учке-бери',cancel:'Воштонъя',publish:'Утьыны'},uk:{preview:'Перегляд',cancel:'Скасування',publish:'Зберегти'},ur:{preview:'پیشگی دیکهنا',cancel:'منسوخ کرنا',publish:'نشر کرنا'},val:{preview:'Previsualisació',cancel:'Cancelar',publish:'Publicar'},vi:{preview:'Xem trước',cancel:'Hủy bỏ',publish:'Xuất bản'},zh:{preview:'预览',cancel:'取消',publish:'发布'},'zh-hans':{preview:'预览',cancel:'取消',
publish:'发布'},'zh-cn':{preview:'预览',cancel:'取消',publish:'发布'},'zh-hant':{preview:'預覽',cancel:'取消',publish:'發佈'},'zh-tw':{preview:'預覽',cancel:'取消',publish:'發佈'},'zh-hk':{preview:'預覽',cancel:'取消',publish:'發佈'},}});window.fng.cp=cp;var urlVars=$.getUrlVars();cp.debug=cp.debug||urlVars.debug;var throbberSrc=null;var log=cp.log=function(){if(!cp.debug)return;log.meth=console.log;log.logs=log.logs||{'debug':'debug','error':'error','info':'info','log':'log','warn':'warn'};var a=[].slice.call(arguments);log.method=log.logs[(a[0]||'').toString().toLowerCase()];if(log.method){a.splice(0,1);log.meth=console[log.method];}a.unshift('cp');log.meth.apply(this,a);};function chkThrobberSrc(src){if(!src)return false;var url;try{url=new URL(src);return(/(\.wikia\.com|\.fandom\.com|\.wikia\.nocookie\.net)$/.test(url.host));}catch(e){return false;}return false;}cp.rte2wiki=function(content){var c=$('<div>',{html:content});c.find('[data-rte-meta]').
replaceWith(function(){var $this=$(this);var jstring=decodeURIComponent($('<div>',{html:$this.data('rteMeta')}).text());var jo=JSON.parse(jstring);return jo.wikitext?jo.wikitext:this;});return c.html();};cp.getContent=function(){log('getcontent',this);return this.val();};cp.onPreview=function(e){e.preventDefault();var MEW=$(e.target).closest('.article-comm-form');if(!MEW){log('onpreview mew not found for',e);return;}var editor=MEW.find('.editarea textarea:first').data('wikiaEditor');if(!editor){log('onpreview editor not found for',e);editor=MEW.find('textarea:first');editor.element=MEW;editor.mode='source';editor.getContent=cp.getContent;}cp.e=e;cp.editor=editor;cp.throb(true);var content=editor.getContent();if(!content||content.length<1){cp.throb(false);cp.onCancel();return;}if(editor.mode==='wysiwyg'){log('onpreview wysiwyg');content=cp.rte2wiki(content);}var apiUri=(new mw.Uri({path:window.wgScriptPath+'/index.php'}).extend({action:'ajax',rs:'EditPageLayoutAjax',title:wgTitle,page:
'SpecialCustomEditPage',method:'preview',content:content}));log('onpreview api',apiUri);$.getJSON(apiUri).done(function(data){log('onpreview getjson.done',data);cp.showPreview(data.html);}).fail(function(data){log('onpreview getjson.fail',data);cp.showPreview('Can\'t parse data.<br>'+data.responseText);});};cp.onCancel=function(e){if(e&&e.preventDefault)e.preventDefault();log('oncancel',e);$(window).trigger('EditPagePreviewClosed');$('.cp-modal').remove();$('body').removeClass('cp-blackout-body');cp.editor=null;cp.e=null;$(document).off('keydown',cp.onkeydown);};cp.onPublish=function(e){e.stopPropagation();log('onpublish',e);cp.editor.element.find('input[name=wpArticleSubmit]').click();cp.onCancel();};cp.throb=function(state){var $throbber,$closform=cp.editor?$(cp.editor.element.context).closest('form'):{};if($closform.length){$throbber=$closform.find('.throbber');if(!$throbber.length)return;$throbber.css('visibility',state?'visible':'hidden');}};cp.onkeydown=function(e){if($(e.target)
.closest('.cp-window').length)return;if(e.keyCode===27||e.button!==undefined)cp.onCancel();};cp.disablePreview=function(target){if(!target)return;if(!(target instanceof jQuery))target=$(target);var btnpreview=target.closest('.article-comments').find('.buttons .cp-button-preview');if(!btnpreview.length)return;btnpreview.attr('disabled','disabled');};cp.enablePreview=function(target){if(!target)return;if(!(target instanceof jQuery))target=$(target);var btnpreview=target.closest('.article-comments').find('.buttons .cp-button-preview');if(!btnpreview.length)return;btnpreview.removeAttr('disabled');};cp.addButtons=function(content){log('addbuttons',content);if(!(content instanceof jQuery))content=$(content);var buttons=content.find('>:not(#article-comments-ul) .buttons');if(!buttons.length)return;buttons.find('.cp-button').remove();buttons.append(cp.btnPreview.clone());var $throbber=buttons.find('.throbber');if(throbberSrc&&$throbber.attr('src')!==throbberSrc)$throbber.attr('src',
throbberSrc);};cp.mo=new MutationObserver(function(records,obj){$.each(records,function(){if(!this.addedNodes)return true;var arr=[].slice.call(this.addedNodes);log('debug','mo.arr',arr);arr.map(function(v){var $this=$(v);log('debug','mo.map',$this);if($this.hasClass('article-comments')||$this.hasClass('article-comm-edit-box')){cp.addButtons($this);}});});});cp.init=function(){log('init');if(cp.clang){log('warn','init 2nd init detected');return;}if(!$('#WikiaArticleComments').length){log('init no comments found');return;}throbberSrc=chkThrobberSrc(cp.throbber)?cp.throbber:null;cp.userlang=(urlVars.useuserlang||cp.useuserlang)?wgUserLanguage:wgContentLanguage;cp.clang=cp.lang[urlVars.uselang||cp.uselang]||cp.lang[cp.userlang]||cp.lang[cp.userlang.split('-')[0]]||cp.lang.en;cp.btnPreviewText=cp.clang.preview||(cp.lang[cp.userlang]||cp.lang[cp.userlang.split('-')[0]]||cp.lang.en).preview;cp.btnCancelText=cp.clang.cancel||(cp.lang[cp.userlang]||cp.lang[cp.userlang.split('-')[0]]||cp.lang.
en).cancel;cp.btnPublishText=cp.clang.publish||(cp.lang[cp.userlang]||cp.lang[cp.userlang.split('-')[0]]||cp.lang.en).publish;var isDark=$('body').hasClass('oasis-dark-theme');var dlStyle={dark:'background-color:rgba(200,200,200,0.3);',light:'background-color:rgba(200,200,200,0.85);'};dlStyle.current=isDark?dlStyle.dark:dlStyle.light;cp.modal=$('<div>',{class:'cp-modal cp-blackout-modal',style:'z-index:10000;position:absolute;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,0.8);'});cp.window=$('<div>',{class:'cp-window',style:dlStyle.current+'z-index:1000;position:absolute;width:700px;height:400px;overflow:visible;padding:5px 20px;'});cp.content=$('<div>',{class:'cp-content',style:'overflow:auto;margin:5px;border-style:groove;border-width:thin;border-color:silver;height:300px;max-height:350px;'});cp.header=$('<div>',{class:'cp-header',style:'left:0;right:0;top:0;margin:5px;line-height:2em;'});cp.footer=$('<div>',{class:'cp-footer',style:
'left:0;right:0;bottom:0;padding-bottom:15px;padding-right:20px;position:absolute;'});cp.btnPreview=$('<input>',{class:'cp-button cp-button-preview wikia-button secondary',type:'button',value:cp.btnPreviewText,style:'float:right;'});cp.btnCancel=$('<input>',{class:'cp-button cp-button-cancel wikia-button secondary',type:'button',value:cp.btnCancelText,style:'float:right;margin-right:7px;'});cp.btnPublish=$('<input>',{class:'cp-button cp-button-publish wikia-button',type:'button',value:cp.btnPublishText,style:'float:right;'});cp.xcancel=$('<a>',{class:'cp-xcancel',href:'#',text:'X',style:'float:right;font-weight:500;font-size:x-large;'});cp.header.append(cp.xcancel).append($('<h1>',{text:cp.btnPreviewText}));cp.footer.append(cp.btnPublish).append(cp.btnCancel);cp.window.append(cp.header).append(cp.content).append(cp.footer);cp.modal.append(cp.window);$('body').on('click','.cp-button-preview',cp.onPreview);$('body').on('click','.cp-button-cancel, .cp-xcancel',cp.onCancel);$('body').on(
'click','.cp-button-publish',cp.onPublish);$('body').on('click','.cp-modal',cp.onkeydown);var hcb=function(content){if(!$(content).hasClass('article-comments'))return;mw.hook('wikipage.content').remove(hcb);cp.addButtons(content);if(content instanceof jQuery)content=content.get(0);log('init.wikipage.content',content);cp.mo.observe(content,{childList:!0,subtree:!0});};mw.util.addCSS('@media only screen and (min-height:500px) {.cp-blackout-body {overflow-y:hidden} .cp-blackout-modal{overflow-y:scroll}}');mw.hook('wikipage.content').add(hcb);};cp.showPreview=function(content){log('showpreview content:',content);cp.modal.find('.cp-content').html(content);cp.modal.find('.cp-content .pagetitle:first').css('display','none');var slider=cp.modal.find('.wikiaPhotoGallery-slider-body');var slides,id,ids=[];$.each(slider,function(){id='10000'+this.id.replace(/(wikiaPhotoGallery\-slider\-body\-)(\d)/,'$2');this.id='wikiaPhotoGallery-slider-body-'+id;ids.push(id);slides=$(this).find(
'[class*="wikiaPhotoGallery-slider-"]');$.each(slides,function(){this.id=this.id.replace(/(wikiaPhotoGallery\-slider\-)(\d)-(\d)/,'$1'+id+'-$3');});});$('body').addClass('cp-blackout-body');cp.throb(false);$('body').prepend(cp.modal);cp.modal.find('.cp-window').css({left:(window.innerWidth>cp.window.width()?window.innerWidth/2-cp.window.width()/2:0)+$('body').scrollLeft(),top:(window.innerHeight>cp.window.height()?window.innerHeight/2-cp.window.height()/2:50)+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)});if($('.cp-modal').height()<$('body').height()){$('.cp-modal').height($('body').height());$('.cp-modal').css('height',height($('body').height()));}if($('.cp-modal').width()<window.innerWidth){$('.cp-modal').width(window.innerWidth);$('.cp-modal').css('width',window.innerWidth);}$(document).on('keydown',cp.onkeydown);mw.hook('wikipage.content').fire($('.cp-modal'));for(var i=0;i<ids.length;i++){if(window.WikiaPhotoGallerySlider&&window.
WikiaPhotoGallerySlider.init)window.WikiaPhotoGallerySlider.init(ids[i]);}};$(cp.init);})(jQuery,(window.fng=window.fng||{}).cp);;mw.loader.using('mediawiki.api').then(function(){if(!mw.config.get('wgIsArticle'))return;function getGuidelines(){return new mw.Api().get({action:'query',meta:'allmessages',ammessages:'Custom-comment-guidelines',amlang:mw.config.get('wgUserLanguage')});}function setListener(){var promise=$.Deferred();mw.hook('wikipage.content').add(function($content){if($content.is('#article-comments'))promise.resolve();});return promise;}$.when(getGuidelines(),setListener()).done(function(d){$('#article-comm').attr({placeholder:d[0].query.allmessages[0]['*']});});});;;(function(module,mw,$,undefined){'use strict';var translations=$.extend(true,{ar:{and:'و',second:'ثانية',seconds:'ثواني',minute:'دقيقة',minutes:'دقائق',hour:'ساعة',hours:'ساعات',day:'يوم',days:'أيام'},be:{and:'і',second:'секунда',seconds:'секунд',minute:
'хвіліна',minutes:'хвілін',hour:'гадзіну',hours:'гадзін',day:'дзень',days:'дзён'},ca:{and:'i',second:'segon',seconds:'segons',minute:'minut',minutes:'minuts',hour:'hora',hours:'hores',day:'dia',days:'dies'},de:{and:'und',second:'Sekunde',seconds:'Sekunden',minute:'Minute',minutes:'Minuten',hour:'Stunde',hours:'Stunden',day:'Tag',days:'Tage'},en:{and:'and',second:'second',seconds:'seconds',minute:'minute',minutes:'minutes',hour:'hour',hours:'hours',day:'day',days:'days'},el:{and:'και',second:'δευτερόλεπτο',seconds:'δευτερόλεπτα',minute:'λεπτό',minutes:'λεπτά',hour:'ώρα',hours:'ώρες',day:'ημέρα',days:'ημέρες'},es:{and:'y',second:'segundo',seconds:'segundos',minute:'minuto',minutes:'minutos',hour:'hora',hours:'horas',day:'día',days:'días'},fr:{and:'et',second:'seconde',seconds:'secondes',minute:'minute',minutes:'minutes',hour:'heure',hours:'heures',day:'jour',days:'jours'},hu:{and:'és',second:
'másodperc',seconds:'másodperc',minute:'perc',minutes:'perc',hour:'óra',hours:'óra',day:'nap',days:'nap'},id:{and:'dan',second:'detik',seconds:'detik',minute:'menit',minutes:'menit',hour:'jam',hours:'jam',day:'hari',days:'hari'},it:{and:'e',second:'secondo',seconds:'secondi',minute:'minuto',minutes:'minuti',hour:'ora',hours:'ore',day:'giorno',days:'giorni'},ja:{and:'',second:'秒',seconds:'秒',minute:'分',minutes:'分',hour:'時間',hours:'時間',day:'日',days:'日'},ko:{and:' ',second:'초',seconds:'초',minute:'분',minutes:'분',hour:'시간',hours:'시간',day:'일',days:'일'},ms:{and:'dan',second:'saat',seconds:'saat',minute:'minit',minutes:'minit',hour:'jam',hours:'jam',day:'hari',days:'hari'},nl:{and:'en',second:'seconde',seconds:'seconden',minute:'minuut',minutes:'minuten',hour:'uur',hours:'uur',day:'dag',days:'dagen'},pl:{and:'i',second:'sekunda',seconds:'sekund(y)',minute:'minuta',minutes:'minut(y)',hour:'godzina',hours:'godzin(y)',day:'dzień',days:'dni'},pt:{and:
'e',second:'segundo',seconds:'segundos',minute:'minuto',minutes:'minutos',hour:'hora',hours:'horas',day:'dia',days:'dias'},'pt-br':{and:'e',second:'segundo',seconds:'segundos',minute:'minuto',minutes:'minutos',hour:'hora',hours:'horas',day:'dia',days:'dias'},ro:{and:'și',second:'secundă',seconds:'secunde',minute:'minut',minutes:'minute',hour:'oră',hours:'ore',day:'zi',days:'zile',},ru:{and:'и',second:'секунда',seconds:'секунд',minute:'минута',minutes:'минут',hour:'час',hours:'часов',day:'день',days:'дней'},sr:{and:'i',second:'sekundu',seconds:'sekunde/-i',minute:'minutu',minutes:'minute/-a',hour:'sat',hours:'sata/-i',day:'dan',days:'dana'},tl:{and:'at',second:'segundo',seconds:'mga segundo',minute:'minuto',minutes:'mga minuto',hour:'oras',hours:'mga oras',day:'araw',days:'mga araw'},tr:{and:'ve',second:'saniye',seconds:'saniye',minute:'dakika',minutes:'dakika',hour:'saat',hours:'saat',day:'gün',days:'gün'},uk:{and:'та',second:
'секунда',seconds:'секунд',minute:'хвилина',minutes:'хвилин',hour:'годину',hours:'годин',day:'день',days:'днів'},vi:{and:'và',second:'giây',seconds:'giây',minute:'phút',minutes:'phút',hour:'giờ',hours:'giờ',day:'ngày',days:'ngày'},zh:{and:' ',second:'秒',seconds:'秒',minute:'分',minutes:'分',hour:'时',hours:'时',day:'天',days:'天'},'zh-tw':{and:' ',second:'秒',seconds:'秒',minute:'分',minutes:'分',hour:'時',hours:'時',day:'天',days:'天'},'zh-hk':{and:' ',second:'秒',seconds:'秒',minute:'分',minutes:'分',hour:'時',hours:'時',day:'天',days:'天'}},module.translations||{}),i18n=translations[mw.config.get('wgContentLanguage')]||translations.en;var countdowns=[];var NO_LEADING_ZEROS=1,SHORT_FORMAT=2,NO_ZEROS=4;function output(i,diff){var delta,result,parts=[];delta=diff%60;result=' '+i18n[delta===1?'second':'seconds'];if(countdowns[i].opts&SHORT_FORMAT)result=result.charAt(1);parts.unshift(delta+result);diff=Math
.floor(diff/60);delta=diff%60;result=' '+i18n[delta===1?'minute':'minutes'];if(countdowns[i].opts&SHORT_FORMAT)result=result.charAt(1);parts.unshift(delta+result);diff=Math.floor(diff/60);delta=diff%24;result=' '+i18n[delta===1?'hour':'hours'];if(countdowns[i].opts&SHORT_FORMAT)result=result.charAt(1);parts.unshift(delta+result);diff=Math.floor(diff/24);result=' '+i18n[diff===1?'day':'days'];if(countdowns[i].opts&SHORT_FORMAT)result=result.charAt(1);parts.unshift(diff+result);result=parts.pop();if(countdowns[i].opts&NO_LEADING_ZEROS){while(parts.length&&parts[0][0]==='0'){parts.shift();}}if(countdowns[i].opts&NO_ZEROS){parts=parts.filter(function(part){return part[0]!=='0';});}if(parts.length){if(countdowns[i].opts&SHORT_FORMAT){result=parts.join(' ')+' '+result;}else{result=parts.join(', ')+' '+i18n.and+' '+result;}}countdowns[i].node.text(result);}function end(i){var c=countdowns[i].node.parent();switch(c.attr('data-end')){case'remove':c.remove();return true;case'stop':output(i,0);
return true;case'toggle':var toggle=c.attr('data-toggle');if(toggle&&toggle=='next'){c.next().css('display','inline');c.css('display','none');return true;}if(toggle&&$(toggle).length){$(toggle).css('display','inline');c.css('display','none');return true;}break;case'callback':var callback=c.attr('data-callback');if(callback&&$.isFunction(module[callback])){output(i,0);module[callback].call(c);return true;}break;}countdowns[i].countup=!0;output(i,0);return false;}function update(){var now=Date.now();var countdownsToRemove=[];$.each(countdowns.slice(0),function(i,countdown){var diff=Math.floor((countdown.date-now)/1000);if(diff<=0&&!countdown.countup){if(end(i))countdownsToRemove.push(i);}else{output(i,Math.abs(diff));}});var x;while((x=countdownsToRemove.pop())!==undefined){countdowns.splice(x,1);}if(countdowns.length){window.setTimeout(function(){update();},1000);}}function getOptions(node){var text=node.parent().attr('data-options'),opts=0;if(text){if(/no-leading-zeros/.test(text)){
opts|=NO_LEADING_ZEROS;}if(/short-format/.test(text)){opts|=SHORT_FORMAT;}if(/no-zeros/.test(text)){opts|=NO_ZEROS;}}return opts;}function init(){var countdown=$('.countdown:not(.handled)');if(!countdown.length)return;$('.nocountdown').css('display','none');countdown.css('display','inline').find('.countdowndate').each(function(){var $this=$(this),date=(new Date($this.text())).valueOf();if(isNaN(date)){$this.text('BAD DATE');return;}countdowns.push({node:$this,opts:getOptions($this),date:date,});});countdown.addClass('handled');if(countdowns.length){update();}}mw.hook('wikipage.content').add(init);}(window.countdownTimer=window.countdownTimer||{},mediaWiki,jQuery));;window.DiscordChat={ready:!1,messages:{},data:null,init:function(){window.DiscordChat.ready=!0
var mwconfig=mw.config.get(['wgUserLanguage'])
var api=new mw.Api()
api.get({action:'query',meta:'allmessages',ammessages:['chat-live2','chat-join-the-chat','awc-metrics-close','chat-entry-point-guidelines','Custom-DiscordChat-id'].join('|'),amlang:mwconfig.wgUserLanguage}).done(function(data){if(data.error){return}data.query.allmessages.forEach(function(message){if(message['*']){window.DiscordChat.messages[message.name]=_.escape(message['*'])}})
if(window.DiscordChat.messages['chat-entry-point-guidelines']){api.get({action:'parse',text:'{{int:chat-entry-point-guidelines}}',prop:'text'}).done(function(data){mw.hook('DiscordChat.added').add(function(){$('<div>',{'class':'more'}).html(data.parse.text['*']).appendTo('.DiscordChat')})})}$.get('https://discordapp.com/api/guilds/'+window.DiscordChat.messages['Custom-DiscordChat-id']+'/widget.json',function(data){window.DiscordChat.data=data
if($('#WikiaRail').length){if($('#WikiaRail').hasClass('loaded')){window.DiscordChat.rail()}else{$('#WikiaRail').on('afterLoad.rail',window.DiscordChat.rail)}}})})},rail:function(){var i=0
var appendedAvatars=0
var avatarContainer=$('<div class="wds-avatar-stack"></div>')
var members=window.DiscordChat.data.members
window.DiscordChat.shuffle(members)
while(appendedAvatars<5&&i<members.length){if(!members[i].bot){avatarContainer.append('<a href="#showDiscordUser" data-discorduser="'+encodeURI(_.escape(members[i].username+'#'+members[i].discriminator))+'" class="wds-avatar chatter"><img class="wds-avatar__image" src="'+members[i].avatar_url+'"></a>')
appendedAvatars++}i++}var element=$('<section class="chat-module rail-module DiscordChat">'+'<h2 class="has-icon">'+
'<svg xmlns="http://www.w3.org/2000/svg" class="discord-svg" width="20" height="20" viewBox="0 0 240 245"><path d="M104.4 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1.1-6.1-4.5-11.1-10.2-11.1zM140.9 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1z"/><path d="M189.5 20h-134C44.2 20 35 29.2 35 40.6v135.2c0 11.4 9.2 20.6 20.5 20.6h113.4l-5.3-18.5 12.8 11.9 12.1 11.2 21.5 19V40.6c0-11.4-9.2-20.6-20.5-20.6zm-38.6 130.6s-3.6-4.3-6.6-8.1c13.1-3.7 18.1-11.9 18.1-11.9-4.1 2.7-8 4.6-11.5 5.9-5 2.1-9.8 3.5-14.5 4.3-9.6 1.8-18.4 1.3-25.9-.1-5.7-1.1-10.6-2.7-14.7-4.3-2.3-.9-4.8-2-7.3-3.4-.3-.2-.6-.3-.9-.5-.2-.1-.3-.2-.4-.3-1.8-1-2.8-1.7-2.8-1.7s4.8 8 17.5 11.8c-3 3.8-6.7 8.3-6.7 8.3-22.1-.7-30.5-15.2-30.5-15.2 0-32.2 14.4-58.3 14.4-58.3 14.4-10.8 28.1-10.5 28.1-10.5l1 1.2c-18 5.2-26.3 13.1-26.3 13.1s2.2-1.2 5.9-2.9c10.7-4.7 19.2-6 22.7-6.3.6-.1 1.1-.2 1.7-.2 6.1-.8 13-1 20.2-.2 9.5 1.1 19.7 3.9 30.1 9.6 0 0-7.9-7.5-24.9-12.7l1.4-1.6s13.7-.3 28.1 10.5c0 0 14.4 26.1 14.4 58.3 0 0-8.5 14.5-30.6 15.2z"/></svg>'
+window.DiscordChat.messages['chat-live2']+' – Discord'+'</h2>'+'<div class="chat-details">'+'<div class="avatars">'+avatarContainer.prop('outerHTML')+((members.length-appendedAvatars)>0?('<a href="'+'#showDiscordUsers'+'" style="font-weight: bold; margin-left: 6px; text-decoration: none;">+'+(members.length-appendedAvatars)+'</a>'):'')+'</div>'+'<a href="'+window.DiscordChat.data.instant_invite+'" class="wds-is-secondary wds-button wds-is-squished">'+window.DiscordChat.messages['chat-join-the-chat']+'</a>'+'</div>'+'</section>')
$ads=$('#top-right-boxad-wrapper, #NATIVE_TABOOLA_RAIL').last(),$jsrt=$('.content-review-module');if($ads.exists()){$ads.after(element);}else if($jsrt.exists()){$jsrt.after(element);}else{$('#WikiaRail').prepend(element);}$('.chat-module:not(.DiscordChat)').css('display','none')
mw.util.addCSS('#WikiaRail .DiscordChat .wds-avatar-stack { z-index: 0; }');$('a[href="#showDiscordUser"][data-discorduser]').click(function(event){event.preventDefault()
window.DiscordChat.showDiscordUser(decodeURI($(this).attr('data-discorduser')))})
$('a[href="#showDiscordUsers"]').click(function(event){event.preventDefault()
window.DiscordChat.showDiscordUsers()})
mw.hook('DiscordChat.added').fire(element)},showDiscordUsers:function(){var usersContent='<ul style="list-style: initial; font-size: 14px;">'
var members=window.DiscordChat.data.members
for(var i=0;i<members.length;i++){usersContent+='<li><span style="-moz-user-select: none; user-select: none; cursor: pointer;" onclick="window.DiscordChat.showDiscordUser(\''+_.escape(members[i].username+'#'+members[i].discriminator)+'\');"><img style="width: 0.75em; height: 0.75em;" src="'+members[i].avatar_url+'"> '+_.escape(members[i].nick||members[i].username)+'</span></li>'}usersContent+='</ul>'
require(['wikia.ui.factory'],function(ui){ui.init(['modal']).then(function(uimodal){var modalconfig={type:'default',vars:{id:'show-discord-users',size:'small',title:_.escape(window.DiscordChat.data.name)+' – '+window.DiscordChat.data.members.length,content:usersContent,buttons:[{vars:{value:window.DiscordChat.messages['awc-metrics-close'],data:[{key:'event',value:'close'}]}},{type:'link',vars:{value:window.DiscordChat.messages['chat-join-the-chat'],href:window.DiscordChat.data.instant_invite,title:''}}]}}
uimodal.createComponent(modalconfig,function(modal){modal.show()})})})},showDiscordUser:function(tag){var members=window.DiscordChat.data.members
var mi=null
for(var i=0;i<members.length;i++){if(members[i].username+'#'+members[i].discriminator===tag){mi=i
break}}require(['wikia.ui.factory'],function(ui){ui.init(['modal']).then(function(uimodal){var modalconfig={type:'default',vars:{id:'show-discord-user',size:'small',title:_.escape(members[mi].nick||members[mi].username)+(members[mi].bot?'&nbsp;[BOT]':''),content:'<center><div style="position: relative; width: 128px; height: 128px;"><img width="128" height="128" style="border-radius: 50%;" src="'+members[mi].avatar_url+'"><div style="position: absolute; width: 32px; height: 32px; border-radius: 50%; right: 0; bottom: 0; background-color: '+(members[mi].status==='online'?'lawngreen':(members[mi].status==='idle'?'gold':'firebrick'))+';"></div></div><br>'+_.escape(tag)+'</center>',buttons:[{vars:{value:window.DiscordChat.messages['awc-metrics-close'],data:[{key:'event',value:'close'}]}}]}}
uimodal.createComponent(modalconfig,function(modal){modal.show()})})})},shuffle:function(a){var j,x,i
for(i=a.length-1;i>0;i--){j=Math.floor(Math.random()*(i+1))
x=a[i]
a[i]=a[j]
a[j]=x}}}
mw.loader.using('mediawiki.api',function(){$(function(){if(window.DiscordChat&&!window.DiscordChat.ready){window.DiscordChat.init()}})});$(function(config){config=config||{};var PageName=mw.config.get('wgTitle'),Namespace=mw.config.get('wgCanonicalNamespace'),exceptions=config.exceptions||[];if(Namespace==="Message_Wall"){$.getJSON('/api.php?action=query&list=groupmembers&gmgroups=bot&gmlimit=max&format=json',function(data){var botList=data.users;for(var i=0;i<botList.length;i++){if(botList[i].name===PageName){if(exceptions.indexOf(PageName)===-1){$('.Wall.Board').remove();}break;}}});}}(window.DisableBotMessageWalls));;(function(){'use strict';console.log('DiscussionsActivity v0.9.6.10');var config=window.mw.config.get(['wgCanonicalNamespace','wgCityId','wgScriptPath','wgTitle','wgUserGroups','wgUserName']);var i18n;var isMod;var canBlock;var wallsEnabled=!1;var timeout;function escapeHTML(str){return(str?window.mw.html.escape(str):'');}function epochToTimeAgo(epoch){var elapsed=(
Math.floor(new Date().getTime())-new Date(epoch*1000))/1000;var factors=[['seconds',60],['minutes',60],['hours',24],['days',30],['months',12],['years']];var unit;var i=0;for(;i<factors.length&&elapsed>=factors[i][1];i++){elapsed/=factors[i][1];}unit=factors[i][0];elapsed=Math.floor(elapsed);return i18n(unit+'_ago_'+(elapsed>1?'plural':'singular'),elapsed).escape();}function postInfo(post){var data={title:escapeHTML(post._embedded.thread[0].title),text:escapeHTML(post.rawContent.length>250?post.rawContent.substring(0,250).trim()+'...':post.rawContent),userName:escapeHTML(post.createdBy.name),userNameEncoded:null,userID:post.createdBy.id,avatarURL:post.createdBy.avatarUrl,time:epochToTimeAgo(post.creationDate.epochSecond),image:post._embedded.contentImages[0],embed:post._embedded.openGraph,messageID:post.id,threadID:post.threadId,forumName:escapeHTML(post.forumName),forumID:post.forumId,isReply:post.isReply,isReported:(isMod?post.isReported:undefined),isLocked:post._embedded.thread[0].
isLocked,isDeleted:null,isMessageDeleted:post.isDeleted,isThreadDeleted:post._embedded.thread[0].isDeleted,deleter:null,deleterID:null};data.userNameEncoded=data.userName.replace(/ /g,'_');if(!data.avatarURL){data.avatarURL='https://vignette.wikia.nocookie.net/messaging/images/1/19/Avatar.jpg/revision/latest';}else if(data.avatarURL.indexOf('/messaging/')>-1){data.avatarURL=data.avatarURL.replace(/[^jpg]*$/,'')+'/revision/latest';}data.isDeleted=Boolean(data.isThreadDeleted||data.isMessageDeleted);if(data.isMessageDeleted){data.deleter=post.lastDeletedBy.name;data.deleterID=post.lastDeletedBy.id;}return data;}function headerItem(data){var icon={class:['new','talk'],title:[i18n('icon_title_thread').escape(),i18n('icon_title_reply').escape()]};var i=(data.isReply?1:0);var header='<img class="'+icon.class[i]+' sprite" src="data:image/gif;base64,R0lGODlhAQABAIABAAAAAP///yH5BAEAAAEALAAAAAABAAEAQAICTAEAOw%3D%3D" alt="'+icon.title[i]+'" title="'+icon.title[i]+'" width="16" height="16">'+
' <strong><a class="title rda-title" href="'+config.wgScriptPath+'/f/p/'+data.threadID+'">'+data.title+'</a></strong>'+' '+i18n('in').escape()+' <a class="rda-category" href="'+config.wgScriptPath+'/f?catId='+data.forumID+'&sort=latest">'+data.forumName+'</a>';return header;}function contentRow(data){var subtitle=i18n(data.isReply?'commented_by':'created_by').escape();var blockButton=(canBlock?' | <a class="rda-block" href="'+config.wgScriptPath+'/wiki/Special:Block/'+data.userNameEncoded+'">'+i18n('block').escape()+'</a>':'');var talk={class:['rda-talk','rda-wall'],link:['User_talk','Message_Wall'],text:[i18n('talk').escape(),i18n('wall').escape()]};var i=(wallsEnabled?1:0);var row='<tr>'+'<td>'+'<img src="'+data.avatarURL+'/scale-to-width-down/50" width="30" height="30" class="avatar rda-avatar" alt="'+data.userName+'">'+'</td>'+'<td>'+'<p>'+'<cite>'+'<span class="subtle">'+subtitle+'</span>'+' <a class="real-name rda-username" href="'+config.wgScriptPath+'/f/u/'+data.userID+'">'+
data.userName+'</a> (<a class="'+talk.class[i]+'" href="'+config.wgScriptPath+'/wiki/'+talk.link[i]+':'+data.userNameEncoded+'">'+talk.text[i]+'</a> | <a class="rda-contribs" href="'+config.wgScriptPath+'/wiki/Special:Contributions/'+data.userNameEncoded+'">'+i18n('contribs').escape()+'</a>'+blockButton+')'+' <a class="subtle rda-time" href="'+config.wgScriptPath+'/f/p/'+data.threadID+'/r/'+data.messageID+'">'+data.time+'</a>'+'</cite>'+'</p>'+'<p>'+'<span class="rda-content">'+data.text+'</span>'+'</p>'+'</td>'+'</tr>';return row;}function getThumbnail(h,w){if(w>200){h=Math.floor(h*(200/w));w=200;}return{height:h,width:w};}function imageRow(image,table){if(!image){return;}var thumbnail=getThumbnail(image.height,image.width);var cellContent='<ul class="activityfeed-inserted-media rda-inserted-media reset">'+'<li>'+'<a data-image-link="" href="'+image.url+'">'+'<img src="'+image.url+'/scale-to-width-down/200" width="'+thumbnail.width+'" height="'+thumbnail.height+'" class="rda-image">'+
'</a>'+'</li>'+'</ul>';var row=table.insertRow(-1);row.setAttribute('data-type','inserted-image');row.insertCell(0);var cell2=row.insertCell(1);cell2.innerHTML=cellContent;}function embedRow(embed,table){if(!embed){return;}var title=escapeHTML(embed[0].title);var url=escapeHTML(embed[0].url);var thumbnail=getThumbnail(embed[0].imageHeight,embed[0].imageWidth);var separator=document.getElementsByClassName('page-header__separator')[0];var separatorColor=window.getComputedStyle(separator).backgroundColor;var fragment=document.createRange().createContextualFragment('<a target="_blank" style="border-color: '+separatorColor+';" title="'+url+'" href="'+url+'" class="og-container large-image-card-mobile small-image-card-desktop ember-view"><!---->'+'<div class="og-image-wrapper">'+'<img src="'+embed[0].imageUrl+'/scale-to-width-down/200" width="'+thumbnail.width+'" height="'+thumbnail.height+'" alt="'+title+'" class="og-image rda-image"><!---->'+'</div>'+'<div class="og-texts">'+
'<h3 class="og-title">'+title+'</h3>'+'<div class="og-description subtle">'+escapeHTML(embed[0].description)+'</div>'+'<div class="og-site-name subtle">'+escapeHTML(embed[0].siteName)+'</div>'+'</div>'+'</a>');var imageWrapper=fragment.firstChild.childNodes[1];if(embed[0].videoUrl){imageWrapper.classList.add('og-video-thumbnail');}var row=table.insertRow(-1);row.setAttribute('data-type','inserted-image');row.insertCell(0);var cell2=row.insertCell(1);cell2.appendChild(fragment);}function statusRow(data,table){var status={isDeleted:{type:'deleted',icon:'trash',iconTitle:i18n('icon_title_deleted').escape(),subtitle:(data.isMessageDeleted?i18n('message_deleted_by').escape()+' <a class="rda-deleter" href="'+config.wgScriptPath+'/f/u/'+data.deleterID+'">'+data.deleter+'</a>':i18n('parent_thread_deleted').escape()),class:'rda-deleted'},isReported:{type:'reported',icon:'error',iconTitle:i18n('icon_title_reported').escape(),subtitle:i18n('message_reported').escape(),class:'rda-reported'},
isLocked:{type:'locked',icon:'lock',iconTitle:i18n('icon_title_locked').escape(),subtitle:i18n(data.isReply?'parent_thread_locked':'thread_locked').escape(),class:'rda-locked'}};var key=Object.keys(status).filter(function(e){return data[e]===!0;})[0];if(!key){return;}var textSpan=table.getElementsByClassName('rda-content')[0];var cellContent='<cite>'+'<img class="'+status[key].icon+' sprite rda-icon-'+status[key].type+'" src="data:image/gif;base64,R0lGODlhAQABAIABAAAAAP///yH5BAEAAAEALAAAAAABAAEAQAICTAEAOw%3D%3D" alt="'+status[key].iconTitle+'" title="'+status[key].iconTitle+'" width="16" height="16" />'+'<span class="subtle">'+status[key].subtitle+'</span>'+'</cite>';var row=table.insertRow(-1);row.insertCell(0);var cell2=row.insertCell(1);cell2.className='rda-status-'+status[key].type;cell2.innerHTML=cellContent;textSpan.classList.add(status[key].class);}function buildItem(post,ul){var data=postInfo(post);var header=headerItem(data);var content=contentRow(data);var itemFrag=document
.createRange().createContextualFragment('<li class="activity-type-discussion rda-entry">'+header+'<table class="wallfeed rda-table">'+'<tbody>'+content+'</tbody>'+'</table>'+'</li>');var li=itemFrag.firstChild;var table=li.getElementsByTagName('table')[0];imageRow(data.image,table);embedRow(data.embed,table);statusRow(data,table);ul.appendChild(itemFrag);}function buildList(response,content){var listFrag=document.createRange().createContextualFragment('<ul class="activityfeed rda-feed reset" id="myhome-activityfeed"></ul>');var ul=listFrag.firstChild;for(var i=0;i<response.length;i++){buildItem(response[i],ul);}content.innerHTML='';content.appendChild(listFrag);}function getDiscussions(content,loadingElement){loadingElement=(loadingElement||document.getElementById('rda-chbx-autorefresh'));loadingElement.classList.add('rda-loading');if(timeout){clearTimeout(timeout);}var interval=(window.rdaRefreshInterval>=30000?window.rdaRefreshInterval:60000);var viewableOnly=(isMod&&localStorage.
getItem('rdaShowDeleted')==='false'?true:!isMod);var request=new XMLHttpRequest();request.timeout=30000;request.ontimeout=function(){content.textContent=i18n('error_no_connection').plain();};request.onreadystatechange=function(){if(request.readyState===4){if(request.status===200){var response=JSON.parse(request.responseText)._embedded['doc:posts'];buildList(response,content);}else{content.textContent=i18n('error_no_connection').plain();}var autoRefresh=(localStorage.getItem('rdaAutoRefresh')==='false'?false:true);timeout=(autoRefresh?setTimeout(getDiscussions,interval,content):timeout);loadingElement.classList.remove('rda-loading');}};request.open('GET','https://services.fandom.com/discussion/'+config.wgCityId+'/posts?limit=50&viewableOnly='+viewableOnly,true);request.setRequestHeader('Accept','application/hal+json');request.withCredentials=!0;request.send();}function checkboxes(content){var header=document.getElementsByClassName('page-header__main')[0];var chbxsFrag=document.
createRange().createContextualFragment('<div id="rda-checkboxes" class="page-header__subtitle"></div>');var div=chbxsFrag.firstChild;function makeChbx(name,id,cookie){var frag=document.createRange().createContextualFragment('<span id="'+id+'">'+'<input type="checkbox" />'+'<label>'+name+'</label>'+'</span>');if(localStorage.getItem(cookie)!=='false'){var input=frag.firstChild.childNodes[0];input.checked=!0;}div.appendChild(frag);}makeChbx(i18n('checkbox_auto_refresh').escape(),'rda-chbx-autorefresh','rdaAutoRefresh');if(isMod){makeChbx(i18n('checkbox_show_deleted').escape(),'rda-chbx-showdeleted','rdaShowDeleted');}header.appendChild(chbxsFrag);var autoRefresh=document.getElementById('rda-chbx-autorefresh').childNodes[0];autoRefresh.onchange=function(){if(autoRefresh.checked){localStorage.setItem('rdaAutoRefresh','true');getDiscussions(content);}else{localStorage.setItem('rdaAutoRefresh','false');clearTimeout(timeout);}};if(isMod){var showDeleted=document.getElementById(
'rda-chbx-showdeleted').childNodes[0];showDeleted.onchange=function(){if(showDeleted.checked){localStorage.setItem('rdaShowDeleted','true');}else{localStorage.setItem('rdaShowDeleted','false');}getDiscussions(content,showDeleted.parentElement);};}}function createPage(status){if(config.wgCanonicalNamespace+':'+config.wgTitle!=='Special:DiscussionsActivity'){return;}document.title=i18n('document_title_new').escape()+' |'+document.title.split('|').slice(1).join('|');document.getElementById('PageHeader').getElementsByTagName('h1')[0].textContent=i18n('document_title_new').plain();var content=document.getElementById('mw-content-text');switch(status){case 200:var background=document.getElementById('WikiaPageBackground');var rgb=window.getComputedStyle(background).backgroundColor.match(/\d+/g);var hex='';rgb.forEach(function(i){hex+=parseInt(i,10).toString(16).padStart(2,i);});var title=document.getElementsByTagName('title')[0];var style=
'<link rel="stylesheet" type="text/css" href="https://slot1-images.wikia.nocookie.net/__am/1515674256/sasses/color-page%3D%2523'+hex+'%26skins/extensions/wikia/MyHome/oasis.scss,extensions/wikia/Wall/css/WallWikiActivity.scss" />';title.insertAdjacentHTML('afterend',style);var blockers=['sysop','staff','helper','vstf','global-discussions-moderator'];canBlock=blockers.some(function(role){return config.wgUserGroups.indexOf(role)>-1;});isMod=Boolean(canBlock||config.wgUserGroups.indexOf('threadmoderator')>-1);var startLoading=function(){checkboxes(content);content.innerHTML='<span class="rda-loading">'+i18n('loading_discussions').escape()+'</span>';getDiscussions(content);};var request=new XMLHttpRequest();request.timeout=30000;request.ontimeout=function(){startLoading();};request.onreadystatechange=function(){if(request.readyState===4){if(request.status===200){wallsEnabled=!0;}startLoading();}};request.open('GET',mw.util.getUrl('Message Wall:Wikia'),true);request.send();break;case 404:
content.textContent=i18n('error_discussions_disabled').plain();break;default:content.textContent=i18n('error_no_connection').plain();}}function insertLinks(){var pages={RecentChanges:{title:i18n('recent_changes').escape(),links:['WikiActivity','DiscussionsActivity']},WikiActivity:{title:i18n('wiki_activity').escape(),links:['WikiActivity/watchlist','RecentChanges','DiscussionsActivity']},DiscussionsActivity:{title:i18n('discussions_activity').escape(),links:['RecentChanges','WikiActivity']},'WikiActivity/watchlist':{title:i18n('watchlist').escape(),links:['RecentChanges','WikiActivity','DiscussionsActivity']}};if(Object.keys(pages).every(function(p){return'Special:'+p!==config.wgCanonicalNamespace+':'+config.wgTitle;})){return;}var headerSubtitle=document.getElementsByClassName('page-header__page-subtitle')[0];var pagesLinked=pages[config.wgTitle].links;var links=[];pagesLinked.forEach(function(page){links.push('<a href="'+config.wgScriptPath+'/wiki/Special:'+page+'" title="Special:'+
page+'">'+pages[page].title+' ></a>');});links=(config.wgTitle==='WikiActivity'&&!config.wgUserName?links.slice(1):links);headerSubtitle.innerHTML=links.join(' | ');}function isDiscussionsEnabled(){var request=new XMLHttpRequest();request.timeout=30000;request.ontimeout=function(){createPage(request.status);};request.onreadystatechange=function(){if(request.readyState===4){createPage(request.status);if(request.status===200){insertLinks();}}};request.open('GET',config.wgScriptPath+'/f',true);request.send();}window.mw.hook('dev.i18n').add(function(lib){lib.loadMessages('DiscussionsActivity').done(function(lang){i18n=lang.msg;isDiscussionsEnabled();});});window.importArticles({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'},{type:'style',article:'u:dev:MediaWiki:DiscussionsActivity.css'});})();;(function(){'use strict';var mconfig=mw.config.get(['wgUserLanguage','wgUserName']);if(window.DiscordIntegratorLoaded){return;}window.DiscordIntegratorLoaded=!0;var DiscordIntegrator={
config:(window.DiscordIntegratorConfig||{}).siderail||{},hook:function(i18n){$.when(i18n.loadMessages('DiscordIntegrator'),mw.loader.using('mediawiki.api')).then($.proxy(this.preload,this));},preload:function(i18n){this.i18n=i18n;mw.hook('wikipage.content').add($.proxy(this.insertToContent,this));this.api=new mw.Api();this.api.get({action:'query',meta:'allmessages',ammessages:['id','title','moduleHeight','theme','width','height','text','logged-in','footer','username'].map(function(el){return'Custom-DiscordIntegrator-config-'+el;}).join('|'),amlang:mconfig.wgUserLanguage,smaxage:300,maxage:300}).done($.proxy(function(d){if(!d.error){d.query.allmessages.forEach(function(el){if(el['*']){this.config[el.name.substring(32)]=el['*'];}},this);this._loading=0;['text','title','footer'].forEach(this.parse,this);if(this._loading===0){this.init();}}},this));},parse:function(msg){if(this.config[msg]){++this._loading;this.api.get({action:'parse',text:this.config[msg]}).done($.proxy(function(d){if(!d.
error){this.config[msg]=d.parse.text['*'];if(--this._loading===0){this.init();}}},this));}},init:function(){if(this.config.id&&$('#WikiaRail').length>0){var clas=$('#WikiaRail').attr('class');if(clas&&clas.split(/\s+/).indexOf('loaded')===-1){$('#WikiaRail').on('afterLoad.rail',$.proxy(this.insertToSiderail,this));}else{this.insertToSiderail();}}},insertToSiderail:function(){var filter=$('#top-right-boxad-wrapper, #top-boxad-wrapper, #NATIVE_TABOOLA_RAIL, .content-review-module').last(),el=$('<div>',{class:'DiscordIntegratorModule rail-module'});if(this.config.title){el.append($('<h2>',{'class':'activity-heading',html:this.config.title}));}if(this.config.text){el.append($('<p>',{id:'DiscordIntegratorModuleText',html:this.config.text}));}el.append(this.generateContent(this.config));if(this.config.footer){el.append($('<p>',{id:'DiscordIntegratorModuleFooter',html:this.config.footer}));}if(filter.length>0){el.insertAfter(filter);}else{$('#WikiaRail').prepend(el);}if(this.config.
moduleHeight){mw.util.addCSS('.DiscordIntegratorModule { height: '+Number(this.config.moduleHeight)+'px; }');}mw.hook('DiscordIntegrator.added').fire(el);},insertToContent:function($content){$content.find('.DiscordIntegrator:not(.loaded)').each($.proxy(function(cabbage,el){el=$(el);el.html(this.generateContent(el.data())).addClass('loaded');},this));},generateContent:function(config){return config.id?((config.loggedIn===true||(Boolean(config['logged-in'])===true&&config['logged-in']!=='false'&&config['logged-in']!=='{{{loggedIn}}}'))&&!mconfig.wgUserName)?this.i18n.msg('login').parse():mw.html.element('iframe',{src:'https://discordapp.com/widget?id='+config.id+'&theme='+(config.theme==='light'?'light':'dark')+'&username='+encodeURIComponent(config.username==='@disabled'?'':config.username==='@function'&&typeof window.DiscordIntegratorGetUsername==='function'?window.DiscordIntegratorGetUsername():config.username||mconfig.wgUserName),width:config.width||'100%',height:config.height||
'400px',allowtransparency:'true',frameborder:'0'}):this.i18n.msg('error').escape();}};mw.hook('dev.i18n').add($.proxy(DiscordIntegrator.hook,DiscordIntegrator));importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});})();;require(['wikia.window','jquery','mw'],function(window,$,mw){'use strict';window.dev=window.dev||{};var scriptPath=mw.config.get('wgScriptPath');if(window.discussionsModuleLoaded||(!$('.wds-community-header a[href="'+scriptPath+'/f"]').exists()&&mw.config.get('wgEditorExtraButtons')===null)){return;}window.discussionsModuleLoaded=!0;window.dev.discussionsModule={};var config=window.discussionsModuleConfig||{},embed=window.discussionsModuleEmbed||!1,options={};options.mostrecent=function(k){var b=Boolean(k).toString();return b;};options.size=function(k){if([3,4,5,6].indexOf(k)>-1){return k;}};options.catid=function(k){var c=k.join().replace(/\s/g,'');return c;};$.each(config,function(k,v){if(!options.hasOwnProperty(k)){delete config[k];}else if(
typeof options[k](k)==='undefined'){delete config[k];}else{config[k]=options[k](k);}});importArticle({type:'style',article:'u:dev:MediaWiki:DiscussionsRailModule.css'});(mw.util.addCSS('.skin-oasis .discussions-rail-theme .embeddable-discussions-module .embeddable-discussions-title {'+'color: '+mw.config.get('wgSassParams')['color-links']+';'+'}'+'.skin-oasis .discussions-rail-theme .embeddable-discussions-module .avatar-container,'+'.skin-oasis .discussions-rail-theme .wds-avatar-stack .wds-avatar__image {'+'border: 2px solid '+$('.wds-community-header .wds-dropdown__content').css('border-left-color')+';'+'}')).ownerNode.id='discussionsModuleStyles';function init(){window.dev.discussionsModule=new DiscussionsModule();}function DiscussionsModule(){mw.hook('dev.i18n').add($.proxy(this.i18n.handler,this));importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});this.data.fetch.done($.proxy(this.data.async,this));$.when(this.i18n.$loaded,this.data.$loaded).done($.proxy(
this.init,this));}$.extend(DiscussionsModule.prototype,{$rail:$('#WikiaRail'),$module:$('<section>',{'class':'discussions-rail-theme rail-module'}),moduleText:mw.html.element('discussions',config)});DiscussionsModule.prototype.init=function(){mw.hook('discussionsModule.ui').add($.proxy(this.ui.module,this)).add($.proxy(this.ui.load,this));mw.hook('wikipage.content').add($.proxy(this.ui.content,this));mw.hook('discussionsModule.loaded').add($.proxy(this.ui.posts,this));if(!embed&&this.$rail.exists()){this.api=new mw.Api();this.api.get({action:'parse',disablepp:!0,text:this.moduleText}).done($.proxy(this.call,this));}};DiscussionsModule.prototype.call=function(d){if(d.error){return;}this.$module.html(d.parse.text['*'].replace(/<\/?p>|module\s/g,''));if(this.$rail.hasClass('loaded')){$.proxy(this.rail,this)();}else{this.$rail.on('afterLoad.rail',$.proxy(this.rail,this));}};DiscussionsModule.prototype.rail=function(){if($('.activity-module').length){this.$rail.find(
'.activity-module:first').after(this.$module);}else if($('.rail-sticky-module').length){this.$module.insertBefore(this.$rail.find('.rail-sticky-module'));}else{this.$rail.append(this.$module);}mw.hook('discussionsModule.ui').fire(this.$module);mw.hook('discussionsModule.added').fire(this.$module);if(this.threadCount<(config.size||4)){var $threads=this.$module.find('.embeddable-discussions-threads'),truncUrl=$threads.attr('data-requesturl').replace(/(limit=)(\d)/,'$1'+this.threadCount);$threads.attr('data-requesturl',truncUrl);}mw.hook('wikipage.content').fire(this.$module);};DiscussionsModule.prototype.ui={};DiscussionsModule.prototype.ui.content=function($content){var $modules=$content.find('.discussions-rail-theme');$modules.each(function(i,el){var $el=$(el);mw.hook('discussionsModule.ui').fire($el);});};DiscussionsModule.prototype.ui.module=function($module){$module.find('.embeddable-discussions-module').removeClass('module');$module.find('.embeddable-discussions-show-all a[href^="'
+scriptPath+'/f"]').addClass('wds-button wds-is-secondary');$module.find('.embeddable-discussions-show-all').append(this.ui.$stack.clone());$module.find('.embeddable-discussions-heading').attr('data-title',this.i18n.msg('title').plain());};DiscussionsModule.prototype.ui.posts=function($module){$module.find('.embeddable-discussions-post-detail').each($.proxy(function(i,$post){$title=$post.find('.embeddable-discussions-title'),user=$post.find('.avatar-username').text(),defaultPostTitle=this.i18n.msg('post-by',user).plain();if($title.text().length===0){$title.html(defaultPostTitle);}},this));};DiscussionsModule.prototype.ui.load=function($module){var $threads=$module.find('.embeddable-discussions-threads'),thready=new MutationObserver(function(){if(!$.contains($module,$('.wikiaThrobber'))){mw.hook('discussionsModule.loaded').fire($module);thready.disconnect();}});if($threads.exists()){thready.observe($threads[0],{childList:!0});}};DiscussionsModule.prototype.ui.$stack=$('<div>',{'class'
:'wds-avatar-stack'});DiscussionsModule.prototype.i18n={};DiscussionsModule.prototype.i18n.handler=function(i18no){i18no.loadMessages('DiscussionsRailModule').done($.proxy(this.i18n.store,this));};DiscussionsModule.prototype.i18n.store=function(i18n){$.extend(this.i18n,i18n);this.i18n.$loaded.resolve();};DiscussionsModule.prototype.i18n.$loaded=$.Deferred();DiscussionsModule.prototype.data={};DiscussionsModule.prototype.data.fetch=$.get(mw.config.get('wgDiscussionsApiUrl')+'/'+mw.config.get('wgCityId')+'/'+'threads');DiscussionsModule.prototype.data.async=function(d){if(!d._embedded.threads.length){return;}this.threadCount=d._embedded.threads.length;$.proxy(this.data.ui,this)(d._embedded.contributors[0].userInfo.splice(0,5));};DiscussionsModule.prototype.data.ui=function(stackData){this.ui.$stack.html(stackData.map(function(u){return $('<a>',{href:mw.util.getUrl('User:'+u.name),'class':'wds-avatar',title:u.name,html:typeof u.avatarUrl==='string'?$('<img>',{'class':'wds-avatar__image',
'src':u.avatarUrl.indexOf('messaging')>-1?u.avatarUrl+'/revision/latest/scale-to-width-down/60':u.avatarUrl.replace('/scale-to-width-down/100','')+'/scale-to-width-down/60'}).prop('outerHTML'):$('<div>',{'class':'wds-avatar__image embeddable-discussions-default-avatar'}).prop('outerHTML')}).prop('outerHTML');}).join(''));this.data.$loaded.resolve();};DiscussionsModule.prototype.data.$loaded=$.Deferred();mw.loader.using('mediawiki.api').then(init);});;$(function(){'use strict';if($('#displayTimer, #showdate, #DisplayClockJS, #display-timer').length){return;}var msg={nulledit:'Null editing the page…',nulleditfail:'Null edit failed',nulleditsuccess:'Null edit successful',tooltip:'Purge the server cache for this page \nShift + Click: Null edit this page'};var updateDateInterval;var $parent=$('<li>').attr('id','displayTimer').css('direction','ltr');var $node=$('<a>').attr({title:msg.tooltip,href:'?action=purge'}).appendTo($parent);function updateDate(){$node.text(new Date().toUTCString().
slice(5,-3)+'(UTC)');}function nullEditPage(){clearInterval(updateDateInterval);$node.text(msg.nulledit);$.post(mw.util.wikiScript('api'),{action:'edit',format:'json',title:mw.config.get('wgPageName'),token:mw.user.tokens.get('editToken'),prependtext:''}).always(function(data){if(data.edit&&data.edit.result==='Success'){$node.text(msg.nulleditsuccess);location.reload(true);}else{$node.text(msg.nulleditfail);}});}if(mw.config.get('wgIsArticle')){$node.click(function(event){if(event.shiftKey){event.preventDefault();mw.loader.using('mediawiki.util',nullEditPage);}});}if(mw.config.get('skin')==='oasis'){var oasisCSS=document.dir==='rtl'?{'float':'left','border-left':'0'}:{'float':'right','border-right':'0'};$parent.css(oasisCSS).appendTo('.toolbar > .tools');}else{$parent.css('text-transform','none').prependTo('#p-personal ul');}updateDate();updateDateInterval=setInterval(updateDate,1000);$parent=null;if(!(window.dev&&window.dev.i18n&&window.dev.i18n.loadMessages)){mw.loader.load(
"https://dev.fandom.com/load.php?mode=articles&only=scripts&articles=MediaWiki:I18n-js/code.js");}mw.hook('dev.i18n').add(function(i18njs){i18njs.loadMessages('DisplayTimer').done(function(i18n){Object.keys(msg).forEach(function(key){msg[key]=i18n.msg(key).plain();});$node.attr('title',msg.tooltip);});});});;(function($,mw){'use strict';if(window.DupImageListLoaded){return;}window.DupImageListLoaded=!0;var urlAPI=mw.config.get('wgScriptPath')+'/api.php',urlArticle=mw.config.get('wgArticlePath'),exts=new RegExp('\\.(?:'+mw.config.get('wgFileExtensions').join('|')+')$','i'),dil={},title,output;function findDupImages(gf){var opts={format:'json',action:'query',prop:'duplicatefiles',dflimit:500,dflocalonly:1,generator:'allimages',gailimit:500};if(gf){if(gf.indexOf('|')>-1){opts.dfcontinue=gf;gf=gf.split('|')[0];}opts.gaifrom=gf;}$.post(urlAPI,opts,function(data){var pages,pageID,x;if(data.query){pages=data.query.pages;for(pageID in pages){if(exts.test(pages[pageID].title)&&!dil[pages[
pageID].title]&&pages[pageID].duplicatefiles){if(title!==pages[pageID].title){if(output){$('#mw-dupimages').append(output+'</ul>');}title=pages[pageID].title;output='<h3><a href="'+encodeURI(urlArticle.replace('$1',title).replace(/ /g,'_'))+'">'+title+'</a></h3><ul>';}for(x=0;x<pages[pageID].duplicatefiles.length;++x){output+='<li><a href="'+encodeURI(urlArticle.replace('$1','File:'+pages[pageID].duplicatefiles[x].name).replace(/ /g,'_'))+'">File:'+pages[pageID].duplicatefiles[x].name.replace(/_/g,' ')+'</a></li>';dil['File:'+pages[pageID].duplicatefiles[x].name.replace(/_/g,' ')]=!0;}}}if(data['query-continue']){if(data['query-continue'].duplicatefiles){findDupImages(data['query-continue'].duplicatefiles.dfcontinue);}else{findDupImages(data['query-continue'].allimages.gaifrom);}}else{$('#dupImagesProgress').empty();if(output){$('#mw-dupimages').append(output+'</ul>');}}}});}function init(i18n){var indicator=mw.config.get('stylepath')+'/common/progress-wheel.gif';if($('#mw-dupimages'
).length){$('#mw-dupimages').prepend('<div id="dupImagesProgress" style="height: 0; text-align: center;"><img src="'+indicator+'" style="border: 0 none;" alt="'+i18n.msg('inProgress').escape()+'" /></div>');findDupImages();}}mw.hook('dev.i18n').add(function(i18no){i18no.loadMessages('DupImageList').then(init);});importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});}(jQuery,mediaWiki));;(function($,fng){fng.gc=fng.gc||{};if(fng.gc.version)return;fng.gc.version='1.2';$(function(){var $galleries,$pi,$thumb,cache;if(window.wgEnableMediaGalleryExt){$galleries=$('div.media-gallery-wrapper');}else{$galleries=$('div.wikia-gallery, div.wikia-slideshow');}$pi=$('.portable-infobox');$thumb=$('.image-thumbnail');if(!$galleries.length&&!$pi.length&&!$thumb.length)return;$(window).on('lightboxOpened',function(){if(!cache){cache=[];$thumb.each(function(i,v){var $v=$(v);if($v.parents('.pi-image, div.media-gallery-wrapper, div.wikia-gallery, div.wikia-slideshow').length)return;$v=$v
.find('img');if(!$v.length)return;cache[encodeURIComponent(decodeURIComponent($v.data('imageKey')))]={caption:decodeURIComponent($v.data('imageName')).replace(/(<([^>]+)>)/ig,''),captionText:decodeURIComponent($v.attr('alt')).replace(/(<([^>]+)>)/ig,'')};});if(window.wgEnableMediaGalleryExt){$galleries.each(function(i,v){var data=$(v).data('model');if(!data)return;$.each(data,function(i,v){var imgname=encodeURIComponent(decodeURIComponent(v.dbKey));v.captionText=(v.caption||v.title).replace(/(<([^>]+)>)/ig,'');cache[imgname]=v;});});}else{$galleries.find('.wikia-gallery-item .thumbimage, .wikia-slideshow .thumbimage').each(function(i,v){var caption=$(v).closest('.wikia-gallery-item, .wikia-slideshow').find('.lightbox-caption');cache[encodeURIComponent(decodeURIComponent(v.dataset.imageKey))]={caption:caption.html(),captionText:(caption.text()||v.dataset.imageName||v.dataset.imageKey||'').replace(/(<([^>]+)>)/ig,'')};});}$pi.each(function(i,v){$(v).find('.pi-image').each(function(i,v){
var $piImage=$(v);var caption=$piImage.find('.pi-caption');cache[encodeURIComponent(decodeURIComponent($piImage.find('img').data('imageKey')))]={caption:caption.html(),captionText:(caption.text()||'').replace(/(<([^>]+)>)/ig,'')};});});}setTimeout(function(){var $lb=$('#LightboxModal');var thumbs=((window.Lightbox||{}).current||{}).thumbs;if(!$lb.length||!thumbs||!thumbs.length)return;var $caption=$('<span>',{class:'gc-caption'});function onClick(e){var thumb=thumbs[window.Lightbox.current.index];$caption.html(thumb.gcCaption||thumb.title||'');}$lb.find('.content .toolbar').append($('<li>').append($caption));$.each(thumbs,function(i,v){if(!v.key)return false;var item=cache[encodeURIComponent(decodeURIComponent(v.key))];if(!item)return;v.gcCaption=item.caption;v.gcCaptionText=item.captionText;});$lb.on('click.gc','#LightboxCarouselContainer .carousel li',onClick);onClick();$lb.find('#LightboxCarouselContainer .carousel li').each(function(i,v){var $v=$(v);if($v.hasClass('more-items')){
return false;}else{var $img=$v.find('img');$img.attr('title',thumbs[i].gcCaptionText);}});},1000);});});}(jQuery,window.fng=(window.fng||{})));;(function(){if($('#UserProfileMasthead').length===0||window.GlobalEditcountLoaded){return;}window.GlobalEditcountLoaded=!0;var GlobalEditcount={cache:$.storage.get('GlobalEditcount')||{},preload:function(i18n){this.user=$('#UserProfileMasthead h1').text();this.url=mw.util.getUrl('Special:Editcount/'+this.user);$.when(i18n.loadMessages('GlobalEditcount'),this.editcount()).then($.proxy(this.init,this));},editcount:function(){this.promise=new $.Deferred();var cache=this.cache[this.user];if(cache&&cache.timestamp&&Date.now()-cache.timestamp<60*60*1000){this.promise.resolve(cache.value);return this.promise;}$.get(this.url,$.proxy(this.cbEditcount,this));return this.promise;},cbEditcount:function(page){var edits=$(page).find('.TablePager th').eq(7).text();if(edits){this.cache[this.user]={timestamp:Date.now(),value:edits};$.storage.set(
'GlobalEditcount',this.cache);this.promise.resolve(edits);}},init:function(i18n,edits){mw.util.addCSS('.UserProfileMasthead .globaledit-details a:hover {'+'color: '+mw.config.get('wgSassParams')['color-links']+';'+'}');this.$element=$('<div>',{'class':'globaledit-details discussion-details tally'}).append($('<a>',{id:'globaleditAllEditsByUser',href:window.GlobalEditcountPlain?'#':this.url}).append($('<em>',{text:edits}),$('<span>',{'class':'globaledit-label','text':i18n.msg('globaleditcount').plain()})));$('.tally').first().after(this.$element);mw.hook('GlobalEditcount.loaded').fire(this);}};mw.hook('dev.i18n').add($.proxy(GlobalEditcount.preload,GlobalEditcount));if(!window.dev||!window.dev.i18n){importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});}importArticle({type:'style',article:'u:dev:MediaWiki:GlobalEditcount.css'});})();;require(['wikia.window','jquery','mw','wikia.tracker'],function(window,$,mw,tracker){var config={player:'VXc5h4Tf',langs:{en:{header:
'New to editing and contributing? We have an <a href="https://community.fandom.com/wiki/Fandom_University" title="Fandom University">extensive video library</a> to help you learn how to edit.',playlist:'g0INIi6n'},es:{header:'¿Estás empezando a editar y contribuir? Tenemos una <a href="https://comunidad.fandom.com/wiki/Universidad_de_FANDOM" title="Universidad de FANDOM">extensa videoteca</a> para ayudarte a aprender.',playlist:'XdgYjVRp?related_media_id=sxyvaxtY'}}},track=tracker.buildTrackingFunction({category:'fandomu-module',action:tracker.ACTIONS.CLICK,trackingMethod:'analytics'});function videoPlaylistModule(){if($('#community-page-player').length){return;}importArticle({type:'style',article:'u:dev:MediaWiki:FandomU.css'});var lang=mw.config.get('wgUserLanguage');lang=config.langs.hasOwnProperty(lang)?lang:'en';var $header=$('<div>',{class:'community-page-cards-module-header'}).html(config.langs[lang].header),$playerWrapper=$('<div>',{class:'community-page-todo-list-module'}),
$player=$('<div>',{id:'community-page-player'}),$playlistWrapper=$('<div>',{class:'community-page-module'}),$playlist=$('<div>',{id:'community-page-player-list'});$('<div>',{class:'CommunityPageMainContent CommunityPageFandomU'}).append($header,$playerWrapper.append($player),$('<div>',{class:'community-page-rail'}).append($playlistWrapper.append($playlist))).prependTo('.CommunityPageContainer');function resize(){$playlist.css('max-height',$player.height());var headerPaddingLeft=parseInt($playerWrapper.css('margin-left'));$header.css({'padding-left':headerPaddingLeft,'padding-right':$header.outerWidth()-($playlistWrapper[0].offsetLeft-$player[0].offsetLeft+$playlistWrapper.width())-headerPaddingLeft});}$(window).on('resize',resize);$.getScript('//content.jwplatform.com/libraries/'+config.player+'.js').then(function(){jwplayer('community-page-player').setup({autostart:!1,playlist:'//cdn.jwplayer.com/v2/playlists/'+config.langs[lang].playlist,pid:config.player,width:'100%'}).on('ready'
,function(){$player=$('#community-page-player');var player=this;player.getPlaylist().forEach(function(e){$('<img>',{class:'community-page-player-list-item',src:e.image,width:'calc( 100% - 3px )'}).click(function(){player.playlistItem($(this).index());}).appendTo($playlist);});track({action:tracker.ACTIONS.FLOW_START,label:'jwplayer-ready'});resize();}).on('viewable',function(){resize();}).on('playlistItem',function(e){$playlist.children('.active').removeClass('active');$playlist.children().eq(e.index).addClass('active');track({action:tracker.ACTIONS.SELECT,label:'playlistitem',value:e.index});}).on('firstFrame',function(){track({action:tracker.ACTIONS.PLAY_VIDEO,label:'play',value:this.getPlaylistIndex()});}).on('complete',function(){track({action:tracker.ACTIONS.PLAY_VIDEO,label:'complete',value:this.getPlaylistIndex()});});});}if(mw.config.get('wgCanonicalSpecialPageName')==='Community'){videoPlaylistModule();}});;;(function($,mw){'use strict';var headerLinks={init:function(){var
headers=$('.mw-headline');if(!headers.length){return;}if($('.mw-header-link').length){return;}headerLinks.addLinks(headers);},addLinks:function(headers){function init(i18n){mw.util.addCSS('h1:hover .mw-header-link,h2:hover .mw-header-link,h3:hover .mw-header-link,h4:hover .mw-header-link,h5:hover .mw-header-link,h6:hover .mw-header-link{opacity:0.5 !important;}'+'.mw-headline .mw-header-link:hover{opacity:1 !important;}');headers.each(function(){var $a=$('<a>').attr('title',i18n.msg('text').plain()).append($('<img>').attr({width:'20',src:'//upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Ambox_padlock_gray.svg/20px-Ambox_padlock_gray.svg.png'})),$span=$('<span>').attr('class','mw-header-link').append($a).css({'float':'right','opacity':'0','transition':'opacity 0.3s linear'}),$h=$(this);$a.attr('href','#'+$h.attr('id'));$h.append($span);});}mw.hook('dev.i18n').add(function(i18n){i18n.loadMessages('HeaderLinks').then(init);});importArticle({type:'script',article:
'u:dev:MediaWiki:I18n-js/code.js'});}};$(headerLinks.init);}(jQuery,mediaWiki));;require(['jquery','mw','wikia.window'],function($,mw,window){var config=mw.config.get(['wgArticleId','wgPageName']);if(window.FixCascadingProtectionEditButtonLoaded||config.wgArticleId===0||$('#ca-edit').exists()){return;}window.FixCascadingProtectionEditButtonLoaded=!0;function init(msg){new mw.Api().get({action:'query',meta:'userinfo',uiprop:'rights',prop:'info',inprop:'protection',titles:config.wgPageName,format:'json'}).done(function(d){if(d.query.pages[config.wgArticleId].protection[0]&&d.query.pages[config.wgArticleId].protection[0].source&&d.query.userinfo.rights.includes('protect')){$('#ca-edit').html(window.dev.wds.icon('pencil-small').outerHTML+'&nbsp;&nbsp;'+msg);}});}var preloads=3;function preload(){if(--preloads===0){window.dev.fetch('edit').then(init);}}mw.hook('dev.fetch').add(preload);mw.hook('dev.wds').add(preload);mw.loader.using('mediawiki.api').then(preload);importArticles({type:
'script',articles:['u:dev:MediaWiki:WDSIcons/code.js','u:dev:MediaWiki:Fetch.js']});});;require(['mw','jquery','wikia.window','wikia.browserDetect'],function(mw,$,window,browser){'use strict';var root=$('#toc');if(window.FloatingTocLoaded||!root.length)return;window.FloatingTocLoaded=!0;var isMobile=browser.isMobile(),win=$(window),page=$('#WikiaPage'),rail=$('#WikiaRail'),navHeight=$('#globalNavigation').height(),barHeight=$('#WikiaBarWrapper').height(),i18n={},options=$.extend({speed:250,auto:!1,enableKey:!0},window.FloatingToc);function initStyles(colors){var pageBright=colors.parse(colors.wikia.page).isBright(),menuBright=colors.parse(colors.wikia.menu).isBright(),icons={white:'https://images.wikia.nocookie.net/dev/images/c/c2/Ui-icons_ffffff_256x240.png',black:'https://images.wikia.nocookie.net/dev/images/a/aa/Ui-icons_222222_256x240.png',lightGray:'https://images.wikia.nocookie.net/dev/images/4/48/Ui-icons_cccccc_256x240.png',darkGray:
'https://images.wikia.nocookie.net/dev/images/8/89/Ui-icons_666666_256x240.png',url:function(color){return'url("'+this[color]+'");';}},styles=
'\
                .toc-dialog{\
                    border: 2px solid $border\
                }\
                .toc-dialog .ui-dialog-titlebar {\
                    background: $menu;\
                    background: linear-gradient(to bottom, $gradient 35%, $menu 65%);\
                    border: 1px solid $menu;\
                    color: $contrast;\
                }\
                .toc-dialog.ui-widget-content .ui-icon {\
                    background-image: $menu-gray-icons\
                }\
                .toc-dialog,\
                .toc-dialog .toc {\
                    background-color: $page;\
                    color: $text\
                }\
                #toc-open {\
                    border: 1px solid $page-border-gray;\
                    background-image: $page-gray-icons\
                }\
                .toc-btn, .toc-btn:hover {\
                    background-image: $menu-bw-icons\
                }';mw.util.addCSS(colors.replace(styles,{
'page-border-gray':pageBright?'#ccc':'#666','menu-gray-icons':menuBright?icons.url('darkGray'):icons.url('lightGray'),'page-gray-icons':pageBright?icons.url('lightGray'):icons.url('darkGray'),'menu-bw-icons':menuBright?icons.url('black'):icons.url('white')}));}function init(){var rootToc={top:root.offset().top,width:root.outerWidth(),height:root.outerHeight(),list:root.find('ol:first').outerHeight()};var toc={resizing:!1,padWrap:0,padLeft:0,padTop:0,title:$(),wrapper:$(),clone:$('<nav>',{'class':'toc show',id:'tocDialog',title:i18n.contents,css:{display:'none'},appendTo:page}),state:function(){var w=rootToc.width+toc.padLeft*2,h=Math.min(rootToc.list+toc.padTop+toc.title.outerHeight(),win.height()-toc.padWrap-navHeight-barHeight),ratio=w/h;return{position:[(win.width()-rootToc.width)/2,navHeight],width:w,height:h,maxWidth:win.height()*ratio,maxHeight:win.height()-toc.padWrap-navHeight-barHeight,};},toggle:function(action){var links=$('.toc-link');if(links.css('display')==='none')
links.show(options.speed);else links.hide(options.speed);if(root.css('display')==='none')root.slideDown(options.speed,toc.keepPos(action));else root.slideUp(options.speed,toc.keepPos(action));},keepPos:function(action){var winPos=win.scrollTop();if(action==='open'&&winPos>rootToc.top+rootToc.height){win.scrollTop(winPos-rootToc.height);}if(action==='close'){if(!options.enableKey){win.scrollTop(rootToc.top-navHeight);return;}if(winPos>rootToc.top)win.scrollTop(winPos+rootToc.height);}},fixPos:function(){if(toc.wrapper.css('position')==='fixed')return;toc.wrapper.css({top:toc.wrapper.offset().top-win.scrollTop(),left:toc.wrapper.offset().left-win.scrollLeft(),position:'fixed'});},reset:function(){toc.clone.dialog('option',toc.state());},dock:function(){toc.clone.dialog('option',{width:rail.width()+parseInt(page.css('padding-right'))-toc.padWrap,position:[rail.offset().left,navHeight]});},back:function(){win.scrollTop(0);},open:function(){toc.clone.dialog('open');},close:function(){toc.
clone.dialog('close');},button:function(action){return $('<button>',{'class':'toc-btn',id:'toc-'+action,title:i18n[action],click:toc[action]});},onOpen:function(){toc.reset();toc.fixPos();toc.toggle('open');},onClose:function(){toc.toggle('close');},onCreate:function(){toc.wrapper=$(this).parent();toc.title=toc.wrapper.find('.ui-dialog-titlebar');toc.padWrap=(parseInt(toc.wrapper.css('border-width'))+parseInt(toc.wrapper.css('padding')))*2;toc.padLeft=parseInt($(this).css('padding-left'));toc.padTop=parseInt($(this).css('padding-top'));toc.toggle();toc.wrapper.find('.ui-dialog-titlebar-close').remove();if(isMobile){$('<button>',{id:'toc-footer-close',text:i18n.close,click:toc.close,insertAfter:toc.clone});return;}else{$('<div>',{id:'toc-footer-link',text:i18n.poweredby+' ',insertAfter:toc.clone,append:$('<a>',{href:'//dev.fandom.com/wiki/FloatingToc',text:'FloatingToc'})});$('<div>',{id:'toc-btns',appendTo:toc.title,append:[toc.button('back'),toc.button('dock'),toc.button('reset'),toc.
button('close'),]});toc.wrapper.draggable({scroll:!1,containment:'window'});}},init:function(){toc.clone.append($('<ol>',{html:root.find('ol:first').html()}));toc.clone.dialog($.extend({dialogClass:'toc-dialog',show:{effect:'slideDown',duration:options.speed},hide:{effect:'slideUp',duration:options.speed},create:toc.onCreate,open:toc.onOpen,close:toc.onClose,resizeStart:function(){toc.resizing=!0},resizeStop:function(){toc.resizing=!1;toc.fixPos()},},toc.state()));win.resize(function(){if(!isMobile&&!toc.resizing&&toc.clone.dialog('isOpen'))toc.reset();});$(this).click(function(){if(toc.clone.dialog('isOpen'))toc.close();else toc.open();});}};$('#mw-content-text').find('h2,h3').find('.editsection').before($('<a>',{'class':'toc-link',href:'',title:i18n.toc,click:function(){win.scrollTop(rootToc.top-navHeight);return false;}}));var floatToc=$('<button>',{id:'toc-open',title:i18n.open,appendTo:$('#toctitle'),}).one('click',toc.init);if(options.auto)floatToc.click();if(options.
enableKey){$(document).keyup(function(e){var elem=document.activeElement.tagName;if($('body').hasClass('ve')||elem==='INPUT'||elem==='TEXTAREA')return;if(e.key==='t'||e.keyCode===84||e.which===84)floatToc.click();});}}function preload(root){if(root.find('ol').children().length===0)return setTimeout(function(){preload(root);},500);init();}importArticles({type:'style',article:'u:dev:MediaWiki:FloatingToc.css'},{type:'script',articles:['u:dev:MediaWiki:I18n-js/code.js','u:dev:MediaWiki:Colors/code.js','u:dev:MediaWiki:TouchPunch.js']});mw.hook('dev.colors').add(initStyles);mw.hook('dev.i18n').add(function(i18nLoaded){i18nLoaded.loadMessages('FloatingToc').done(function(i18nLoaded){i18n=i18nLoaded._messages.en;for(var i in i18n)i18n[i]=i18nLoaded.msg(i).escape();});});mw.loader.using(['jquery.ui.dialog','jquery.ui.draggable','jquery.ui.resizable','jquery.effects.slide'],function(){preload(root);});});;require(['wikia.window','jquery','mw'],function(window,$,mw){'use strict';var conf=mw.
config.get(['wgIsEditPage','wgPageName']),IMPORTJS_LANG='ruby',IMPORTJS_PAGE='MediaWiki:ImportJS',EXT_REGEXP=/(\/(?!span).*\.js|\.js)/g,SCRIPT=conf.wgIsEditPage?'CodeEditor/library.js':'Highlight-js.js';if(conf.wgPageName!==IMPORTJS_PAGE||(window.dev||{}).importJsPlus){return;}(window.dev=window.dev||{}).importJsPlus={};function ImportJSP(){if(conf.wgIsEditPage){mw.hook('dev.codeeditor.library').add(this.initEditor.bind(this));}else{mw.hook('dev.highlight').add(this.initHighlighting.bind(this));}importArticle({type:'script',article:'u:dev:MediaWiki:'+SCRIPT});}ImportJSP.prototype.initHighlighting=function(hljs){this.codeBlock=mw.util.$content.children('pre').addClass(IMPORTJS_LANG);hljs.loadLanguage(IMPORTJS_LANG).then(this.highlightReady.bind(this));};ImportJSP.prototype.highlightReady=function(hljs){if(Boolean(this.codeBlock.length)){hljs.highlightBlock(this.codeBlock.get(0));}var HLJS_KEYWORD='<span class="hljs-keyword">$1</span>';this.codeBlock.html(function(i,h){return h.replace(
EXT_REGEXP,HLJS_KEYWORD);});this.codeBlock.find('.hljs-number').replaceWith(function(){return this.textContent;});};ImportJSP.prototype.initEditor=function(codeEditor){codeEditor.boot(IMPORTJS_LANG).then(this.insertNowiki.bind(this));};ImportJSP.prototype.insertNowiki=function(codeEditor,ace,aceEditor){var v=codeEditor.session.getValue(),NOWIKI='# <nowiki>',NOWIKI_REGEXP=new RegExp('^'+NOWIKI.replace(/\s+/,' ?'));if(codeEditor._prefix||NOWIKI_REGEXP.test(v)){return;}codeEditor._prefix=NOWIKI;};window.dev.importJsPlus=new ImportJSP();});;(function wrapper($){var Settings=window.pPreview||{};Settings.debug=$.getUrlVar('debug')||(Settings.debug!==undefined?Settings.debug:false);Settings.dontrun=$.getUrlVar('nolp');if(Settings.dontrun)return;var Defaults={dock:'#mw-content-text, #article-comments',defimage:'https://vignette.wikia.nocookie.net/borderlands/images/0/05/Ajax.gif/revision/latest/scale-to-width-down/350?cb=20170626182120&path-prefix=ru',noimage:
'https://vignette.wikia.nocookie.net/borderlands/images/f/f5/%D0%97%D0%B0%D0%B3%D0%BB%D1%83%D1%88%D0%BA%D0%B0.png/revision/latest/scale-to-width-down/200?cb=20160122074659&path-prefix=ru',};var pp={};pp.sync=[];var ncache=[];var loc={lefts:5,tops:5};var currentEl={};var apiUri=new mw.Uri({path:window.wgScriptPath+'/api.php'});Settings.wrapper=wrapper;Settings.context=this;Settings.f={init:init,main:main,createuri:createUri,getpreview:ngetPreview,showpreview:nshowPreview,hidepreview:nhidePreview,cache:ncache,ignoreimage:nignoreImage,ignorepage:nignorePage,ignorelink:nignoreLink,cacheof:ncacheOf,chkimagesrc:chkImageSrc,preprocess:preprocess,elvalidate:elValidate};mw.loader.using(['mediawiki.util'],init);function log(){var a=[].slice.call(arguments);a.unshift('pp');if(Settings.debug)console.log.apply(this,a);}pp.start=function(e){if(e){if(pp.sync.indexOf(e)>-1){return false;}}Settings.process=!0;pp.sync.push(e||Settings.process);return true;};pp.stop=function(e){hlpaHover();var epos=pp.
sync.indexOf(e);if(epos!==-1){pp.sync.splice(epos,1);}else{pp.sync.splice(0,1);}if(pp.sync.length===0){Settings.process=!1;}};pp.cachedupl=function(){var el=null;outer:for(var i=0,len=ncache.length;i<len;i++){for(var k=i+1;k<len;k++){if(ncache[i].href===ncache[k].href){el={v:ncache[i].href,i:i,k:k};break outer;}}}if(el){console.log('pp.cachedupl found',el.v,el.i,el.k);}};function init(){if(window.pPreview&&window.pPreview.version){log('init dbl run protection triggered');return;}Settings.version='1.61';log('init vrsn:',Settings.version);Settings.apid=Settings.apid!==undefined?Settings.apid:!1;Settings.delay=Settings.delay!==undefined?Settings.delay:100;Settings.throttle=Settings.throttle!==undefined?Settings.throttle:100;Settings.throttling=!1;Settings.process=!1;Settings.tlen=Settings.tlen!==undefined?Settings.tlen:1000;Settings.pibox=Settings.pibox!==undefined?Settings.pibox:!1;Settings.csize=Settings.csize!==undefined?Settings.csize:100;Settings.defimage=Settings.
defimage!==undefined?Settings.defimage:Defaults.defimage;Settings.noimage=Settings.noimage!==undefined?Settings.noimage:Defaults.noimage;Settings.scale=Settings.scale!==undefined?Settings.scale:{r:'?',t:'/scale-to-width-down/350?'};Settings.dock=!!Settings.dock?Settings.dock:Defaults.dock;Settings.wholepage=$.getUrlVar('wholepage')||(Settings.wholepage!==undefined?Settings.wholepage:false);Settings.RegExp=Settings.RegExp||{};Settings.RegExp.iimages=Settings.RegExp.iimages||[];Settings.RegExp.ipages=Settings.RegExp.ipages||[];Settings.RegExp.ilinks=Settings.RegExp.ilinks||[];Settings.RegExp.iparents=Settings.RegExp.iparents||['[id^=flytabs] .tabs'];Settings.RegExp.iclasses=Settings.RegExp.iclasses||[];Settings.RegExp.onlyinclude=Settings.RegExp.onlyinclude||[];Settings.RegExp.wiki=Settings.RegExp.wiki||new RegExp('^.*?\/wiki\/','i');Settings.RegExp.dtag=Settings.RegExp.dtag||new RegExp('<.*>','gm');Settings.RegExp.prep=Settings.RegExp.prep||[];if(Settings.apid){Settings.tlen=(Settings.
tlen>500)?500:Settings.tlen;}Settings.fixContentHook=Settings.fixContentHook!==undefined?Settings.fixContentHook:!0;window.pPreview=Settings;var thisPage=(createUri(location)||{}).truepath;if(!thisPage||nignorePage(thisPage)){mw.hook('wikipage.content').remove(main);log('ignore',thisPage);return;}var sasses='';$.each(window.wgSassParams,function(k,v){sasses=sasses+'--sass-'+k+':'+v+';\n';});if(sasses.length){sasses=':root {\n'+sasses+'}';mw.util.addCSS(sasses);}log('sasses',{sasses:sasses});importArticle({type:'style',article:'u:dev:MediaWiki:LinkPreview.css'});log('rmain');if(Settings.debug){Settings.cache=ncache;}Settings.RegExp.ilinks.push(thisPage);Settings.RegExp.ilinks.push(new RegExp(apiUri.path));var r;if(Settings.RegExp.prep instanceof RegExp){r=Settings.RegExp.prep;Settings.RegExp.prep=[r];}if(!(Settings.RegExp.prep instanceof Array)){Settings.RegExp.prep=[];}Settings.RegExp.prep.push(/<script>[\s\S]*?<\/script>/igm);Settings.RegExp.prep.push(/<ref>[\s\S]*?<\/ref>/igm);
Settings.defimage=chkImageSrc(Settings.defimage)?Settings.defimage:Defaults.defimage;Settings.noimage=chkImageSrc(Settings.noimage)?Settings.noimage:Defaults.noimage;Settings.f.pp=pp;window.ajaxCallAgain=window.ajaxCallAgain||[];window.ajaxCallAgain.push(main);mw.hook('wikipage.content').add(main);mw.hook('ppreview.ready').fire(Settings);}function main($cont){log('main',$cont);if(Settings.fixContentHook&&$cont&&$cont.length){Settings.fixContentHook=!1;if($cont.selector!=='#mw-content-text'){log('main fixcontent',$cont);main($('#mw-content-text'));}}var $content,arr=[];Settings.dock.split(',').forEach(function(v){var $c={};if($cont){$c=($cont.is(v)||$cont.parents(v).length)?$cont:{};}else{$c=$(v);}$.merge(arr,$c);});$content=$(arr);log('main.c:',$content);$content.find('a').each(function(){var $el=$(this);if(elValidate($el)){$el.off('mouseenter.pp mouseleave.pp');$el.on('mouseenter.pp',aHover);$el.on('mouseleave.pp',nhidePreview);}});}function elValidate($el){var ahref=$el.attr(
'href'),bstop=!1;if(!ahref)return false;ahref=createUri(ahref);if(!ahref||(ahref.hostname!==apiUri.host)||nignoreLink(ahref.truepath)){return false;}if($.isArray(Settings.RegExp.iclasses)){Settings.RegExp.iclasses.forEach(function(v){if($el.hasClass(v)){log('elValidate classes',v,ahref.truepath);bstop=!0;}});}if(bstop)return false;if($.isArray(Settings.RegExp.iparents)){Settings.RegExp.iparents.forEach(function(v){if($el.parents(v).length){log('elValidate parents',v,ahref.truepath);bstop=!0;}});}if(bstop)return false;return true;}function chkImageSrc(src){if(!src)return false;var url;try{url=new mw.Uri(src);return(/(\.wikia\.(com|org)|\.fandom\.com|\.wikia\.nocookie\.net)$/.test(url.host));}catch(e){return false;}return false;}function preprocess(text){if(!(Settings.RegExp.prep instanceof Array)||Settings.RegExp.prep.length<1)return'';var s=text,$s=$('<div>').html(s);if(Settings.RegExp.onlyinclude&&(Settings.RegExp.onlyinclude instanceof Array)){s=Settings.RegExp.onlyinclude.map
(function(v){var $v=$s.find(v);if($v.length){$s.remove(v);return $v.map(function(){return this.outerHTML}).toArray().join();}else{return false;}}).filter(Boolean).join()||s;}Settings.RegExp.prep.forEach(function(v){s=s.replace(v,'');});return s;}function createUri(href,base){var h;try{h=new mw.Uri(href.toString());h.pathname=h.path;h.hostname=h.host;}catch(e){h=undefined;log('createUrl.e',e);}if(h){try{h.truepath=decodeURIComponent(h.pathname.replace(Settings.RegExp.wiki,''));h.interwiki=h.path.split('/wiki/')[0];h.islocal=window.wgArticlePath.split('/wiki/')[0]===h.interwiki;}catch(e){h=undefined;log('createuri decode.e',e,h,String(h));}}return h;}function escapeRegExp(str){return str.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");}function hlpaHover(){if(Settings.throttling){clearTimeout(Settings.throttling);Settings.throttling=!1;}}function aHover(ev){ev.stopPropagation();log('ahover ',Settings.throttling,currentEl.href);if(Settings.throttling||Settings.process){return false;}
Settings.throttling=setTimeout(hlpaHover,Settings.throttle);var hel=createUri($(ev.currentTarget).attr('href'))||{};if(hel&&hel.truepath&&currentEl.href==hel.truepath){return false;}currentEl.href=hel.truepath;currentEl.islocal=hel.islocal;currentEl.interwiki=hel.interwiki;if(nignoreLink(currentEl.href)){return true;}loc.left=ev.pageX;loc.top=ev.pageY;loc.clientX=ev.clientX;loc.clientY=ev.clientY;log('ahover ev:',ev,'cel:',currentEl);setTimeout(ngetPreview.bind(this,ev),Settings.delay);return false;}function getObj(data,key){var ret=[],r;for(var k in data){if(data[k]instanceof Object){if(k===key){ret.push(data[k]);}r=getObj(data[k],key);if(r)ret=ret.concat(r);}}return ret;}function getVal(data,key){var ret=[],r;for(var k in data){if(data[k]instanceof Object){r=getVal(data[k],key);if(r){ret=ret.concat(r);}}else{if(k===key){ret.push(data[k]);}}}return ret;}function hlpPreview(uri,div,img,force,withD){var im,d;im=$('img',div);if(!Settings.apid&&!withD){if(img){im.attr('src',Settings.scale
?img.replace(Settings.scale.r,Settings.scale.t):img);}else{im.attr('src',Settings.noimage);im.addClass('npage-preview-noimage');}}d={href:uri.truepath,data:div,uri:uri};ncache.push(d);if(Settings.debug)window.pPreview.pdiv=d.data;nshowPreview(d.data,d.uri,force);pp.stop(d.href);}function ngetPreview(ev,forcepath,withD){var nuri=createUri($(ev.currentTarget).attr('href'))||{};nuri.truepath=forcepath||nuri.truepath;if(!nuri||!nuri.truepath){log('gp no href',ev,forcepath);return;}if(!pp.start(nuri.truepath)){log('gp suppressed dbl processing for',nuri);return;}log('gp uri: ',nuri,' curel.href: ',currentEl.href,nuri.truepath===currentEl.href,'d:',withD);if(!forcepath&&!withD&&(nuri.truepath!=currentEl.href)){pp.stop(nuri.truepath);return;}var ndata=ncacheOf(nuri.truepath);log('gp x:',loc.left,'y:',loc.top);if(ndata){log('gp show preview',ndata);nshowPreview(ndata.data,nuri,forcepath?true:false);pp.stop(nuri.truepath);return false;}var apipage,iwrap=$('<img>',{src:Settings.defimage}),twrap=
$('<div/>'),div=$('<div/>',{class:'npage-preview'});if(Settings.apid||withD){apipage=new mw.Uri(nuri.interwiki+'/api/v1/Articles/Details');apipage.extend({titles:nuri.truepath,abstract:Math.min(Settings.tlen,500)});log('gp apid',apipage);$.getJSON(apipage).done(function(data){if(!data||data.error){log('gp apid.error',nuri,data);Settings.RegExp.ilinks.push(nuri.truepath);pp.stop(nuri.truepath);return this;}var item=data.items[Object.keys(data.items)[0]];if(!item){log('gp apid.noitem',nuri,data);Settings.RegExp.ilinks.push(nuri.truepath);pp.stop(nuri.truepath);return this;}iwrap.attr('src',item.thumbnail||Settings.noimage);iwrap.addClass(item.thumbnail?'':'npage-preview-noimage');twrap.text(item.abstract);div.append(iwrap).append(twrap);hlpPreview(nuri,div,item.thumbnail,forcepath?true:false,withD);return this;}).fail(function(data){log('gp apid.fail',nuri,data);Settings.RegExp.ilinks.push(nuri.truepath);pp.stop(nuri.truepath);return this;});return;}apipage=new mw.Uri({path:nuri.
interwiki+'/api.php'});apipage.extend({action:'parse',page:nuri.truepath,prop:'images|text',format:'json',disablepp:'',redirects:''});if(!Settings.wholepage)apipage.extend({section:0});log('gp apip: ',apipage.toString());$.getJSON(apipage).done(function(data){if(!data.parse){log('gp apip. no valid data in',data);Settings.RegExp.ilinks.push(nuri.truepath);pp.stop(nuri.truepath);return this;}var img=data.parse.images.map(function(value,index){if(nignoreImage(value)){return false;}else{return value;}}).filter(Boolean)[0];var text=data.parse.text['*'];log('gp apip img:',img,'text:',{text:text});if(!img&&!text){pp.stop(nuri.truepath);if(Settings.apid||withD){Settings.RegExp.ilinks.push(nuri.truepath);return this;}else{return ngetPreview(ev,null,true);}}text=preprocess(text);text=$('<div/>',{class:'tmpdivclass',style:'visibility:hidden;display:none;'}).html(text);if(!Settings.pibox){text.find('aside').prevAll().remove();text.find('aside').remove();}text=text.text();text=text?text.replace(
Settings.RegExp.dtag,''):'';text=text.trim().substr(0,Settings.tlen);if(Settings.debug){Settings.pptext=text;Settings.ppdata=data;log('gp img: ',img,' text: ',{text:text});}if(text.length>0){twrap.text(text);div.append(twrap);}div.prepend(iwrap);if(img){var im='file:'+img.trim();var apiimage=new mw.Uri({path:nuri.interwiki+'/api.php'});apiimage.extend({action:'query',redirects:'',titles:im,iiprop:'url',prop:'imageinfo',format:'json'});log('gp apii: ',apiimage.toString());$.getJSON(apiimage.toString()).done(function(data){log('gp apii done:',data);var im,d1;d1=data.query;if(d1.redirects){var imRed=getVal(getObj(d1,'redirects'),'to');log('gp img redir to',imRed);if(imRed.length>0){imRed=imRed[0];}else{iwrap.attr('src',Settings.noimage);log('gp img redir.to not found in',d1);return this;}var apiim=apiimage.clone().extend({titles:imRed});log('gp resolv redir:',apiim.toString());$.getJSON(apiim.toString(),function(data){var im=getVal(getObj(data,'pages'),'url');if(im.length>0){im=im[0];}
else{im=!1;}hlpPreview(nuri,div,im,forcepath?true:false);});}else{im=getVal(getObj(d1,'imageinfo'),'url');if(im.length>0){im=im[0];}else{im=!1;}hlpPreview(nuri,div,im,forcepath?true:false);}return this;}).fail(function(obj,stat,err){log('gp img api fail',obj,stat,err);hlpPreview(nuri,div,false,forcepath?true:false);return this;});}else{hlpPreview(nuri,div,false,forcepath?true:false);}}).fail(function(obj,stat,err){log('pg get page data fail',obj,stat,err);pp.stop(nuri.truepath);});return false;}function nshowPreview(data,target,force){log('sp',data,target,force);if(!force&&(currentEl.href!==target.truepath)){return false;}log('sp data:',data);$('.npage-preview').remove();$('body').append($(data));$(data).css({left:-10000,top:-10000});$(data).show(200,function(){if((loc.clientY+$(data).height())>$(window).height()){loc.top-=($(data).height()+loc.tops);}else{loc.top+=loc.tops;}if((loc.clientX+$(data).width())>$(window).width()){loc.left-=($(data).width()+loc.lefts);}else{loc.left+=
loc.lefts;}log('sp loc',loc);loc.left=loc.left>0?loc.left:0;loc.top=loc.top>0?loc.top:0;$(data).css({left:force?$('body').scrollLeft():loc.left,top:force?$('body').scrollTop():loc.top});mw.hook('ppreview.show').fire(data);});}function nhidePreview(data){currentEl.href='';$('.npage-preview').remove();hlpaHover();}function nignoreImage(name){for(var i=0,len=Settings.RegExp.iimages.length;i<len;i++){if(Settings.RegExp.iimages[i]instanceof RegExp){if(Settings.RegExp.iimages[i].test(name))return true;}else{if(name===Settings.RegExp.iimages[i])return true;}}return false;}function nignorePage(name){var a=Settings.RegExp.ipages;for(var i=0,len=a.length;i<len;i++){if(a[i]instanceof RegExp){if(a[i].test(name))return true;}else{if(name===a[i])return true;}}return false;}function nignoreLink(name){var a=Settings.RegExp.ilinks;for(var i=0,len=a.length;i<len;i++){if(a[i]instanceof RegExp){if(a[i].test(name))return true;}else{if(name===a[i])return true;}}return false;}function ncacheOf(href){if(
ncache.length>Settings.csize)ncache=[];for(var i=0,len=ncache.length;i<len;i++){if(ncache[i].href===href){log('cache found:',href,'data:',ncache[i].data);return ncache[i];}}return null;}})(jQuery);;require(['jquery','mw'],function($,mw){'use strict';window.LockForums=window.LockForums||{};var LockForums=$.extend({lockMessageWalls:!1,expiryDays:30,expiryMessage:'This thread hasn\'t been commented on for over <expiryDays> days. There is no need to reply.',warningDays:0,warningMessage:'This thread hasn\'t been commented on for over <warningDays> days. Please reply ONLY if a response is really needed.',disableOn:[],banners:!1,expiryBannerMessage:'<span style="color: maroon; font-weight: bold;">Note:</span> This topic has been unedited for <actualDays> days. It is considered <b>archived</b> - the discussion is over. If you feel this thread needs additional information, contact an administrator.',warningBannerMessage:
'<span style="color: maroon; font-weight: bold;">Note:</span> This topic has been unedited for <actualDays> days. It is considered <b>archived</b> - the discussion is over. Do not add to it unless it really <i>needs</i> a response.',warningPopup:!1,warningPopupMessage:'This thread has not had a response for over <actualDays> days; are you sure you want to reply?',},window.LockForums);['expiryBannerStyle','warningBannerStyle'].forEach(function(propName){var prop=LockForums[propName];if(prop!=='stylesheet'&&!$.isPlainObject(prop)){LockForums[propName]={};}});var config=mw.config.get(['wgNamespaceNumber','wikiaPageType','wgTitle','wgNow']);var namespaceWhitelist=[1201];if(LockForums.lockMessageWalls){namespaceWhitelist.push(1200);}if(namespaceWhitelist.indexOf(config.wgNamespaceNumber)===-1||(config.wikiaPageType!=='forum'&&!LockForums.lockMessageWalls)||LockForums.disableOn.indexOf(config.wgTitle)!==-1){return;}function daysToMilliseconds(days){return days*24*60*60*1000;}function
millisecondsToDays(milliseconds){return milliseconds/1000/60/60/24;}var expiryDaysPattern=/<expiryDays>/g;var actualDaysPattern=/<actualDays>/g;var warningDaysPattern=/<warningDays>/g;$('#Wall > .comments > .SpeechBubble').each(function(){var $thread=$(this);var then=$thread.find('.permalink').last().text().split(/,(.+)/);if(then.length===1){then=then[0];}else{then=then[1];}var currentDate=config.wgNow;var oldDate=new Date(then.trim());var diffMilliseconds=currentDate.getTime()-oldDate.getTime();var diffDays=Math.floor(millisecondsToDays(diffMilliseconds));var expiryMilliseconds=daysToMilliseconds(LockForums.expiryDays);var warningMilliseconds=daysToMilliseconds(LockForums.warningDays);var isExpired=diffMilliseconds>expiryMilliseconds;var shouldWarn=!isExpired&&warningMilliseconds>0&&diffMilliseconds>warningMilliseconds;var expiryMessage=LockForums.expiryMessage.replace(expiryDaysPattern,LockForums.expiryDays).replace(actualDaysPattern,diffDays);var warningMessage=LockForums.
warningMessage.replace(warningDaysPattern,LockForums.warningDays).replace(actualDaysPattern,diffDays).replace(expiryDaysPattern,LockForums.expiryDays);var warningPopupMessage=LockForums.warningPopupMessage.replace(warningDaysPattern,LockForums.warningDays).replace(actualDaysPattern,diffDays);var expiryBannerMessage=LockForums.expiryBannerMessage.replace(expiryDaysPattern,LockForums.expiryDays).replace(actualDaysPattern,diffDays);var warningBannerMessage=LockForums.warningBannerMessage.replace(warningDaysPattern,LockForums.warningDays).replace(actualDaysPattern,diffDays);var $replyBody=$thread.find('textarea.replyBody');if(isExpired){$thread.find('.buttons > .quote-button').remove();$replyBody.attr({placeholder:expiryMessage,disabled:'disabled'});}else if(shouldWarn){$replyBody.attr('placeholder',warningMessage);if(LockForums.warningPopup){$thread.find('.replyButton').on('click',function(event){if(!confirm(warningPopupMessage)){event.stopPropagation();}});}}if((isExpired||shouldWarn)&&
LockForums.banners){var message=isExpired?expiryBannerMessage:warningBannerMessage;var styles=isExpired?LockForums.expiryBannerStyle:LockForums.warningBannerStyle;var $banner=$('<div>',{id:'forum-warning-banner',class:'warning-banner-'+(isExpired?'expired':'warning'),html:message});if(styles!=='stylesheet'){$banner.css({'background-color':'whitesmoke','border':'2px solid #f66','color':'black','margin':'0.8em 0px','padding':'0.5em 12px'});$banner.css(styles);}$thread.before($banner);}});});;importArticle({type:'script',article:'u:dev:MediaWiki:LockOldBlogs.js'});;function editRef(ref){refID=/cite_note-(?:\D+)?(\d+)/.exec(ref)[1];$.showCustomModal('Edit Reference','<textarea id="edit-reference-content" style="width:100%; height:100px;"></textarea>',{id:'edit-reference-form',callback:function(){$.getJSON('/api.php?action=query&prop=revisions&pageids='+wgArticleId+'&indexpageids&rvprop=content|timestamp&format=json',function(data){starttimestamp=(new Date()).toISOString();rev=data.query.
pages[data.query.pageids[0]].revisions[0];pageContent=rev['*'];pattern=/(<ref(?: name="(.*)")?>)(.*)<\/ref>/g;refs=pageContent.match(pattern);match=pattern.exec(refs[refID]);if(match.length>=4&&typeof match[3]!='undefined'&&match[3].length){refOrigContent=match[3];$('#edit-reference-content').val(refOrigContent);}});},buttons:[{message:'Cancel',handler:function(){$('#edit-reference-form').closeModal();},defaultButton:!1,id:'edit-bio-cancel'},{message:'Save',handler:function(){refNewContent=$('#edit-reference-form #edit-reference-content').val();saveRef(pageContent.replace(match[0],match[2]+refNewContent+'</ref>'));},defaultButton:!0,id:'edit-bio-save'}]});}function saveRef(content){$.post('/api.php?action=edit',{title:wgPageName,summary:'edit ref '+refID+'; Replace "'+refOrigContent+'" with "'+refNewContent+'"',text:content,basetimestamp:rev.timestamp,starttimestamp:starttimestamp,tags:'apiedit',token:mw.user.tokens.get('editToken'),format:'json'},function(res){if(res.edit.result==
'Success'&&!res.edit.hasOwnProperty('nochange')){$('#edit-reference-form .modalToolbar').prepend($('<a />',{class:'wikia-button secondary',id:'edit-reference-rev',href:wgServer+wgArticlePath.replace('$1',res.edit.title)+'?diff='+res.edit.newrevid+'&oldid='+res.edit.oldrevid,target:'_blank'}).text('Check changes'));$.get('/api.php?action=parse&text='+refNewContent+'&contentmodel=wikitext&format=json',function(res){refParsedContent=$.parseHTML(res.parse.text['*']).find('p').html();$('#edit-reference-form #edit-bio-cancel').replaceWith($('<a />',{class:'wikia-button secondary',id:'edit-reference-ok'}).text('OK').click(function(){$('#edit-reference-form').closeModal();$('ol.references li#cite_note-'+refID+' .reference-text').html(refParsedContent);}));});}},'json');}function deleteRef(ref){refID=/cite_note-(\d+)/.exec(ref)[1];$.getJSON('/api.php?action=query&prop=revisions&pageids='+wgArticleId+'&indexpageids&rvprop=content|timestamp&format=json',function(data){starttimestamp=(new Date()).
toISOString();rev=data.query.pages[data.query.pageids[0]].revisions[0];pageContent=rev['*'];pattern=/((<ref(?: name="(.*)")?>)(.*)<\/ref>|<ref(?: name="(.*)")?(?: )?\/>)/g;refs=pageContent.match(pattern);match=pattern.exec(refs[refID]);if(match.length>=5&&typeof match[4]!='undefined'&&match[4].length){refOrigContent=match[4];saveRef(pageContent.replace(match[0],''));}});}if(!window.hasOwnProperty('dev')||!window.dev.hasOwnProperty('manageReferencesInitialized')||!window.dev.manageReferencesInitialized){if(!window.hasOwnProperty('dev')){window.dev={};}window.dev.manageReferencesInitialized=!0;$('ol.references > li').each(function(){$(this).append($('<span />',{class:'reference-buttons'}).append($('<span />').html(
'<svg id="wds-icons-pencil" viewBox="0 0 24 24" width="15px" height="15px"><path d="M1.293 16.293A1 1 0 0 0 1 17v5a1 1 0 0 0 1 1h5c.265 0 .52-.105.707-.293L19 11.414 12.586 5 1.293 16.293zm21.414-10l-5-5a.999.999 0 0 0-1.414 0L14 3.586 20.414 10l2.293-2.293a.999.999 0 0 0 0-1.414z" fill-rule="evenodd"></path></svg>').click(editRef.bind(this,$(this).attr('id'))),$('<span />').html(
'<svg id="wds-icons-trash" viewBox="0 0 24 24" width="15px" height="15px"> <g fill-rule="evenodd"><path d="M18.417 21.167H5.583V6.5h12.834v14.667zM9.25 2.833h5.5v1.834h-5.5V2.833zm12.833 1.834h-5.5v-2.75A.916.916 0 0 0 15.667 1H8.333a.917.917 0 0 0-.916.917v2.75h-5.5a.917.917 0 0 0 0 1.833H3.75v15.583c0 .507.41.917.917.917h14.666c.507 0 .917-.41.917-.917V6.5h1.833a.916.916 0 1 0 0-1.833z"></path><path d="M12 9.25a.917.917 0 0 0-.917.917V17.5a.916.916 0 1 0 1.834 0v-7.333A.917.917 0 0 0 12 9.25m-3.667 0a.917.917 0 0 0-.916.917V17.5a.916.916 0 1 0 1.833 0v-7.333a.917.917 0 0 0-.917-.917m6.417.917V17.5a.916.916 0 1 0 1.833 0v-7.333a.916.916 0 1 0-1.833 0"></path></g></svg>').click(deleteRef.bind(this,$(this).attr('id')))));});};;(function($,mw){var mwConfig=mw.config.get(['wgAction','wgArticlePath','wgDBname','wgNamespaceIds','wgNamespaceNumber','wgScript','wgServer','wgUserLanguage']);var mbTooltip=window.mbTooltip;var userNS=[];for(var ns in mwConfig.wgNamespaceIds){if(mwConfig.
wgNamespaceIds[ns]===2||mwConfig.wgNamespaceIds[ns]===3||mwConfig.wgNamespaceIds[ns]===1200){userNS.push(ns.replace(/_/g,' ')+':');}}var articleRX=new RegExp('^(?:'+mwConfig.wgServer+')?'+mwConfig.wgArticlePath.replace('$1','')+'([^?#]+)');var scriptRX=new RegExp('^(?:'+mwConfig.wgServer+')?'+mwConfig.wgScript+'\\?title=([^#&]+)');var currentNS=mwConfig.wgNamespaceNumber;var userTitleRX,waitingCSS;function init(specialContribs){userTitleRX=new RegExp('^'+'('+userNS.join('|')+'|'+specialContribs+'\\/|Special:Contributions\\/'+')'+'([^\\/#]+)$','i');mw.util.addCSS('.mediawiki .user-blocked-temp {'+(window.mbTempStyle||'opacity: 0.7; text-decoration: line-through')+'}'+'.mediawiki .user-blocked-indef {'+(window.mbIndefStyle||'opacity: 0.4; font-style: italic; text-decoration: line-through')+'}'+'.mediawiki .user-blocked-tipbox {'+(window.mbTipBoxStyle||'font-size:85%; background:#FFFFF0; border:1px solid #FEA; padding:0 0.3em; color:#AAA')+'}');waitingCSS=mw.util.addCSS(
'a.userlink {opacity:'+(window.mbLoadingOpacity||0.85)+'}');waitingCSS.disabled=!0;if(window.mbNoAutoStart){$(function(){var portletLink=mw.util.addPortletLink('p-tb, .mytools','#','Mark blocked users','ca-showblocks');$(portletLink).click(function(event){event.preventDefault();markBlocked();});});}else{markBlocked();mw.hook('wikipage.content').add(markBlocked);}window.ajaxCallAgain=window.ajaxCallAgain||[];window.ajaxCallAgain.push(markBlocked);}function initSpecialContribsString(){var promise=$.Deferred();var storageKey='MarkBlocked-specialcontribs_'+mwConfig.wgDBname;var specialContribs;try{specialContribs=localStorage.getItem(storageKey);}catch(ignore){}if(specialContribs){return promise.resolve(specialContribs);}$.getJSON(mw.util.wikiScript('api'),{action:'parse',format:'json',prop:'text',text:'<span class="contribs">[[Special:Contributions]]</span>',disablepp:''}).done(function(data){var $parsed=$(data.parse.text['*']);var specialContribs=$parsed.find('.contribs > a').attr(
'title');promise.resolve(specialContribs);try{localStorage.setItem(storageKey,specialContribs);}catch(ignore){}});return promise;}function initTooltipMessage(){var promise=$.Deferred();if(mbTooltip){return promise.resolve();}if(!(window.dev&&dev.i18n&&dev.i18n.loadMessages)){mw.loader.load('https://dev.fandom.com/load.php?mode=articles&only=scripts&articles=MediaWiki:I18n-js/code.js');}mw.hook('dev.i18n').add(function(i18njs){i18njs.loadMessages('MarkBlocked').done(function(i18nData){mbTooltip=i18nData.msg('tooltip').plain();promise.resolve();});});return promise;}function parseTS(ts){var m=ts.replace(/\D/g,'').match(/(\d\d\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)/);return new Date(Date.UTC(m[1],m[2]-1,m[3],m[4],m[5],m[6]));}function inHours(ms){var mm=Math.floor(ms/60000);if(!mm){return Math.floor(ms/1000)+'s';}var hh=Math.floor(mm/60);mm=mm%60;var dd=Math.floor(hh/24);hh=hh%24;if(dd){return dd+(dd<10?'.'+zz(hh):'')+'d';}return hh+':'+zz(mm);}function zz(v){if(v<=9){v='0'+v;}return v;}
function markBlocked(container){var contentLinks=(container||mw.util.$content).find('a').not('.editsection > a, .mw-editsection > a').add('#ca-nstab-user a, li[data-id="profile"] > a');var userLinks={};var url,rlUrl,ma,pgTitle,user;contentLinks.each(function(i,lnk){url=$(lnk).attr('href');rlUrl=$(lnk).data('uncrawlableUrl');if(rlUrl){url=atob(rlUrl);}if(!url||url.charAt(0)!=='/'){return;}if($(lnk).hasClass('userlink')){return;}if(ma=articleRX.exec(url)){pgTitle=ma[1];}else if(ma=scriptRX.exec(url)){pgTitle=ma[1];}else{return;}pgTitle=decodeURIComponent(pgTitle).replace(/_/g,' ');user=userTitleRX.exec(pgTitle);if(!user){return;}user=user[2];$(lnk).addClass('userlink');if(!userLinks[user]){userLinks[user]=[];}userLinks[user].push(lnk);});var users=[];for(var u in userLinks){users.push(u);}if(users.length===0){return;}var serverTime,apiRequests=0;waitingCSS.disabled=!1;while(users.length>0){apiRequests++;$.post(mw.util.wikiScript('api')+'?format=json&action=query',{list:'blocks',
bklimit:100,bkusers:users.splice(0,50).join('|'),bkprop:'user|by|timestamp|expiry|reason'},markLinks);}return;function markLinks(resp,status,xhr){serverTime=new Date(xhr.getResponseHeader('Date'));var list,blk,tip,links,lnk;if(!resp||!(list=resp.query)||!(list=list.blocks)){return;}for(var i=0;i<list.length;i++){blk=list[i];if(/^in/.test(blk.expiry)){clss='user-blocked-indef';blTime=blk.expiry;}else{clss='user-blocked-temp';blTime=inHours(parseTS(blk.expiry)-parseTS(blk.timestamp));}tip=mbTooltip.replace('$1',blTime).replace('$2',blk.by).replace('$3',blk.reason).replace('$4',inHours(serverTime-parseTS(blk.timestamp)));links=userLinks[blk.user];for(var k=0;k<links.length;k++){lnk=$(links[k]).addClass(clss);if(window.mbTipBox){$('<span class=user-blocked-tipbox>#</span>').attr('title',tip).insertBefore(lnk);}else{lnk.attr('title',lnk.attr('title')+'; '+tip);}}}if(--apiRequests===0){waitingCSS.disabled=!0;$('#ca-showblocks').remove();}}}mw.loader.using('mediawiki.util').done(function(){
switch(mwConfig.wgAction){case'edit':case'submit':case'delete':break;case'view':if(currentNS%2===0&&currentNS!==4){break;}default:$.when(initSpecialContribsString(),initTooltipMessage()).done(init);}});}(jQuery,mediaWiki));;var config=window.MastheadRightsBadgeSettings||{};var iconSize=config.iconSize||'50px';var $user=mw.config.get('wgTitle').split('/');function GetMessages(msg){return new Promise(function(resolve,reject){new mw.Api().get({action:'query',meta:'allmessages',ammessages:msg.join("|"),}).done(function(d){if(d.error)reject(d);var r={};d.query.allmessages.forEach(function(e){r[e.name]=e["*"];});resolve(r);}).error(reject);})}GetMessages(["user-identity-box-group-sysop","user-identity-box-group-content-moderator","user-identity-box-group-threadmoderator","user-identity-box-group-chatmoderator","user-identity-box-group-staff","user-identity-box-group-helper","user-identity-box-group-vstf","user-identity-box-group-global-discussions-moderator",]).then(function(m){var title={
'sysop':m["user-identity-box-group-sysop"],'content-moderator':m["user-identity-box-group-content-moderator"],'threadmoderator':m["user-identity-box-group-threadmoderator"],'chatmoderator':m["user-identity-box-group-chatmoderator"],'staff':m["user-identity-box-group-staff"],'helper':m["user-identity-box-group-helper"],'vstf':m["user-identity-box-group-vstf"],'global-discussions-moderator':m["user-identity-box-group-global-discussions-moderator"]};groupPriority={'sysop':'10070','content-moderator':'10060','threadmoderator':'10050','chatmoderator':'10040','staff':'10030','helper':'10020','vstf':'10010','global-discussions-moderator':'10000',};var Api=new mw.Api();Api.get({action:'query',list:'users',usprop:'groups',ususers:$user=$user[1]?$user[1]:$user[0]}).then(function(data){var groups=(data.query.users[0]||{}).groups||[];g={'sysop':'admin','content-moderator':'content-moderator','threadmoderator':'discussion-moderator','chatmoderator':'discussion-moderator','staff':'staff','helper':
'helper','vstf':'vstf','global-discussions-moderator':'global-discussions-moderator',};groups.forEach(function(group){mw.hook('dev.wds').add(function(wds){if(!g[group])return;$('.UserProfileMasthead .masthead-avatar').prepend($('<div>',{'class':'mastrightsbadge '+'mastrightsbadge-'+group,'title':title[group],css:{height:iconSize,position:'absolute',left:'0',top:'0',width:iconSize,zIndex:groupPriority[group],}}).append($(dev.wds.badge(g[group]))));});});});});importArticle({type:'script',article:'u:dev:WDSIcons/code.js'},{type:'style',article:'u:dev:MediaWiki:MastheadRightsBadge.css'});;(function(){var conf=mw.config.get(['wgCanonicalSpecialPageName']);if(conf.wgCanonicalSpecialPageName!=='Block'||$('#mw-input-wpMessage').exists()){return;}var i18n,talkpage,config=$.extend({title:'Block',message:'You have been blocked for $2 because you have $1'},window.MessageBlock),token=mw.user.tokens.get('editToken');function init(i18nd){i18n=i18nd;$('tbody').append(
'<tr class="mw-htmlform-field-HTMLCheckField"><td class="mw-label"><label for="mw-input-wpMessage">&#160;</label></td><td class="mw-input"><input name="wpMessage" type="checkbox" value="1" id="mw-input-wpMessage" />&#160;<label for="mw-input-wpMessage">'+i18n.msg('button').escape()+'</label></td></tr>');if(config.autocheck){$('#mw-input-wpMessage').attr('checked',true);}$('.mw-htmlform-submit').click(click);}function click(e){if(!$('#mw-input-wpMessage').attr('checked')){return;}e.preventDefault();var duration=$('#mw-input-wpExpiry-other').css('display')==='none'?$('#mw-input-wpExpiry option:selected').text():$('#mw-input-wpExpiry-other').val(),blockmessage=prompt(i18n.msg('blockreason').plain(),$('#mw-input-wpReason option:selected').text()+($('#mw-input-wpReason-other').val()?': '+$('#mw-input-wpReason-other').val():'')),messages=config.message.replace('$1',blockmessage).replace('$2',duration);if(talkpage){$.post(mw.util.wikiScript('api'),{action:'edit',title:'User_talk:'+$(
'#mw-bi-target').val(),section:'new',sectiontitle:config.title,text:messages,token:token},callback);}else{$.post(mw.util.wikiScript('wikia'),{controller:'WallExternal',method:'postNewMessage',pagenamespace:1200,pagetitle:$('#mw-bi-target').val(),messagetitle:config.title,body:messages,format:'json',token:token},callback);}}function callback(d){alert(i18n.msg('success').plain());$('#mw-content-text > form').submit();}importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});$.nirvana.getJson('WikiFeaturesSpecial','index',function(d){talkpage=d.features.filter(function(t){return t.name==='wgEnableWallExt'&&t.enabled;}).length===0;mw.hook('dev.i18n').add(function(i18no){i18no.loadMessages('MessageBlock').done(init);});});})();;window.BackToTopModern=!0;importArticle({type:'script',article:'u:dev:MediaWiki:BackToTopButton/code.js'});;$(function(){var actions=mw.config.get("wgWikiaPageActions"),oldbtn=$(".UserProfileActionButton"),masthead=$(".masthead-info hgroup");
function getAction(id){return actions.filter(function(action){return action.id==="page:"+id})[0]}function renderSVGs(wds){wds.render(".UserProfileMasthead .wds-button-group")}if(mw.config.get("wgNamespaceNumber")==2&&oldbtn.length&&masthead.length){importArticle({type:"style",article:"u:dev:MediaWiki:ModernProfile/EditButton.css"})
oldbtn.remove();if(actions){var newbtn,drop,dropbtns=[];var a_edit=getAction("Edit")
if(a_edit){newbtn=$("<a>").attr({"class":"wds-button wds-is-secondary wds-is-squished","id":"ca-edit","href":a_edit.href}).append($("<span>").attr({"class":"dev-wds-icon","id":"dev-wds-icons-pencil-small"}),$("<span>").text(a_edit.caption))}["History","Move","Protect","Delete"].forEach(function(id){var a=getAction(id);if(a)dropbtns.push($("<li>").append($("<a>").attr("href",a.href).text(a.caption)))})
if(dropbtns.length){var dropcontent=$("<ul>").attr("class","wds-list wds-is-linked")
drop=$("<div>").attr("class","wds-dropdown").append($("<div>").attr("class","wds-button wds-is-secondary wds-is-squished wds-dropdown__toggle").append($("<span>").attr({"class":"dev-wds-icon","id":"dev-wds-icons-dropdown-tiny"})),$("<div>").attr("class","wds-dropdown__content wds-is-not-scrollable wds-is-right-aligned").append(dropcontent));dropbtns.forEach(function(e){dropcontent.append(e)})}masthead.prepend($("<div>").attr("class","wds-button-group").css({"float":"right"}).append(newbtn,drop))
if(!window.dev||!window.dev.wds){mw.hook("dev.wds").add(renderSVGs);importArticle({type:"script",articles:"u:dev:WDSIcons/code.js"})}else renderSVGs(window.dev.wds)}}});;require(['jquery','mw','wikia.window'],function($,mw,window){if(!$('.WikiaRail, .PhotoModule').length||window.NewImagesScript){return;}window.NewImagesScript=!0;importArticle({type:'style',article:'u:dev:MediaWiki:NewImages.css'});var f={amount:0,current:3,all:0,img:[],body:'',i18n:{en:{t:'New Images',i:'images on this wiki',u:'Upload new image',m:'See all images...'},ja:{t:'新しい画像',i:'wikiの画像',u:'画像をアップロード',m:'すべての画像を見る...'},be:{t:'Новыя выявы',i:'выяў на вікі',u:'Загрузіць',m:'Усе выявы...'},de:{t:'Neue Bilder',i:'Bilder in diesem Wiki',u:'Neues Bild hochladen',m:'Alle Bilder ansehen...'},el:{t:'Νέες Εικόνες',i:'εικόνες σε αυτό το βίκι',u:'Φόρτωση νέας εικόνας',m:
'Δείτε όλες τις εικόνες...'},es:{t:'Nuevas imágenes',i:'imágenes en la wiki',u:'Subir nueva imagen',m:'Ver todas las imágenes...'},fr:{t:'Nouvelles images',i:'Images sur le wiki',u:'Ajouter une nouvelle image',m:'Voir tous les images...'},it:{t:'Nuove immagini',i:'immagini su questa wiki',u:'Carica nuova',m:'Vedi tutte le immagini...'},pl:{t:'Nowe grafiki',i:'Grafiki na tej wiki',u:'Prześlij plik',m:'Zobacz wszystkie…'},'pt-br':{t:'Novas imagens',i:'imagens nesta wiki',u:'Carregar uma nova imagem',m:'Ver todas as imagens...'},ru:{t:'Новые изображения',i:'изображений на вики',u:'Загрузить',m:'Все изображения...'},tr:{t:'Yeni Resimler',i:'bu wikide resimler',u:'Yeni resim yükle',m:'Tüm resimleri göster...'},uk:{t:'Нові зображення',i:'зображень на вікі',u:'Завантажити',m:'Всі зображення...'},zh:{t:'新图片',i:'本维基的图片',u:'上传新图片',m:
'查看所有图片...'},'zh-hant':{t:'新圖片',i:'本維基的圖片',u:'上傳新圖片',m:'查看所有圖片...'}}},mwConfig=mw.config.get(['wgUserLanguage','wgScriptPath','wgArticlePath']),lng=mwConfig.wgUserLanguage;f.lng=(typeof f.i18n[lng]==='undefined')?f.i18n.en:f.i18n[lng];f.getList=function(){$.get(mwConfig.wgScriptPath+'/api.php',{action:'query',list:'logevents',letype:'upload',leaction:'upload/upload',meta:'siteinfo',siprop:'statistics',format:'json'},function(d){if(!d||d.error)return;var r=d.query.logevents,a=[];f.amount=d.query.statistics.images;if(r.length===0){f.whenReady(false);return;}for(var i=0;i<10&&i<r.length;i++){var id=r[i].pageid;if(typeof(id)==='undefined')break;if(id===0)continue;a.push(id);}f.getThumbnails(a);});};f.getThumbnails=function(arr){$.get(mwConfig.wgScriptPath+'/api/v1/Articles/Details/',{ids:arr.join(','),abstract:0,width:50,height:50},function(d){Object.keys(d.items).reverse().forEach(function(k){var v=d.items[k];if(
/window-(width|height)\/[1-3]\//.test(v.thumbnail))return true;f.img.push([v.thumbnail,v.url]);});f.whenReady(true);});};f.whenReady=function(t){if($('.PhotoModule').length){f.createBody(t,'.PhotoModule','append');return;}var i=setInterval(function(){if(!$('#WikiaRail').hasClass('loaded'))return;clearInterval(i);setTimeout(function(){if($('#WikiaRail .activity-module').length){f.createBody(t,'#WikiaRail .activity-module','after');}else if($('#WikiaRail .rail-sticky-module').length){f.createBody(t,'#WikiaRail .rail-sticky-module','before');}else{f.createBody(t,'#WikiaRail','append');}},1000);},250);};f.createBody=function(t,s,r){f.all=f.img.length-1;f.body=$('<section class="rail-module photo-module">'+'<h2 class="has-icon">'+'<svg class="wds-icon wds-icon-small" viewBox="0 0 24 24" style="margin-right: 7px;">'+'<g fill-rule="evenodd">'+
'<path d="M3 4h18v8.737l-3.83-3.191a.916.916 0 0 0-1.282.108l-4.924 5.744-3.891-3.114a.92.92 0 0 0-1.146 0L3 14.626V4zm19-2H2a1 1 0 0 0-1 1v18a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z"></path>'+'<path d="M9 10c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"></path>'+'</g>'+'</svg>'+f.lng.t+'</h2>'+'<div class="photo-stats">'+'<div class="tally">'+'<em>'+f.amount+'</em>'+'<span>'+f.lng.i+'</span>'+'</div>'+'<a href="'+mwConfig.wgArticlePath.replace('$1','Special:Upload')+'" class="wds-is-secondary wds-button wds-is-squished">'+f.lng.u+'</a>'+'</div>'+'<a href="'+mwConfig.wgArticlePath.replace('$1','Special:Images')+'" style="float: right;">'+f.lng.m+'</a>'+'</section>');(r==='after')?f.body.insertAfter(s):f.body.appendTo(s);if(!t)return;$('<div class="pm-carousel-container">'+'<div class="pm-carousel-control pm-carousel-left wds-is-disabled wds-is-secondary wds-button wds-is-squished"><</div>'+'<ul class="pm-carousel" />'+
'<div class="pm-carousel-control pm-carousel-right wds-is-secondary wds-button wds-is-squished">></div>'+'</div>').insertAfter('.photo-stats');if(f.all<5)$('.pm-carousel-right').toggleClass('wds-is-disabled');$.each(f.img,function(i,v){$('.photo-module .pm-carousel').append('<li class="pm-carousel-item pm-carousel-item-'+i+'">'+'<a href="'+v[1]+'">'+'<img src="'+v[0]+'" width="50" height="50" />'+'</a>'+'</li>');});$('.pm-carousel-control').click(function(){if($(this).hasClass('wds-is-disabled'))return;var c=f.current,to_hide,to_show;if($(this).hasClass('pm-carousel-left')){to_hide=c;to_show=c-4;c--;if(c===3)$(this).addClass('wds-is-disabled');if(c!==f.all)$('.pm-carousel-right').removeClass('wds-is-disabled');}else{to_hide=c-3;to_show=c+1;c++;if(c===f.all)$(this).addClass('wds-is-disabled');if(c!==3)$('.pm-carousel-left').removeClass('wds-is-disabled');}$('.pm-carousel-item-'+to_hide).css('display','none');$('.pm-carousel-item-'+to_show).css('display','inline');f.current=c;});};$(f.
getList);});;require(["jquery","mw","wikia.window"],function(jQuery,mw,wk){"use strict";if(window.isPageCreatorLoaded||jQuery("#page-creator").exists()||wk.wgNamespaceNumber===-1||wk.wgArticleId===0||wk.wgAction==='edit'){return;}window.isPageCreatorLoaded=!0;if(!window.dev||!window.dev.i18n){wk.importArticle({type:"script",article:"u:dev:MediaWiki:I18n-js/code.js"});}var $i18n;var PageCreator={getData:function(callback){var that=this;this.api.get({action:"query",prop:"revisions",titles:wk.wgPageName,rvprop:"ids|timestamp|user|userid",rvlimit:"1",rvdir:"newer",format:"json"}).done(function($data){if(!$data.error){callback(that,$data);}});},handleData:function(that,$result){var $data=$result.query.pages[wk.wgArticleId].revisions[0];var $revisionURL=wk.wgPageName+"?oldid="+$data.revid;var $divElement=mw.html.element("div",{id:"page-creator"});var $userLink=jQuery("<div>").append(jQuery("<a>",{href:mw.util.getUrl("User:"+$data.user),text:$data.user})," ",jQuery("<span>",{"class":
"mw-usertoollinks"}).append("(",jQuery("<a>",{href:mw.util.getUrl("User talk:"+$data.user),text:$i18n.msg("talk").plain()})," | ",jQuery("<a>",{href:mw.util.getUrl("Special:Contributions/"+$data.user),text:$i18n.msg("contribs").plain()}),")"));if(jQuery("#lastEdited").exists()){jQuery($divElement).insertBefore("#lastEdited");}else if(wk.skin==="oasis"){jQuery($divElement).insertAfter("#PageHeader .page-header__title");}else{jQuery($divElement).insertBefore("#bodyContent");}if((window.pageCreatorAvatar||that.config.useAvatar)&&$data.userid!==0){$userLink.prepend(jQuery("<img>",{id:"pc-avatar",src:"https://services.fandom.com/user-avatar/user/"+$data.userid+"/avatar",width:15,height:15})," ");}if(window.pageCreatorTimestamp||that.config.useTimestamp){that.handleTimestamps($data,$revisionURL,$userLink.html());}else{jQuery("#page-creator").html($i18n.msg("main").escape().replace(/\$1/g,$userLink.html()));}jQuery("#page-creator img").error(function(){jQuery(this).attr("src",
"https://vignette.wikia.nocookie.net/messaging/images/1/19/Avatar.jpg/revision/latest");});mw.hook("PageCreator.render").fire(jQuery("#page-creator"));},handleTimestamps:function($data,$rev,$link){var $time;var $formattedCreationDate;var $creationDateLink;if(window.pageCreatorUTC||this.config.useUTC){$time=new Date($data.timestamp).toUTCString();$formattedCreationDate=$time.slice(0,3)+", "+$time.slice(4,16)+", "+$time.slice(17,25)+" ("+$time.slice(26)+")";}else{$time=new Date($data.timestamp).toString();$formattedCreationDate=$time.slice(0,3)+", "+$time.slice(4,15)+", "+$time.slice(16,24)+" "+$time.slice(34);}$creationDateLink=jQuery("<a>",{href:wk.wgArticlePath.replace('$1',$rev),html:this.config.useTimeago?jQuery.timeago($formattedCreationDate):$formattedCreationDate}).prop('outerHTML');var on;if(!this.config.useTimeago){on=$i18n.msg("on").escape().replace(/\$2/g,$creationDateLink);}else{on=$creationDateLink;}jQuery("#page-creator").html($i18n.msg("main").escape().replace(/\$1/g,
$link)+" "+on);},init:function($lang){$lang.useUserLang();$i18n=$lang;this.api=new mw.Api();this.config=jQuery.extend({namespaces:[0,4,8,10,14],useAvatar:!1,useTimestamp:!1,useUTC:!1,useTimeago:!1},window.pageCreatorConfig);mw.util.addCSS("#page-creator {"+"line-height: normal;"+"font-size: 12px;"+"font-weight: normal;"+"}");var $namespaces=window.pageCreatorNamespaces||this.config.namespaces;if($namespaces==='all'){$namespaces=Object.keys(wk.wgFormattedNamespaces).map(Number);}if(jQuery.inArray(wk.wgNamespaceNumber,$namespaces)!==-1){this.getData(this.handleData);}}};mw.hook("dev.i18n").add(function($i18n){jQuery.when($i18n.loadMessages("PageCreator"),mw.loader.using(["mediawiki.util","mediawiki.api"])).done(jQuery.proxy(PageCreator.init,PageCreator));});});;;(function(){function prependContent($el){$el.insertBefore('#WikiaArticle');}mw.hook('PageCreator.render').add(prependContent);mw.hook('LastEdited.inserted').add(prependContent);mw.util.addCSS(
'#page-creator,\
        .lastEdited {\
            position: relative;\
            bottom: 10px;\
        }');})();;(function($,mw){'use strict';if(!$('#WikiaUserPagesHeader').exists()||$('.profile-icons').exists()){return;}mw.hook('dev.wds').add(function(wds){$(".tabs li").each(function(){var _id=$(this).data('id'),_name;switch(_id){case'profile':_name='user';break;case'talk':case'wall':_name='note';break;case'blog':_name='quote';break;case'contribs':_name='pencil';break;case'following':_name='pages';break;case'user-activity':_name='activity';}$('a',this).prepend(wds.icon(_name,{'class':'profile-icons wds-icon-small'}));});});importArticle({type:'script',article:'u:dev:WDSIcons/code.js'});}(jQuery,mediaWiki));;(function($,mw){'use strict';var conf=mw.config.get(['debug','wgAction','wgCanonicalSpecialPageName','wgNamespaceNumber','wgTitle','wgUserName']),noHideTags=!!((window.dev||{}).profileTags||{}).noHideTags;function hideTags($masthead){var $tags=$masthead.find('.tag');$tags.hide
();}function getTagClass(tag){var tagClass='tag-'+tag.toLowerCase().replace(/\s/g,'_');return tagClass;}function getLinkTag($span,tag){var re=/\[\[(.+?)\|(.+?)\]\]/,match=re.exec(tag),href=mw.util.wikiGetlink(match[1]),text=match[2],$a=$('<a>').attr('href',href).css('color','inherit').text(text);$span.addClass(getTagClass(tag)).append($a);return $span;}function addProfileTags(tags){var $masthead=$('.UserProfileMasthead hgroup'),linkTestRe=/\[\[.+?\|.+?\]\]/;if(!noHideTags){hideTags($masthead);}tags.forEach(function(tag){var $span=$('<span>').addClass('tag');if(linkTestRe.test(tag)){$span=getLinkTag($span,tag);}else{$span.addClass(getTagClass(tag)).text(tag);}$masthead.append($span,' ');});mw.hook('dev.profile-tags').fire();}function getUserName(){var user=conf.wgTitle,target=$.getUrlVar('target'),parts;if(conf.wgCanonicalSpecialPageName==='Contributions'){parts=user.split('/');if(parts.length===2){user=parts[1];}else if(target){user=decodeURIComponent(target).replace(/_/g,' ');}else{
user=conf.wgUserName;if(user===null){user='';}}}return user;}function getUserTags(){var params={action:'raw',title:'MediaWiki:ProfileTags'};if(conf.debug){params.maxage=0;params.smaxage=0;}$.get(mw.util.wikiScript(),params,function(data){if(!data.length){return;}var user=$.escapeRE(getUserName()),re=new RegExp('(?:^|\\n)\\s*'+user+'\\s*\\|\\s*(.*?)\\s*(?:\\n|$)'),match=re.exec(data),tags;if(match===null){return;}tags=match[1].split(/\s*,\s*/);if(tags.length){addProfileTags(tags);}});}function init(){if($('.UserProfileMasthead').length){mw.loader.using(['mediawiki.util','site'],getUserTags);}}$(init);}(jQuery,mediaWiki));;var PowerPageMakerLangPacks={};$(function(){PowerPageMakerLangPacks.be={New_Page:"Новая_Старонка",NewPage:"НоваяСтаронка",CreateANewPage:"Стварыце новую старонку",main:"Асноўнае",blog:"Блог",category:"Катэгорыя:",MediaWiki:"MediaWiki:",Template:"Шаблон:",Forum:"Форум",PageTitle:"назва",
PageContent:"Змесціва старонкі:",Blank:"Пусты",Populated:"Населены",Create:"Стварыць",NeedName:"Патрабуецца імя",BlogURL:"Адмысловае:CreateBlogPage",forumDomain:"Тэма:",genericError:"Памылка"};PowerPageMakerLangPacks.en={New_Page:"New_Page",NewPage:"New Page",CreateANewPage:"Create A New Page",main:"Main",blog:"Blog",category:"Category:",MediaWiki:"MediaWiki:",Template:"Template:",Forum:"Forum",PageTitle:"Page Title",PageContent:"Page Content",Blank:"Blank",Populated:"Populated",Create:"Create",NeedName:"Please give the name of a page to create.",BlogURL:"Special:CreateBlogPage",forumDomain:"Topic:",genericError:"Error"};PowerPageMakerLangPacks.es={New_Page:"Nueva_página",NewPage:"Nueva página",CreateANewPage:"Crear una nueva página",main:"Principal",blog:"Blog",category:"Categoría:",MediaWiki:"MediaWiki:",Template:"Plantilla:",Forum:"Foro",PageTitle:"Título de la página",PageContent:
"Contenido de la página:",Blank:"Vacío",Populated:"Lleno",Create:"Crear",NeedName:"Por favor, indica el nombre de la página para crear.",BlogURL:"Especial:PublicarEnBlog",forumDomain:"Foro:",genericError:"Hay problema(s)."};PowerPageMakerLangPacks.fr={New_Page:"Nouvelle_page",NewPage:"Nouvelle page",CreateANewPage:"Créer une nouvelle page",main:"Principal",blog:"Blog",category:"Catégorie:",MediaWiki:"MediaWiki:",Template:"Modèle:",Forum:"Forum",PageTitle:"Titre de la page",PageContent:"Contenu de la page:",Blank:"Vide",Populated:"Complétée",Create:"Créer",NeedName:"Veuillez écrire le titre de la page à créer.",BlogURL:"Spécial:CreateBlogPage",forumDomain:"Sujet:",genericError:"ERREUR"};PowerPageMakerLangPacks.lt={New_Page:"Naujas_puslapis",NewPage:"Naujas puslapis",CreateANewPage:"Sukurti naują puslapį",main:"Pagrindinis",blog:"Blog\'as",category:"Kategorija:",MediaWiki:"MediaWiki:",Template:"Šablonas:",Forum:"Forum",PageTitle:"straipsnio antraštė",PageContent:
"Lapo turinys:",Blank:"Tusčias",Populated:"Populiarus",Create:"Sukurti",NeedName:"Prašome įrašyti puslapio pavadinimą prieš sukuriant jį",BlogURL:"Specialus:CreateBlogPage",forumDomain:"FAULT",genericError:"klaida"};PowerPageMakerLangPacks.pl={New_Page:"Nowa_Strona",NewPage:"Nowa Strona",CreateANewPage:"Utwórz nową stronę",main:"Główna",blog:"Blog",category:"Kategoria:",MediaWiki:"MediaWiki:",Template:"Szablon:",Forum:"Forum",PageTitle:"Tytuł strony",PageContent:"Zawartość strony:",Blank:"Pusta",Populated:"Popularna",Create:"Utwórz",NeedName:"Proszę podać nazwę strony do utworzenia.",BlogURL:"Specjalna:Utwórz_wpis_na_blogu",forumDomain:"Temat:",genericError:"BŁĄD"};PowerPageMakerLangPacks.ca={New_Page:"Nova_pàgina",NewPage:"Nova pàgina",CreateANewPage:"Crea una nova pàgina",main:"Principal",blog:"Blog",category:"Categoria:",MediaWiki:"MediaWiki:",Template:"Plantilla:",Forum:"Fòrum",PageTitle:"Títol de la pàgina",PageContent:"Contingut de la pàgina:",Blank:
"Buit",Populated:"Ple",Create:"Crea",NeedName:"Si us plau, indica el nom de la pàgina per crear.",BlogURL:"Especial:CreateBlogPage",forumDomain:"FAULT",genericError:"Hi ha problemes."};PowerPageMakerLangPacks.pt={New_Page:"Nova_página",NewPage:"Nova página",CreateANewPage:"Criar uma nova página",main:"Principal",blog:"Blogue",category:"Categoria:",MediaWiki:"MediaWiki:",Template:"Predefinição:",Forum:"Fórum",PageTitle:"Título da página",PageContent:"Conteúdo da página:",Blank:"Vazio",Populated:"Cheio",Create:"Criar",NeedName:"Faz favor, indica o nome da página para criar.",BlogURL:"Especial:CreateBlogPage",forumDomain:"FAULT",genericError:"Há problema(s)."};PowerPageMakerLangPacks.it={New_Page:"Nuovo_articolo",NewPage:"Nuovo articolo",CreateANewPage:"Crea una pagina",main:"Principale",blog:"Blog",category:"Categoria:",MediaWiki:"MediaWiki:",Template:"Template:",Forum:"Forum",PageTitle:"Titolo",PageContent:"Contenuto della pagina:",Blank:"Bianco",Populated:"Popolata",Create
:"Crea",NeedName:"È necessario un nome.",BlogURL:"Speciale:CreaNuovoPost",forumDomain:"Argomento:",genericError:"ERRORE"};PowerPageMakerLangPacks.nl={New_Page:"Pagina_toevoegen",NewPage:"Pagina&nbsp;toevoegen",CreateANewPage:"Maak een nieuwe pagina",main:"Primair",blog:"Blog",category:"Categorie:",MediaWiki:"MediaWiki:",Template:"Sjabloon:",Forum:"Forum",PageTitle:"Titel",PageContent:"Pagina Inhoud:",Blank:"Wit",Populated:"Bevolkte",Create:"Maken",NeedName:"Noodzaak van een naam.",BlogURL:"Speciaal:CreateBlogPage",forumDomain:"FAULT",genericError:"ERRORE"};PowerPageMakerLangPacks.ru={New_Page:"Новая_Страница",NewPage:"НоваяСтраница",CreateANewPage:"Создайте новую страницу",main:"Основное",blog:"Блог",category:"Категория:",MediaWiki:"MediaWiki:",Template:"Шаблон:",Forum:"Форум",PageTitle:"название",PageContent:"Содержимое страницы:",Blank:"Пустой",Populated:
"Населенный",Create:"Создать",NeedName:"Требуется имя",BlogURL:"Служебная:CreateBlogPage",forumDomain:"Тема:",genericError:"Ошибка"};PowerPageMakerLangPacks.tr={New_Page:"Yeni_Sayfa",NewPage:"Yeni Sayfa",CreateANewPage:"Yeni Sayfa Oluştur",main:"Ana",blog:"Blog",category:"Kategori:",MediaWiki:"MediaWiki:",Template:"Şablon:",Forum:"Forum",PageTitle:"Sayfa Başlığı",PageContent:"Sayfa İçeriği",Blank:"Boş",Populated:"Doldurulmuş",Create:"Oluştur",NeedName:"Lütfen oluşturulacak sayfanın adını verin.",BlogURL:"Özel:CreateBlogPage",forumDomain:"Konu:",genericError:"Hata"};PowerPageMakerLangPacks.uk={New_Page:"Нова_Сторінка",NewPage:"НоваСторінка",CreateANewPage:"Створіть нову сторінку",main:"Основне",blog:"Блог",category:"Категорія:",MediaWiki:"MediaWiki:",Template:"Шаблон:",Forum:"Форум",PageTitle:"назва",PageContent:"Вміст сторінки:",
Blank:"Порожній",Populated:"Населений",Create:"Створити",NeedName:"Потрібно ім'я",BlogURL:"Спеціальна:CreateBlogPage",forumDomain:"Тема:",genericError:"Помилка"};var lang=wgPageContentLanguage;switch(lang){case"en":case"be":case"es":case"fr":case"pt":case"nl":case"it":case"ca":case"pl":case"ru":case"uk":case"lt":break;default:lang="en";}var langpacks=PowerPageMakerLangPacks;$(function(){if(((typeof localStorage==='object')&&localStorage.optoutPowerPageMaker)||$.cookie('optoutPowerPageMaker')){return;}var url=mw.util.getUrl(langpacks[lang].New_Page);$('.createpage').click(function(){setTimeout(function(){window.location.replace(url);},314);});$('#p-search, #quickbar').append($('<a>',{href:url}).append($('<button>',{id:'newpagebutton',css:{height:'2em',width:'10em','font-weight':700},text:langpacks[lang].NewPage})));});if(mw.config.get("wgPageName")==langpacks[lang].New_Page){var html=
'<span id="form0"><fieldset style="padding: 15px; width: 94%; font-size:120%; border: solid 1px #FFFFFF;"> <h3 style="padding:5px; font-size:120%; font-weight:700;" id="pageTitle">'+langpacks[lang].CreateANewPage+'</h3> <span name="option" style="border: 3px solid #FF00FF; padding: 5px;"><input type="radio" name="namespace" value="main" checked="checked">'+langpacks[lang].main+'</input></span> <span name="option" style="border: 3px solid #FFFF00; padding: 5px;"><input type="radio" name="namespace" value="blog">'+langpacks[lang].blog+'</input></span> <span name="option" style="border: 3px solid #FF8800; padding: 5px;"><input type="radio" name="namespace" value="category">'+langpacks[lang].category+'</input></span> <span name="option" style="border: 3px solid #00FFFF; padding: 5px;"><input type="radio" name="namespace" value="mediawiki">'+langpacks[lang].MediaWiki+
'</input></span> <span name="option" style="border: 3px solid #00FF00; padding: 5px;"><input type="radio" name="namespace" value="template">'+langpacks[lang].Template+'</input></span> <span name="option" style="border: 3px solid #1111FF; padding: 5px;"><input type="radio" name="namespace" value="forum">'+langpacks[lang].Forum+'</input></span> <br/><br/><input type="text" id="NewPageTitle" placeholder="'+langpacks[lang].PageTitle+'" style="height:2.5em; width:99%;" x-webkit-speech="x-webkit-speech" /><br/><br/><span>'+langpacks[lang].PageContent+': </span><span name="option" style="border: 3px solid #FF0000; padding: 5px;"><input type="radio" name="pagecontent" value="blank" checked="checked">'+langpacks[lang].Blank+'</input></span> <span name="option" style="border: 3px solid #FF2288; padding: 5px;"><input type="radio" name="pagecontent" value="populated">'+langpacks[lang].Populated+
'</input></span> <button id="createpage" type="button" style="float: right; height:2.5em; width:10em; font-weight:700;" type="button" onclick="PowerPageMakerMakeNewPage();">'+langpacks[lang].Create+'</button></fieldset></span>';$("#WikiaArticle").ready(function(){$("#WikiaArticle").html(html);});$("#bodyContent").ready(function(){$("#bodyContent").html(html);});$("#article").ready(function(){$("#article").html(html);});}});function PowerPageMakerMakeNewPage(){var lang=wgPageContentLanguage;var langpacks=PowerPageMakerLangPacks;var namespace,pagetosend=document.getElementById("NewPageTitle").value||"NULL",content;if(pagetosend==="NULL"){alert(langpacks[lang].NeedName);return;}var radioname=document.getElementsByName("namespace"),radiocont=document.getElementsByName("pagecontent");for(var i=0;i<radioname.length;i++){if(radioname[i].checked){namespace=radioname[i].value;break;}}for(i=0;i<radiocont.length;i++){if(radiocont[i].checked){content=radiocont[i].value;break;}}var wgServer=mw.
config.get("wgServer")+mw.config.get("wgScriptPath")+'/wiki/';var link;switch(namespace){case"main":link=wgServer+pagetosend+'?action=edit';break;case"blog":link=wgServer+langpacks[lang].BlogURL;if(langpacks[lang].BlogURL==="FAULT"){alert(langpacks[lang].genericError);return;}break;case"category":link=wgServer+langpacks[lang].category+pagetosend+'?action=edit';break;case"mediawiki":link=wgServer+langpacks[lang].MediaWiki+pagetosend+'?action=edit';break;case"template":link=wgServer+langpacks[lang].Template+pagetosend+'?action=edit';break;case"forum":link=wgServer+langpacks[lang].forumDomain+pagetosend+'?openEditor=1';if(langpacks[lang].forumDomain==="FAULT"){alert(langpacks[lang].genericError);return;}break;default:alert(langpacks[lang].genericError);return;}if((content==='populated')&&(namespace!=='forum')&&(namespace!=='mediawiki')&&(namespace!=='blog')){link+="&useFormat=1";}window.location=link;};(function($,mw){'use strict';var config=mw.config.get(['wgPageName','wgNamespaceNumber'
]);if([-1,8,500,501,502,1200,1201,2000,2001].indexOf(config.wgNamespaceNumber)!==-1||window.ProtectionIconsLoaded){return;}window.ProtectionIconsLoaded=!0;var Main={wdsIsLoaded:$.Deferred(),i18nIsLoaded:$.Deferred(),getJSON:function(){var that=this;$.getJSON(mw.util.wikiScript('api'),{format:'json',action:'query',prop:'info',inprop:'protection',titles:config.wgPageName},function(d){if(!d.error){that.handleJSON(d);}});},handleJSON:function(results){var data,protection,protections,createSysop,createAutoconfirmed,editSysop,editAutoconfirmed,moveSysop,moveAutoconfirmed,uploadSysop,uploadAutoconfirmed;data=results.query.pages;createSysop=createAutoconfirmed=editSysop=editAutoconfirmed=moveSysop=moveAutoconfirmed=uploadSysop=uploadAutoconfirmed=!1;protections=data[Object.keys(data)[0]].protection;for(var i=0;protections&&i<protections.length;i++){protection=protections[i];switch(protection.type){case('create'):if(protection.level==='sysop'){createSysop=!0;}else if(protection.level===
'autoconfirmed'){createAutoconfirmed=!0;}break;case('edit'):if(protection.level==='sysop'){editSysop=!0;}else if(protection.level==='autoconfirmed'){editAutoconfirmed=!0;}break;case('move'):if(protection.level==='sysop'){moveSysop=!0;}else if(protection.level==='autoconfirmed'){moveAutoconfirmed=!0;}break;case('upload'):if(protection.level==='sysop'){uploadSysop=!0;}else if(protection.level==='autoconfirmed'){uploadAutoconfirmed=!0;}break;}}var $editElement=$($('.UserProfileActionButton').exists()?'.UserProfileActionButton':'.page-header__contribution-buttons'),$moveElement=$('#ca-move'),$replaceElement=$('#ca-replace-file');if(createSysop||createAutoconfirmed){$editElement.prepend(this.assembleSpanElement('create-protection',createSysop));}if(editSysop||editAutoconfirmed){$editElement.prepend(this.assembleSpanElement('edit-protection',editSysop));}if($moveElement.exists()&&(moveSysop||moveAutoconfirmed)){$moveElement.append(this.assembleSpanElement('move-protection',
moveSysop));}if($replaceElement.exists()&&(uploadSysop||uploadAutoconfirmed)){$replaceElement.append(this.assembleSpanElement('upload-protection',uploadSysop));}},assembleSpanElement:function(spanId,canSysopAct){var that,actionType;that=this;actionType=spanId.split('-')[0];return $('<span>',{'class':'protection-level','id':spanId,'title':that.i18n.msg((canSysopAct?actionType+'Sysop':actionType+'Autoconfirmed')).plain()}).append(this.wds.icon((canSysopAct?'lock-small':'unlock-small')));},i18nHandler:function(i18no){var that=this;i18no.loadMessages('ProtectionIcons').done(function(i18n){that.i18n=i18n;that.i18nIsLoaded.resolve();});},wdsHandler:function(wds){this.wds=wds;this.wdsIsLoaded.resolve();},init:function(){mw.hook('dev.i18n').add($.proxy(Main.i18nHandler,Main));mw.hook('dev.wds').add($.proxy(Main.wdsHandler,Main));$.when(this.i18nIsLoaded,this.wdsIsLoaded).done($.proxy(Main.getJSON,Main));importArticles({type:'style',articles:['u:dev:MediaWiki:ProtectionIcons.css']},{type:
'script',articles:['u:dev:MediaWiki:I18n-js/code.js','u:dev:MediaWiki:WDSIcons/code.js']});}};Main.init();}(jQuery,mediaWiki));;(function($,mw){"use strict";if(window.quickDiffLoaded){return;}window.quickDiffLoaded=!0;var diffStylesModule="mediawiki.action.history.diff";var i18n;var modal;var special={};function initSpecialPageStrings(){special.diffDefault=mw.util.getUrl("Special:Diff/");special.compareDefault=mw.util.getUrl("Special:ComparePages");var wiki=mw.config.get("wgDBname");var storageKeyDiff="QuickDiff-specialdiff_"+wiki;var storageKeyCompare="QuickDiff-specialcompare_"+wiki;try{special.diff=localStorage.getItem(storageKeyDiff);special.compare=localStorage.getItem(storageKeyCompare);}catch(ignore){}if(special.diff&&special.compare){return;}$.getJSON(mw.util.wikiScript("api"),{action:"parse",format:"json",prop:"text",text:"<span class='diff'>[[Special:Diff/]]</span><span class='compare'>[[Special:ComparePages]]</span>",disablepp:""}).done(function(data){var $parsed=$(data.
parse.text["*"]);special.diff=$parsed.find(".diff > a").attr("href");special.compare=$parsed.find(".compare > a").attr("href");try{localStorage.setItem(storageKeyDiff,special.diff);localStorage.setItem(storageKeyCompare,special.compare);}catch(ignore){}});}function getDiffTitle($diff){var prevTitle=$diff.find("#mw-diff-otitle1 a").attr("title");var currTitle=$diff.find("#mw-diff-ntitle1 a").attr("title");if(prevTitle&&prevTitle!==currTitle){return i18n("differences-multipage",prevTitle,currTitle).plain();}return i18n("differences",currTitle).plain();}function loadDiff(url){modal.show({loading:!0,title:!modal.visible&&i18n("loading").plain()});url.extend({action:"render",diffonly:"1"});if(mw.util.getParamValue("bot")){url.extend({bot:"1"});}$.when($.get(url.getRelativePath()),mw.loader.using(diffStylesModule)).always(function(response){delete url.query.action;delete url.query.diffonly;delete url.query.bot;var data={buttons:[{text:i18n("link").plain(),href:url.toString(),attr:{
"data-disable-quickdiff":""}}]};var $diff;if(typeof response[0]==="string"){var $content=$(response[0]);$diff=$content.filter("table.diff, #mw-rev-deleted-no-diff");if(!$diff.length){$diff=$content.find("table.diff");}}if($diff&&$diff.length){data.content=$diff;data.hook="quickdiff.ready";data.title=getDiffTitle($diff);}else{data.content=i18n("error",url.toString()).escape();}modal.show(data);});}function linkClickHandler(event){if(event.altKey||event.ctrlKey||event.metaKey||event.shiftKey){return;}if(event.currentTarget.dataset.disableQuickdiff!==undefined){return;}var url=event.currentTarget.href;try{url=new mw.Uri(url);}catch(ignore){return;}if(url.host!==location.hostname){return;}var hasDiffParam=url.query.diff!==undefined&&url.fragment===undefined;var isSpecialDiffLink=url.path.indexOf(special.diff)===0||url.path.indexOf(special.diffDefault)===0;var isSpecialCompareLink=url.path.indexOf(special.compare)===0||url.path.indexOf(special.compareDefault)===0;if(hasDiffParam||
isSpecialDiffLink||isSpecialCompareLink){event.preventDefault();loadDiff(url);}}function init(){modal=new mw.libs.QDmodal("quickdiff-modal");mw.util.addCSS("#quickdiff-modal { height: 100%; width: 100% }");if(mw.loader.getState("mediawiki.diff.styles")){diffStylesModule="mediawiki.diff.styles";}$(document.body).on("click.quickdiff","a[href]",linkClickHandler);initSpecialPageStrings();}function initDependencies(){var devLoadUrl="https://dev.fandom.com/load.php?mode=articles&only=scripts&articles=MediaWiki:";var i18nMsgs=new $.Deferred();var waitFor=[i18nMsgs,mw.loader.using(["mediawiki.Uri","mediawiki.util"])];if(!(mw.libs.QDmodal&&mw.libs.QDmodal.version>=20180212)){waitFor.push($.ajax({cache:!0,dataType:"script",url:devLoadUrl+"QDmodal.js&cb=20180212"}));}if(!(window.dev&&dev.i18n&&dev.i18n.loadMessages)){mw.loader.load(devLoadUrl+"I18n-js/code.js");}mw.hook("dev.i18n").add(function(i18njs){i18njs.loadMessages("QuickDiff").done(function(i18nData){i18n=i18nData.msg;i18nMsgs.resolve()
;});});$.when.apply($,waitFor).done(init);}initDependencies();mw.hook("quickdiff.ready").add(function(modal){var $buttons=modal.$content.find(".diff-ntitle").find(".mw-rev-head-action, .mw-diff-edit, .mw-diff-undo, .mw-rollback-link, .patrollink").clone();$buttons.contents().filter(function(ignore,element){return element.nodeType===3;}).remove();$buttons.find("a").addClass("qdmodal-button").attr("target","_blank");modal.$footer.append($buttons);});}(jQuery,mediaWiki));;require(['wikia.window','jquery','mw'],function(window,$,mw){'use strict';window.importArticle({type:"style",article:"u:dev:MediaWiki:RailWAM.css"});window.railWAM=window.railWAM||{};if(window.railWAM.load===false||typeof wgIsMainPage!=='undefined'||$('body').hasClass('editor')){return;}window.railWAM.load=!1;var botFlag=!1,dateCreated,dpStartDate='',dpEndDate='';const mwConfig=mw.config.get(['wgCityId','wgNamespaceNumber','wgPageName','wgSiteName','wgUserLanguage','wgUserName',]),anonFlag=typeof mwConfig.
wgUserName==='object'?true:!1,body=$('body'),charts={},curDate=new Date(),fandomTitle=' | '+mwConfig.wgSiteName+' | FANDOM powered by Wikia',wamDate=Math.floor(new Date().getTime()/1000/86400)*86400,railWAM=$.extend({appendAfter:['.content-review-module'],autoLogForUsers:[],botUsers:[],doubleCheckDelay:4,logPage:'User:'+mwConfig.wgUserName+'/WAM Log',loadOnPage:'__*__',loadOnNamespace:'__*__',lang:mwConfig.wgUserLanguage,showChange:!0,showLogAlert:!0,showToAnons:!0,top5000Mode:!0,},window.railWAM),timezone=curDate.toLocaleTimeString(railWAM.lang,{timeZoneName:'short'}).split(' ')[2],dropdownDef='<path id="railwam-dropdown-arrow" d="M 23.13,17.82 C 25.53,18.50 27.55,15.92 29.08,14.42 31.94,11.61 40.81,0.40 44.79,2.17 48.06,3.60 46.34,6.99 44.79,8.91 44.79,8.91 31.89,21.55 31.89,21.55 30.27,23.22 27.11,26.82 24.87,27.30 20.89,28.14 12.26,17.74 9.41,14.92 6.01,11.55 -1.75,6.81 3.19,2.17 10.81,1.46 17.11,16.11 23.13,17.82 Z" />',wamLogoDef=
'<path id="railwam-modal-logo" d="M 8.63,2.95 C 8.63,2.95 11.40,1.60 11.40,1.60 11.40,1.60 10.98,4.79 10.98,4.79 10.98,4.79 10.25,9.48 10.25,9.48 10.25,9.48 9.91,11.72 9.91,11.72 9.91,11.72 9.67,12.76 9.67,12.76 9.67,12.76 8.84,13.34 8.84,13.34 8.84,13.34 7.14,14.17 7.14,14.17 7.14,14.17 5.19,9.80 5.19,9.80 5.19,9.80 3.41,5.75 3.41,5.75 3.41,5.75 8.63,2.95 8.63,2.95 Z M 11.20,11.93 C 11.20,11.93 12.05,8.31 12.05,8.31 12.05,8.31 12.65,6.24 12.65,6.24 12.65,6.24 14.38,5.24 14.38,5.24 14.38,5.24 18.00,3.41 18.00,3.41 17.86,4.18 16.79,5.90 16.38,6.71 16.38,6.71 14.10,10.97 14.10,10.97 13.83,11.45 13.42,12.41 13.08,12.76 12.79,13.04 11.21,13.84 10.76,14.06 10.76,14.06 11.20,11.93 11.20,11.93 Z M 3.73,10.33 C 3.73,10.33 5.84,14.06 5.84,14.06 6.01,14.35 6.59,15.22 6.52,15.53 6.45,15.83 5.72,16.17 5.43,16.18 5.26,16.19 5.15,16.14 5.01,16.06 5.01,16.06 1.49,13.54 1.49,13.54 0.97,13.16 0.30,12.83 0.00,12.25 0.00,12.25 3.73,10.33 3.73,10.33 Z" />',alertIconDef=
'<path id="railwam-log-alert-icon" d="M 9.00,10.00 C 10.00,10.00 10.00,10.00 10.00,11.00 10.00,12.00 10.00,12.00 9.00,12.00 8.00,12.00 8.00,12.00 8.00,11.00 8.00,10.00 8.00,10.00 9.00,10.00 Z M 8.00,6.00 C 8.00,6.00 8.00,8.00 8.00,8.00 8.00,9.00 8.00,9.00 9.00,9.00 10.00,9.00 10.00,9.00 10.00,8.00 10.00,8.00 10.00,6.00 10.00,6.00 10.00,5.00 10.00,5.00 9.00,5.00 8.00,5.00 8.00,5.00 8.00,6.00 Z M 9.00,3.00 C 5.69,3.00 3.00,6.69 3.00,10.00 3.00,11.19 3.99,12.69 3.99,11.00 3.99,11.00 4.00,11.00 4.00,11.00 4.00,10.45 4.44,10.00 4.99,10.00 5.55,10.00 5.99,10.45 5.99,11.00 5.99,11.00 5.99,15.00 5.99,15.00 5.99,15.55 5.55,16.00 4.99,16.00 4.99,16.00 1.00,16.00 1.00,16.00 0.45,16.00 0.00,15.55 0.00,15.00 0.00,14.45 0.45,14.00 1.00,14.00 1.00,14.00 2.77,14.00 2.77,14.00 1.67,12.63 1.00,10.89 1.00,9.00 1.00,4.59 4.59,1.00 9.00,1.00 9.00,1.00 9.00,3.00 9.00,3.00 Z M 9.00,14.00 C 12.31,14.00 15.00,10.31 15.00,7.00 15.00,5.81 14.01,4.30 14.01,6.00 14.01,6.00 14.00,6.00 14.00,6.00 14.00,6.55 13.56,7.00 13.01,7.00 12.45,7.00 12.01,6.55 12.01,6.00 12.01,6.00 12.01,2.00 12.01,2.00 12.01,1.45 12.45,1.00 13.01,1.00 13.01,1.00 17.00,1.00 17.00,1.00 17.55,1.00 18.00,1.45 18.00,2.00 18.00,2.55 17.55,3.00 17.00,3.00 17.00,3.00 15.23,3.00 15.23,3.00 16.33,4.37 17.00,6.11 17.00,8.00 17.00,12.41 13.41,16.00 9.00,16.00 9.00,16.00 9.00,14.00 9.00,14.00 Z" />'
,logOldDef=
'<path id="railwam-log-old" d="M 66.00,197.00 C 66.00,197.00 41.00,172.00 41.00,172.00 38.87,169.87 32.54,162.97 30.00,162.34 26.89,161.56 23.97,165.07 22.00,167.00 22.00,167.00 6.02,183.00 6.02,183.00 3.79,185.35 1.24,187.50 2.58,191.00 3.54,193.52 8.02,197.99 10.00,200.00 10.00,200.00 27.00,217.00 27.00,217.00 27.00,217.00 55.96,246.00 55.96,246.00 55.96,246.00 66.00,257.00 66.00,257.00 66.00,257.00 86.00,276.00 86.00,276.00 94.68,269.79 106.53,256.12 114.09,248.00 114.09,248.00 148.00,214.00 148.00,214.00 148.00,214.00 163.96,198.00 163.96,198.00 165.65,196.23 169.31,192.40 169.75,190.00 170.51,185.85 160.92,177.92 158.00,175.00 155.32,172.32 146.38,162.20 143.00,162.20 140.04,162.20 135.09,167.91 133.00,170.00 133.00,170.00 109.00,194.00 109.00,194.00 109.00,194.00 121.31,161.00 121.31,161.00 133.72,133.96 153.30,108.71 176.00,89.59 200.83,68.69 224.82,55.48 256.00,46.58 267.67,43.25 280.84,40.02 293.00,40.00 293.00,40.00 335.00,40.00 335.00,40.00 358.72,40.28 397.66,54.62 418.00,66.80 447.89,84.70 471.73,106.79 490.92,136.00 501.43,151.99 508.65,168.94 514.67,187.00 518.71,199.13 522.98,215.24 523.00,228.00 523.00,228.00 523.00,272.00 523.00,272.00 522.96,298.95 505.96,340.39 491.56,363.00 473.35,391.62 447.99,415.21 419.00,432.60 397.07,445.76 358.70,459.96 333.00,460.00 333.00,460.00 291.00,460.00 291.00,460.00 280.99,459.88 265.76,456.21 256.00,453.42 227.15,445.19 204.47,433.30 181.00,414.55 170.11,405.86 163.39,399.53 154.28,389.00 142.96,375.92 145.46,375.02 135.00,375.00 135.00,375.00 94.00,375.00 94.00,375.00 96.16,381.82 102.24,389.97 106.34,396.00 119.03,414.63 136.44,432.73 154.00,446.80 180.76,468.25 213.64,485.49 247.00,493.87 258.20,496.69 270.43,499.98 282.00,500.00 282.00,500.00 314.00,500.00 314.00,500.00 314.00,500.00 344.00,500.00 344.00,500.00 354.41,499.98 364.94,497.39 375.00,494.87 399.33,488.79 422.46,479.24 444.00,466.40 494.60,436.23 533.37,387.85 552.00,332.00 556.72,317.85 562.98,295.75 563.00,281.00 563.00,281.00 563.00,217.00 563.00,217.00 562.81,200.67 553.05,169.50 546.80,154.00 518.14,82.92 457.73,28.46 384.00,7.43 372.48,4.14 355.83,0.02 344.00,0.00 344.00,0.00 282.00,0.00 282.00,0.00 262.25,0.03 229.34,10.81 211.00,18.72 137.42,50.46 81.83,118.30 66.00,197.00 Z M 293.00,125.00 C 293.00,125.00 293.00,258.00 293.00,258.00 293.01,261.43 292.67,265.04 295.31,267.69 297.55,269.92 300.07,269.94 303.00,270.00 303.00,270.00 327.00,270.00 327.00,270.00 327.00,270.00 438.00,270.00 438.00,270.00 438.00,270.00 438.00,230.00 438.00,230.00 438.00,230.00 333.00,230.00 333.00,230.00 333.00,230.00 333.00,125.00 333.00,125.00 333.00,125.00 293.00,125.00 293.00,125.00 Z" />'
,docsDef=
'<path id="railwam-docs" d="M 450.00,150.00 C 450.00,150.00 343.00,150.00 343.00,150.00 343.00,150.00 332.02,148.43 332.02,148.43 332.02,148.43 326.15,142.00 326.15,142.00 326.15,142.00 325.00,114.00 325.00,114.00 325.00,114.00 325.00,0.00 325.00,0.00 325.00,0.00 73.00,0.00 73.00,0.00 57.31,0.02 50.02,7.31 50.00,23.00 50.00,23.00 50.00,111.00 50.00,111.00 50.00,111.00 50.00,477.00 50.00,477.00 50.02,492.69 57.31,499.98 73.00,500.00 73.00,500.00 137.00,500.00 137.00,500.00 137.00,500.00 427.00,500.00 427.00,500.00 441.75,499.98 449.93,493.22 450.00,478.00 450.00,478.00 450.00,419.00 450.00,419.00 450.00,419.00 450.00,150.00 450.00,150.00 Z M 352.00,28.00 C 348.62,34.40 350.00,47.46 350.00,55.00 350.00,55.00 350.00,113.00 350.00,113.00 350.02,122.53 352.47,124.98 362.00,125.00 362.00,125.00 418.00,125.00 418.00,125.00 425.35,125.00 440.65,125.80 447.00,124.00 447.00,124.00 436.00,111.00 436.00,111.00 436.00,111.00 417.00,92.00 417.00,92.00 417.00,92.00 376.00,51.00 376.00,51.00 376.00,51.00 352.00,28.00 352.00,28.00 Z M 325.00,175.00 C 325.00,175.00 325.00,200.00 325.00,200.00 325.00,200.00 75.00,200.00 75.00,200.00 75.00,200.00 75.00,175.00 75.00,175.00 75.00,175.00 325.00,175.00 325.00,175.00 Z M 275.00,250.00 C 275.00,250.00 275.00,275.00 275.00,275.00 275.00,275.00 75.00,275.00 75.00,275.00 75.00,275.00 75.00,250.00 75.00,250.00 75.00,250.00 275.00,250.00 275.00,250.00 Z M 425.00,250.00 C 425.00,250.00 425.00,375.00 425.00,375.00 425.00,375.00 325.00,375.00 325.00,375.00 325.00,375.00 325.00,250.00 325.00,250.00 325.00,250.00 425.00,250.00 425.00,250.00 Z M 275.00,300.00 C 275.00,300.00 275.00,325.00 275.00,325.00 275.00,325.00 75.00,325.00 75.00,325.00 75.00,325.00 75.00,300.00 75.00,300.00 75.00,300.00 275.00,300.00 275.00,300.00 Z M 275.00,350.00 C 275.00,350.00 275.00,375.00 275.00,375.00 275.00,375.00 75.00,375.00 75.00,375.00 75.00,375.00 75.00,350.00 75.00,350.00 75.00,350.00 275.00,350.00 275.00,350.00 Z" />'
,faqDef=
'<path id="railwam-faq" d="M 211.00,0.14 C 125.44,14.43 53.34,67.75 18.72,148.00 10.81,166.34 0.03,199.25 0.00,219.00 0.00,219.00 0.00,281.00 0.00,281.00 0.02,292.83 4.14,309.48 7.43,321.00 28.46,394.73 82.92,455.14 154.00,483.80 169.50,490.05 200.67,499.81 217.00,500.00 217.00,500.00 281.00,500.00 281.00,500.00 292.04,499.98 303.33,497.04 314.00,494.37 344.32,486.79 373.63,472.78 399.00,454.57 441.22,424.27 472.93,380.19 489.33,331.00 493.95,317.16 499.98,295.42 500.00,281.00 500.00,281.00 500.00,219.00 500.00,219.00 499.98,205.33 494.38,184.13 490.00,171.00 478.02,135.06 459.24,102.47 432.96,75.00 403.86,44.57 368.80,23.26 329.00,10.00 315.87,5.62 294.67,0.02 281.00,0.14 281.00,0.14 247.00,0.14 247.00,0.14 247.00,0.14 211.00,0.14 211.00,0.14 Z M 367.00,74.00 C 362.52,80.26 350.05,91.95 344.00,98.00 341.70,100.30 335.82,106.79 333.00,107.59 329.56,108.57 318.69,102.00 315.00,100.31 304.10,95.32 286.95,90.02 275.00,90.00 275.00,90.00 225.00,90.00 225.00,90.00 216.56,90.01 210.07,91.94 202.00,94.15 193.04,96.60 186.25,99.63 178.00,103.75 175.29,105.11 169.95,108.43 167.00,107.59 164.18,106.79 158.30,100.30 156.00,98.00 149.95,91.95 137.48,80.26 133.00,74.00 133.00,74.00 148.00,65.31 148.00,65.31 162.00,57.72 176.81,51.75 192.00,47.02 215.72,39.65 226.98,40.00 251.00,40.00 270.74,40.00 280.24,39.53 300.00,44.73 317.35,49.30 336.24,56.76 352.00,65.31 352.00,65.31 367.00,74.00 367.00,74.00 Z M 229.00,130.14 C 229.00,130.14 264.00,130.14 264.00,130.14 288.34,130.04 318.73,146.72 335.72,163.42 351.82,179.26 369.73,210.93 370.00,234.00 370.00,234.00 370.00,264.00 370.00,264.00 369.99,273.55 368.31,279.06 365.33,288.00 356.30,315.11 338.76,338.79 314.00,353.55 300.22,361.76 280.17,369.97 264.00,370.00 264.00,370.00 234.00,370.00 234.00,370.00 222.84,369.87 206.98,364.22 197.00,359.25 166.61,344.09 145.81,321.41 135.00,289.00 131.89,279.67 130.02,274.00 130.00,264.00 130.00,264.00 130.00,236.00 130.00,236.00 130.02,223.10 135.03,208.48 140.75,197.00 158.40,161.62 189.60,136.81 229.00,130.14 Z M 73.00,367.00 C 73.00,367.00 63.31,350.00 63.31,350.00 56.85,338.06 49.18,318.14 45.43,305.00 38.95,282.30 40.00,272.72 40.00,250.00 40.00,227.18 38.89,218.87 45.15,196.00 48.69,183.06 56.54,162.83 62.78,151.00 62.78,151.00 73.00,133.00 73.00,133.00 79.76,136.19 93.92,151.91 100.00,158.00 102.29,160.29 107.53,164.94 108.19,168.00 108.85,171.05 105.17,177.16 103.75,180.00 99.51,188.50 97.04,194.85 94.43,204.00 92.06,212.29 90.01,220.35 90.00,229.00 90.00,229.00 90.00,271.00 90.00,271.00 90.02,282.92 95.15,300.99 99.87,312.00 101.62,316.09 108.97,328.40 108.19,332.00 107.53,335.06 102.29,339.71 100.00,342.00 93.92,348.09 79.76,363.81 73.00,367.00 Z M 427.00,133.00 C 427.00,133.00 437.22,151.00 437.22,151.00 443.46,162.83 451.31,183.06 454.85,196.00 461.11,218.87 460.00,227.18 460.00,250.00 460.00,272.72 461.05,282.30 454.57,305.00 450.82,318.14 443.15,338.06 436.69,350.00 436.69,350.00 427.00,367.00 427.00,367.00 420.24,363.81 406.08,348.09 400.00,342.00 397.71,339.71 392.47,335.06 391.81,332.00 391.03,328.40 398.38,316.09 400.13,312.00 404.85,300.99 409.98,282.92 410.00,271.00 410.00,271.00 410.00,228.00 410.00,228.00 409.96,219.85 407.80,211.80 405.57,204.00 402.96,194.85 400.49,188.50 396.25,180.00 394.83,177.16 391.15,171.05 391.81,168.00 392.47,164.94 397.71,160.29 400.00,158.00 406.08,151.91 420.24,136.19 427.00,133.00 Z M 367.00,426.00 C 367.00,426.00 352.00,434.69 352.00,434.69 338.00,442.28 323.19,448.25 308.00,452.98 284.28,460.35 273.02,460.00 249.00,460.00 229.26,460.00 219.76,460.47 200.00,455.27 182.65,450.70 163.76,443.24 148.00,434.69 148.00,434.69 133.00,426.00 133.00,426.00 137.48,419.74 149.95,408.05 156.00,402.00 158.30,399.70 164.18,393.21 167.00,392.41 170.44,391.43 181.31,398.00 185.00,399.69 195.90,404.68 213.05,409.98 225.00,410.00 225.00,410.00 275.00,410.00 275.00,410.00 283.44,409.99 289.93,408.06 298.00,405.85 306.96,403.40 313.75,400.37 322.00,396.25 324.71,394.89 330.05,391.57 333.00,392.41 335.82,393.21 341.70,399.70 344.00,402.00 350.05,408.05 362.52,419.74 367.00,426.00 Z" />'
,unsortedDef='<path id="railwam-unsorted" d="M 25.00,0.00 C 25.00,0.00 0.00,35.00 0.00,35.00 0.00,35.00 50.00,35.00 50.00,35.00 50.00,35.00 25.00,0.00 25.00,0.00 25.00,0.00 25.00,0.00 25.00,0.00 Z M 0.00,65.00 C 0.00,65.00 25.00,100.00 25.00,100.00 25.00,100.00 25.00,100.00 25.00,100.00 25.00,100.00 50.00,65.00 50.00,65.00 50.00,65.00 0.00,65.00 0.00,65.00 Z" />',sortedAscDef='<path id="railwam-sorted-asc" d="M 0.00,35.00 C 0.00,35.00 25.00,0.00 25.00,0.00 25.00,0.00 50.00,35.00 50.00,35.00 50.00,35.00 0.00,35.00 0.00,35.00 Z" />',sortedDscDef='<path id="railwam-sorted-dsc" d="M 0.00,65.00 C 0.00,65.00 50.00,65.00 50.00,65.00 50.00,65.00 25.00,100.00 25.00,100.00 25.00,100.00 0.00,65.00 0.00,65.00 Z" />';body.append('<svg id="railwam-svg-defs" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 0 0"><defs>'+dropdownDef+wamLogoDef+alertIconDef+logOldDef+docsDef+faqDef+unsortedDef+sortedAscDef+sortedDscDef+'</defs></svg>');mwConfig.wgServer=window.location.href.split(/(\/wiki\/)|(\/index)/)[
0];railWAM.appendAfter=$.isArray(railWAM.appendAfter)===!0?railWAM.appendAfter:[railWAM.appendAfter.toString()];if($.isArray(railWAM.botUsers)===true){if(railWAM.botUsers.indexOf(mwConfig.wgUserName)>-1){botFlag=!0;}}else{if(railWAM.botUsers===mwConfig.wgUserName){botFlag=!0;}}$.when($.getScript('/load.php?mode=articles&articles=u:dev:Chart.js&only=scripts'),$.getScript('/load.php?mode=articles&articles=u:dev:RailWAM/lib.js&only=scripts'),$.getScript('/load.php?mode=articles&articles=u:dev:I18n-js/code.js&only=scripts')).done(function(){$.when(window.dev.i18n.loadMessages('RailWAM'),rw.init()).done(function(i18n){i18n.useLang(railWAM.lang);const local={color:{changeOpacity:function(color,opacity){switch(color.charAt(0)){case'#':color=(local.color.toRGB(color)).replace('rgb','rgba').replace(')',', '+opacity+')');break;case'r':if(color.indexOf('rgba')===-1){color=color.replace('rgb','rgba').replace(')',', '+opacity+')');}else{color=color.replace(/,\s?[\d.]*\)/,', '+opacity+')');}
break;case'h':if(color.indexOf('hsla')===-1){color=color.replace('hsl','hsla').replace(')',', '+opacity+')');}else{color=color.replace(/,\s?[\d.]*\)/,', '+opacity+')');}break;}return color;},getBgColor:function(elm){if(elm.css('background-color')==='rgba(0, 0, 0, 0)'){return'transparent';}else{return elm.css('background-color');}},lighten:function(color,inc){inc=local.math.parseNum(inc);const hsl=local.color.toHSL(color);var lightness;if(hsl.split(',').length===4){lightness=local.math.parseNum(hsl.match(/[0-9]{1,3}(?=%,\s?[0-9]{1,3}\))/)[0])+inc;return hsl.replace(/[0-9]{1,3}(?=%,\s?[0-9]{1,3}\))/,lightness);}else{lightness=local.math.parseNum(hsl.match(/[0-9]{1,3}(?=%\))/)[0])+inc;return hsl.replace(/[0-9]{1,3}(?=%\))/,lightness);}},toHSL:function(color){var r,g,b,a,max,min,h,s,l,d;switch(color.charAt(0)){case'r':color=color.replace('rgb(','').replace(')','').split(',');r=local.math.parseNum(color[0])/255;g=local.math.parseNum(color[1])/255;b=local.math.parseNum(color[2])/255;a=local.
math.parseNum(color[3])||'';max=Math.max(r,g,b);min=Math.min(r,g,b);l=(max+min)/2;if(max==min){h=s=0;}else{d=max-min;s=l>0.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}h=h*60<0?h*60+360:h*60;}return a===''?'hsl('+Math.round(h)+', '+((s*100+0.5)|0)+'%, '+((l*100+0.5)|0)+'%)':'hsla('+Math.round(h)+', '+((s*100+0.5)|0)+'%, '+((l*100+0.5)|0)+'%,'+a+')';case'#':const hexSplit=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(color);r=parseInt(hexSplit[1],16)/255;g=parseInt(hexSplit[2],16)/255;b=parseInt(hexSplit[3],16)/255;max=Math.max(r,g,b);min=Math.min(r,g,b);l=(max+min)/2;if(max===min){h=s=0;}else{d=max-min;s=l>0.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}h/=6;}h=Math.round(h*360);s=Math.round(s*100);l=Math.round(l*100);return'hsl('+h+', '+s+'%, '+l+'%)';case'h':return color;}},toRGB:function(color){switch(color.charAt(0)){case'h'
:color=color.replace(/^.*?\(/,'').replace(/[\)%]/g,'').split(',');var h=local.math.parseNum(color[0]);const s=local.math.parseNum(color[1])/100,l=local.math.parseNum(color[2])/100,a=local.math.parseNum(color[3])||'';h=(Math.abs((h%360)+360)%360)/60;const chroma=(1-Math.abs(2*l-1))*s,x=chroma*(1-Math.abs((h%2)-1));var r,g,b;if(h<=1){r=chroma;g=x;b=0;}else if(h<=2){r=x;g=chroma;b=0;}else if(h<=3){r=0;g=chroma;b=x;}else if(h<=4){r=0;g=x;b=chroma;}else if(h<=5){r=x;g=0;b=chroma;}else if(h<=6){r=chroma;g=0;b=x;}const lightnessAdj=l-(chroma/2);r=Math.round((r+lightnessAdj)*255);g=Math.round((g+lightnessAdj)*255);b=Math.round((b+lightnessAdj)*255);return a===''?'rgb('+r+', '+g+', '+b+')':'rgba('+r+', '+g+', '+b+', '+a+')';case'#':const hexSplit=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(color);r=parseInt(hexSplit[1],16);g=parseInt(hexSplit[2],16);b=parseInt(hexSplit[3],16);return'rgb('+r+', '+g+', '+b+')';case'r':return color;}},},css:{getTextWidth:function(str,font){font=font||body.css
('font');const id=$('.railwam-getTextWidth').length;body.append('<span id="railwam-getTextWidth-'+id+'" class="railwam-getTextWidth" style="font:'+font+';">'+str.replace(/\s/,'&nbsp;')+'</span>');const textWidth=$('#railwam-getTextWidth-'+id).width();$('#railwam-getTextWidth-'+id).remove();return textWidth;},},date:{formatDate:function(dateId,useLocal){if(Number.isNaN(local.math.parseNum(dateId))===false){const dateObj=new Date(dateId*1000);var monthName,displayDate;if(useLocal===true){monthName=local.date.getMonthName(dateObj.getMonth());displayDate=monthName+' '+dateObj.getDate()+', '+dateObj.getFullYear();}else{monthName=local.date.getMonthName(dateObj.getUTCMonth());displayDate=monthName+' '+dateObj.getUTCDate()+', '+dateObj.getUTCFullYear();}return displayDate;}else{return'';}},getCreationDate:function(callback){var yearMin,monthMin,dayMin;$.get('https://community.fandom.com/api/v1/Wikis/Details?ids='+mwConfig.wgCityId).done(function(data){if(typeof data==='object'&&$.
isEmptyObject(data.items)===false){var dateStr=data.items[mwConfig.wgCityId].creation_date.split(' ')[0],dateArray=dateStr.split('-');yearMin=dateArray[0];monthMin=local.math.parseNum(dateArray[1])-1;dayMin=dateArray[2];dateCreated=Date.UTC(yearMin,monthMin,dayMin)/1000>rw.config.minDate?Date.UTC(yearMin,monthMin,dayMin)/1000:rw.config.minDate;if(typeof callback==='function'){callback(dateCreated);}}});},getDaysInMonth:function(m,y){y=y+Math.floor(m/12);m=Math.abs((m%12)+12)%12;const date=new Date(y,m,28);var days=27;while(date.getMonth()===m){date.setDate(date.getDate()+1);days++;}return days;},getMonthName:function(m){m=Math.abs((m%12)+12)%12;switch(m){case 0:return i18n.msg('jan').plain();case 1:return i18n.msg('feb').plain();case 2:return i18n.msg('mar').plain();case 3:return i18n.msg('apr').plain();case 4:return i18n.msg('may').plain();case 5:return i18n.msg('june').plain();case 6:return i18n.msg('july').plain();case 7:return i18n.msg('aug').plain();case 8:return i18n.msg('sept').
plain();case 9:return i18n.msg('oct').plain();case 10:return i18n.msg('nov').plain();case 11:return i18n.msg('dec').plain();}},},input:{clearErrors:function(container){$('.railwam-util-error',$(container)).addClass('railwam-util-error-hidden');$('.railwam-util-error',$(container)).fadeOut(200,function(){$(this).remove();});},error:function(text,type,container){if($('#railwam-util-error-'+type,$(container)).length===0||($('#railwam-util-error-'+type,$(container)).length>0&&$('#railwam-util-error-'+type,$(container)).hasClass('railwam-util-error-hidden')===true)){$('<div class="railwam-util-error" id="railwam-util-error-'+type+'">'+text+'</div>').prependTo($(container)).slideDown(500);}},},math:{parseNum:function(n){switch(typeof n){case'number':return n;case'string':if((/^(\-|\+)?([0-9]+(\.[0-9]*)?((e(\+|\-)[0-9]+)?)?|Infinity)$/).test(n.trim())===true){return parseFloat(n.trim());}else{return NaN;}break;default:return NaN;}},},time:{createTimer:function(time){const days=time.d>0?time.d
+' '+i18n.msg('days').plain()+', ':'',hours=time.h>0?time.h+' '+i18n.msg('hours').plain()+', ':'',min=time.m>0?time.m+' '+i18n.msg('minutes').plain()+', ':'';return days+hours+min+time.s+' '+i18n.msg('seconds').plain();},},};const bodyOverflow=body.css('overflow')||'auto',bodyTextColor=body.css('color'),headerBgColor=local.color.getBgColor($('.wds-community-header')),headerTextColor=$('.wds-community-header .wds-tabs__tab-label').css('color'),link=$('<div style="display: none;"><a></a></div>').appendTo('body'),linkTextColor=$('a',link).css('color'),pageBgElm=$('.WikiaPage .WikiaPageBackground'),pageBgColor=local.color.getBgColor(pageBgElm)==='transparent'?pageBgElm.css('background-image'):local.color.getBgColor(pageBgElm),scrollbarContainer=$('<div style="overflow: scroll; position: absolute; visibility: hidden; width: 100px;"></div>').appendTo('body'),scrollbarWidth=100-$('<div style="width: 100%"></div>').appendTo(scrollbarContainer).width(),wds=$(
'<div class="WikiaPage" style="display: none;"><div class="page-header"><div class="wds-button"></div></div></div>').appendTo('body'),wdsBgColor=$('.wds-button',wds).css('background-color'),wdsTextColor=$('.wds-button',wds).css('color');var windowWidth=$(window).width();link.remove();scrollbarContainer.remove();wds.remove();$(window).resize(function(){windowWidth=$(window).width();});Chart.defaults.plugins=Chart.defaults.plugins||{};Chart.plugins.register([{id:'avgLine',afterDatasetDraw:function(chart){const dataset=chart.data.datasets[0]||{data:[]},scale=chart.scales['x-axis-0'],options=chart.config.options.plugins.avgLine||{};if(options.showAvgLine===true){var i=dataset.data.length,avgVal=0,avgY=0,validVals=0;const meta=chart.getDatasetMeta(0);while(i--){if(isNaN(local.math.parseNum(dataset.data[i]))===false){avgVal+=local.math.parseNum(dataset.data[i]);avgY+=local.math.parseNum(meta.data[i]._model.y);validVals++;}}avgVal/=validVals;avgY/=validVals;chart.ctx.beginPath();chart.ctx.
moveTo(scale.left,avgY);chart.ctx.strokeStyle=local.color.changeOpacity(linkTextColor,0.5);chart.ctx.lineWidth=2;chart.ctx.lineTo(chart.chartArea.right,avgY);chart.ctx.stroke();chart.ctx.textBaseline='bottom';chart.ctx.textAlign='center';chart.ctx.fillStyle=local.color.changeOpacity(linkTextColor,0.5);chart.ctx.fillText('average',scale.left+35,avgY);}}},{id:'vertPosLine',afterDraw:function(chart){const options=chart.config.options.plugins.vertPosLine||{};if(options.showVertPosLine===true&&chart.tooltip._active&&chart.tooltip._active.length>0){var activePt=chart.tooltip._active[0],xPos=activePt.tooltipPosition().x,topY=chart.scales['y-axis-0'].top,bottomY=chart.scales['y-axis-0'].bottom;chart.ctx.save();chart.ctx.beginPath();chart.ctx.moveTo(xPos,topY);chart.ctx.lineTo(xPos,bottomY);chart.ctx.setLineDash([6,6]);chart.ctx.lineWidth=2;chart.ctx.strokeStyle=local.color.changeOpacity(linkTextColor,0.4);chart.ctx.stroke();chart.ctx.restore();}},}]);body.on('click','.railwam-util-tab',
function(){$('.railwam-util-tab-active').removeClass('railwam-util-tab-active');$(this).addClass('railwam-util-tab-active');mw.hook('rw.tab.changed').fire();});$.extend(local,{insertCSS:function(){mw.util.addCSS('#railwam-modal-sidebar, #railwam-modal-footer { background-color: '+headerBgColor+'; color: '+headerTextColor+'; }'+'#railwam-modal-footer > a { color: '+headerTextColor+'; }'+'#railwam-modal-title { color: '+bodyTextColor+'; }'+'#railwam-modal-content-banner { color: '+headerTextColor+'; background-color: '+local.color.changeOpacity(headerBgColor,0.7)+'; }'+'.railwam-modal-navlink { color: '+linkTextColor+'; }'+'.railwam-modal-sidebar-item-mobile {  background-color: '+headerBgColor+' ; }'+'.railwam-database-check { background-color: '+pageBgColor+'; box-shadow: 0 0 0 2px '+pageBgColor+', '+headerBgColor+' 0 0 0 4px; }'+'.railwam-database-entrytable:nth-child(even) { background-color: '+local.color.changeOpacity(headerBgColor,0.05)+' }'+
'#railwam-database-searchside-container { background-color: '+local.color.changeOpacity(headerBgColor,0.05)+'; }'+'.railwam-database-tablehead:hover { background-color: '+local.color.changeOpacity(headerBgColor,0.05)+' }'+'.railwam-database-tablehead:active { background-color: '+local.color.changeOpacity(headerBgColor,0.1)+' }'+'.railwam-datepicker { background-color: '+pageBgColor+'; color: '+bodyTextColor+'; }'+'#railwam-datepicker-startdate, #railwam-datepicker-enddate { background-color: '+local.color.lighten(headerBgColor,20)+'; color: '+headerTextColor+'; }'+'.railwam-dashboard-card { background: '+pageBgColor+'; }'+'#railwam-dashboard-database-container { background-image: linear-gradient(to top, '+local.color.changeOpacity(local.color.lighten(wdsBgColor,10),0.9)+' 50%, '+local.color.changeOpacity(local.color.lighten(wdsBgColor,10),0.5)+'), url("https://vignette.wikia.nocookie.net/bniceshottest/images/5/56/Dashboard-database-bg.jpg/revision/latest"); color: '+headerTextColor+
'; }'+'.railwam-dashboard-svg { fill: '+wdsBgColor+'; }'+'.railwam-dashboard-util-container { border-top: 4px solid '+wdsBgColor+'; }'+'.railwam-wds:not(.wds-is-text):not(.wds-is-secondary) { background-color: '+wdsBgColor+'; border-color: '+wdsBgColor+'; color: '+wdsTextColor+'; }'+'.railwam-wds:hover:not(.wds-is-text):not(.wds-is-secondary):not(:disabled), .railwam-wds:focus:not(.wds-is-text):not(.wds-is-secondary):not(:disabled), .railwam-wds:active:not(.wds-is-text):not(.wds-is-secondary):not(:disabled) { background-color: '+local.color.lighten(wdsBgColor,20)+'; border-color: '+local.color.lighten(wdsBgColor,20)+'; }'+'#railwam-graph-options { background-color: '+local.color.changeOpacity(headerBgColor,0.05)+'; }'+'#railwam-log-options { background-color: '+local.color.changeOpacity(headerBgColor,0.05)+'; }'+'.railwam-util-disabled { background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, '+local.color.changeOpacity(headerBgColor,0.1)+' 10px, '+local.color
.changeOpacity(headerBgColor,0.1)+' 20px); }'+'.railwam-util-btn-hasbg { background-color: '+local.color.changeOpacity(headerBgColor,0.12)+'; color: '+headerBgColor+'; }'+'.railwam-util-filter-input { background: '+pageBgColor+'; border: 1px solid '+local.color.changeOpacity(headerBgColor,0.25)+'; }'+'.railwam-util-placeholder { color: '+linkTextColor+'; }'+'.railwam-util-spinner > g > circle { stroke: '+headerBgColor+'; }'+'.railwam-util-tab-active { border-bottom: 2px solid '+linkTextColor+'; }'+'.railwam-util-tab-container { border-bottom: 1px solid '+local.color.changeOpacity(headerBgColor,0.25)+'; }');},start:function(){rw.svg.insert('body');local.insertCSS();var skipPage=!0;if(railWAM.loadOnNamespace==='__*__'&&railWAM.loadOnPage==='__*__'){skipPage=!1;}else if($.isArray(railWAM.loadOnNamespace)===true){if(railWAM.loadOnNamespace.indexOf(mwConfig.wgNamespaceNumber)>-1){skipPage=!1;}}else if(local.math.parseNum(railWAM.loadOnNamespace)===mwConfig.wgNamespaceNumber){
skipPage=!1;}if(skipPage===true){const underscorePageName=mwConfig.wgPageName.replace(/_/g,' ');if($.isArray(railWAM.loadOnPage)===true){if(railWAM.loadOnPage.indexOf(underscorePageName)>-1){skipPage=!1;}}else if(railWAM.loadOnPage.toString()===underscorePageName){skipPage=!1;}}if((/\/RailWAM\/(Database|Dashboard|Graph|Log)/).test(mwConfig.wgPageName)===false&&(anonFlag===false||railWAM.showToAnons===true)&&skipPage===false){local.module.init();$('.railwam-data-element:first-of-type').after(i18n.msg('logPageWarning').plain());}else if(mwConfig.wgPageName.indexOf('/RailWAM/Database')>-1){local.date.getCreationDate(local.database.init);}else if(mwConfig.wgPageName.indexOf('/RailWAM/Dashboard')>-1){local.dashboard.init();}else if(mwConfig.wgPageName.indexOf('/RailWAM/Graph')>-1){local.date.getCreationDate(local.graph.init);}else if(mwConfig.wgPageName.indexOf('/RailWAM/Log')>-1){local.date.getCreationDate(local.logOld.init);}else if(skipPage===true){console.log(
'RailWAM: RailWAM '+i18n.msg('errorPage').plain());}},});local.module={init:function(){if(railWAM.top5000Mode===true){rw.data.getLogged({log:railWAM.logPage,success:local.module.getFullData,error:local.module.getFullData,});}else if(railWAM.top5000Mode===false){rw.data.getLogged({log:railWAM.logPage,success:local.module.getMinData,error:local.module.getMinData,});}},getFullData:function(logged){rw.data.get({wikiId:mwConfig.wgCityId,startDate:rw.config.maxDate,endDate:rw.config.maxDate,logged:logged,wikis:1,callback:function(data){data[rw.config.maxDate]=data[rw.config.maxDate]||{};if(isNaN(local.math.parseNum(data[rw.config.maxDate].wam_rank))===false){if(wamDate-rw.config.maxDate>86400*2){data[rw.config.maxDate-86400]=data[rw.config.maxDate];}local.module.insertModule(data,rw.config.maxDate);}else{local.module.getMinData(logged);}}});},getMinData:function(logged){const loggedForCheck=JSON.parse(JSON.stringify(logged)),hrsToday=(curDate.getTime()/1000-wamDate)/3600;if(railWAM.
doubleCheckDelay>0&&hrsToday%railWAM.doubleCheckDelay===hrsToday%(railWAM.doubleCheckDelay*2)){loggedForCheck[wamDate]=null;}rw.data.getLess({fixedWamDate:!0,wikiId:mwConfig.wgCityId,logged:loggedForCheck,callback:function(data){if($.isEmptyObject(data[wamDate])===false){if(typeof logged[wamDate]==='object'&&logged[wamDate]!==null&&local.math.parseNum(data[wamDate].wam)===local.math.parseNum(logged[wamDate].wam)){data[wamDate].logged=!0;}local.module.insertModule(data,wamDate);}else{local.module.error();}},error:function(){local.module.error();}});},insertModule:function(data,dateId){data[dateId-86400]=$.extend({},{vertical_wam_rank:null,wam:null,wam_rank:null,},data[dateId-86400]);$.each(data,function(id,obj){$.each(obj,function(key,val){if(key==='wam'&&(isNaN(local.math.parseNum(val))===true||local.math.parseNum(val)>100||local.math.parseNum(val)<0)){data[id][key]=i18n.msg('unknown').plain();}else if(key==='wam_rank'&&(isNaN(local.math.parseNum(val))===true||local.math.parseNum(
val)>5000||local.math.parseNum(val)<0)){data[id][key]=i18n.msg('unknown').plain();}});});const wamLogoSvg='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" id="railwam-wam-logo"><use xlink:href="#railwam-modal-logo"/></svg>',links='<span id="railwam-link-container"><a id="railwam-faq" class="railwam-module-main-link">'+i18n.msg('faq').plain()+'</a><a href="//community.fandom.com/wiki/WAM" id="railwam-offical-page" class="railwam-module-main-link">'+i18n.msg('wamPage').plain()+'</a><a id="railwam-dashboard-link" class="railwam-module-main-link" href="'+mwConfig.wgServer+'/wiki/Special:BlankPage/RailWAM/Dashboard">'+i18n.msg('dashboard').plain()+'</a><br>'+i18n.msg('poweredBy').plain()+' <a href="//dev.fandom.com/wiki/RailWAM">RailWAM</a></span>',rankElm=isNaN(local.math.parseNum(data[dateId].wam_rank))===!1?'<div id="railwam-rank-container"><div class="railwam-inline-block"><div class="railwam-module-label">'+i18n.msg('rank').plain()+
'</div><div class="railwam-module-val">'+data[dateId].wam_rank+'</div></div><div class="railwam-module-data-container"><span id="railwam-rank-difference">+/- '+i18n.msg('unknown').plain()+'</span></div></div>':'',module='<section class="rail-module" id="railwam-rail-mod"><h2 class="has-icon">'+wamLogoSvg+i18n.msg('todayTitle').plain()+'</h2><div id="railwam-module-center"><div id="railwam-score-container"><div class="railwam-inline-block"><div class="railwam-module-label">'+i18n.msg('score').plain()+'</div><div class="railwam-module-val">'+data[dateId].wam+'</div></div><div class="railwam-module-data-container"><span id="railwam-score-difference">+/- '+i18n.msg('unknown').plain()+'</span></div></div>'+rankElm+'</div><span id="railwam-not-logged">'+i18n.msg('yesterdayNotLogged').plain()+'</span>'+links+'</section>';var appendElms='';$.each(railWAM.appendAfter,function(i,elm){if(railWAM.appendAfter===i++){appendElms+=elm+', ';}else{appendElms+=elm+
', #top-right-boxad-wrapper, #top-boxad-wrapper, #NATIVE_TABOOLA_RAIL';}});const appendAfter=$(appendElms).last();if(appendAfter.length>0){$(appendAfter).after(module);}else{$('#WikiaRail').prepend(module);}mw.util.addCSS('#railwam-rank-container { border-left: 1px solid '+$('.WikiaRail .rail-module h2').css('border-bottom-color')+'; }');$('#railwam-faq').click(function(){local.faq.display();});const scoreDiff=rw.math.diff(data[dateId].wam,data[dateId-86400].wam);var scorePercent=(((Math.abs(local.math.parseNum(data[dateId].wam)-local.math.parseNum(data[dateId-86400].wam))/local.math.parseNum(data[dateId-86400].wam))*100).toFixed(1)+'%').replace('NaN','N/A');if(local.math.parseNum(data[dateId-86400].wam)===0){if(local.math.parseNum(data[dateId].wam===0)){scorePercent='0.0%';}else{scorePercent='N/A%';}}const scoreDiffElm='<div class="railwam-inline-block">'+scoreDiff+'<br>'+scorePercent+'</div>';const rankDiff=rw.math.diff(data[dateId-86400].wam_rank,data[dateId].wam_rank);var
rankPercent=(((Math.abs(local.math.parseNum(data[dateId].wam_rank)-local.math.parseNum(data[dateId-86400].wam_rank))/local.math.parseNum(data[dateId-86400].wam_rank))*100).toFixed(1)+'%').replace('NaN','N/A');if(local.math.parseNum(data[dateId-86400].wam_rank)===0){if(local.math.parseNum(data[dateId].wam_rank===0)){rankPercent='0.0%';}else{rankPercent='N/A%';}}const rankDiffElm='<div class="railwam-inline-block">'+rankDiff+'<br>'+rankPercent,notLoggedElm=$('#railwam-not-logged');if(railWAM.showChange===true){if(typeof scoreDiff==='string'){$('#railwam-score-difference').html(scoreDiffElm);}if(typeof rankDiff==='string'){$('#railwam-rank-difference').html(rankDiffElm);}if(typeof scoreDiff==='string'||typeof rankDiff==='string'){notLoggedElm.css('display','none');}else{notLoggedElm.css('display','block');}}else{$('#railwam-score-difference').remove();$('#railwam-rank-difference').remove();}const scoreArrow=$('#railwam-score-difference .railwam-arrow');scoreArrow.remove();$(
'#railwam-score-difference > div').before(scoreArrow);const rankArrow=$('#railwam-rank-difference .railwam-arrow');rankArrow.remove();$('#railwam-rank-difference > div').before(rankArrow);const showAlert=data[dateId].logged===!1?true:!1;if(railWAM.autoLogForUsers.toString().indexOf(mwConfig.wgUserName)!==-1&&showAlert===true){rw.data.log({data:data,log:railWAM.logPage,summary:'[[w:c:dev:RailWAM|RailWAM]]: '+i18n.msg('logSummary').plain(),types:['wiki_id','wam','wam_rank','vertical_wam_rank'],addedBy:'RailWAM',version:3,bot:botFlag,override:!0,});}else if(railWAM.showLogAlert===true&&showAlert===true){data[dateId-86400]=null;$.each(data,function(key,wamObj){if(wamObj!==null){$.each(wamObj,function(type,val){if(val===i18n.msg('unknown').plain()){data[key][type]=null;}});if($.isEmptyObject(data[key])===true){data[key]=null;}}});local.module.logAlert(data);}mw.hook('rw.mod.moduleAdded').fire();},logAlert:function(data){if(document.cookie.replace(
/(?:(?:^|.*;\s*)railwamShowAlert\s*\=\s*([^;]*).*$)|^.*$/,"$1")!=="false"){$('#railwam-rail-mod').prepend('<div id="railwam-log-alert"><div id="railwam-log-alert-header"><div id="railwam-log-alert-icon-container" class="railwam-log-alert-header-element"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" id="railwam-log-alert-icon-svg"><use xlink:href="#railwam-log-alert-icon"/></svg></div><div id="railwam-log-alert-header-text" class="railwam-log-alert-header-element">'+i18n.msg('notLogged').plain()+'</div><div id="railwam-log-alert-drop-container" class="railwam-log-alert-header-element"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 48 28" id="railwam-log-alert-dropdown-svg"><use xlink:href="#railwam-dropdown-arrow"/></svg></div></div><div id="railwam-log-alert-body"><span id="railwam-log-alert-body-importanttext">'+i18n.msg('notLoggedDetails').plain()+'</span> '+i18n.msg('notLoggedWarning').plain()+
'<div id="railwam-log-alert-button-container"><button class="wds-button wds-is-secondary" id="railwam-log-alert-dismiss"><span>'+i18n.msg('dismiss').plain()+'</span></button><button class="wds-button" id="railwam-log-alert-log"><span>'+i18n.msg('logBtn').plain()+'</span></button></div></div></div>');const logAlertElm=$('#railwam-log-alert');var degrees=0;logAlertElm.click(function(){$('#railwam-log-alert-body').slideToggle(200);degrees+=180;$('#railwam-log-alert-dropdown-svg',$(this)).css('transform','rotate('+degrees+'deg)');});logAlertElm.on('click','#railwam-log-alert-log',function(evt){evt.stopPropagation();rw.data.log({data:data,log:railWAM.logPage,summary:'[[w:c:dev:RailWAM|RailWAM]]: '+i18n.msg('logSummary').plain(),types:['wiki_id','wam','wam_rank','vertical_wam_rank'],addedBy:'RailWAM',version:3,bot:botFlag,override:!0,});$('#railwam-log-alert-body').html(i18n.msg('scoreLogged').plain());logAlertElm.delay(3800).fadeOut(200,function(){$(this).remove();});});logAlertElm.on(
'click','#railwam-log-alert-dismiss',function(evt){evt.stopPropagation();$('#railwam-log-alert-body').html(i18n.msg('cookieWarning').plain()+'<div id="railwam-log-alert-button-container"><button class="wds-button wds-is-secondary" id="railwam-log-alert-cancel"><span>'+i18n.msg('cancel').plain()+'</span></button><button class="wds-button" id="railwam-log-alert-confirmDismiss"><span>'+i18n.msg('dismiss').plain()+'</span></button></div>');});logAlertElm.on('click','#railwam-log-alert-confirmDismiss',function(evt){evt.stopPropagation();document.cookie='railwamShowAlert=false; domain='+window.location.hostname+'; max-age='+86400;logAlertElm.fadeOut(500,function(){$(this).remove();});mw.hook('rw.mod.alertHidden').fire();});logAlertElm.on('click','#railwam-log-alert-cancel',function(evt){evt.stopPropagation();$('#railwam-log-alert-body').html('<span id="railwam-log-alert-body-importanttext">'+i18n.msg('notLoggedDetails').plain()+'</span> '+i18n.msg('notLoggedWarning').plain()+
'<div id="railwam-log-alert-button-container"><button class="wds-button wds-is-secondary" id="railwam-log-alert-dismiss"><span>'+i18n.msg('dismiss').plain()+'</span></button><button class="wds-button" id="railwam-log-alert-log"><span>'+i18n.msg('logBtn').plain()+'</span></button></div>');});}mw.hook('rw.mod.alertAdded').fire();},error:function(){if($('#railwam-error-mod').length<1){const module='<section class="rail-module" id="railwam-error-mod"><h2>'+i18n.msg('onErrorHeading').plain()+'</h2>'+i18n.msg('onError','<a href="//dev.fandom.com/wiki/Talk:RailWAM" target="_blank" rel="noopener noreferrer">'+i18n.msg('talkLinkText').plain()+'</a>').plain()+'</section>';var appendElms='';$.each(railWAM.appendAfter,function(i,elm){if(railWAM.appendAfter===i++){appendElms+=elm+', ';}else{appendElms+=elm+', #top-right-boxad-wrapper, #NATIVE_TABOOLA_RAIL';}});const appendAfter=$(appendElms).last();if(appendAfter.length>0){$(appendAfter).after(module);}else{$('#WikiaRail').prepend(module);}}mw.hook
('rw.mod.errorAdded').fire();}};local.database={init:function(dateCreated){rw.data.getLogged({log:railWAM.logPage,callback:function(logged){$('title').text('RailWAM: '+i18n.msg('databaseAlt').plain()+fandomTitle);$('.page-header__title').text('RailWAM: '+i18n.msg('databaseAlt').plain());$('.page-header__page-subtitle').html('< <a href="'+mwConfig.wgServer+'/wiki/Special:BlankPage/RailWAM/Dashboard">'+i18n.msg('dashboard').plain()+'</a>');const sortSvg='<span class="railwam-database-sort-icon-container"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 100" class="railwam-sort-icon"><use xlink:href="#railwam-unsorted"/></span>',searchfieldElm='<div class="railwam-database-searchfield-container"><span><input type="text" id="railwam-database-searchfield-min" class="railwam-util-input railwam-util-filter-input" required><span class="railwam-util-placeholder railwam-util-filter-ph" id="railwam-database-searchfield-min-ph">'+i18n.msg('minScore').plain()+
'</span><div id="railwam-database-searchfield-min-errors" class="railwam-database-searchfield-errors"></div></span></div><div class="railwam-database-searchfield-container"><span><input type="text" id="railwam-database-searchfield-max" class="railwam-util-input railwam-util-filter-input" required><span class="railwam-util-placeholder railwam-util-filter-ph" id="railwam-database-searchfield-max-ph">'+i18n.msg('maxScore').plain()+'</span><div id="railwam-database-searchfield-max-errors" class="railwam-database-searchfield-errors"></div></span></div>',loggedOnlyElm='<div id="railwam-database-loggedonly-container"><input type="checkbox" id="railwam-database-loggedonly" checked><label for="railwam-database-loggedonly">'+i18n.msg('loggedOnly').plain()+'</label></div>';$('#mw-content-text').html(
'<div class="railwam-flex-container"><div class="railwam-database-searcharea-container" id="railwam-database-searchside-container"><div class="railwam-util-tab-container"><div class="railwam-util-tab railwam-util-tab-active" tabval="range">'+i18n.msg('dateRange').plain()+'</div><div class="railwam-util-tab" tabval="score">'+i18n.msg('score').plain()+'</div><div class="railwam-util-tab" tabval="rank">'+i18n.msg('rank').plain()+'</div><div class="railwam-util-tab" tabval="vertRank">'+i18n.msg('vertRank').plain()+'</div></div>'+searchfieldElm+'<span class="railwam-util-filter" id="railwam-database-daterange-filter-cont"><input class="railwam-util-filter-input railwam-util-input" id="railwam-database-daterange" type="text" required readonly="readonly"><div class="railwam-datepicker" id="railwam-datepicker-daterange"></div><span class="railwam-util-placeholder railwam-util-filter-ph">'+i18n.msg('dateRange').plain()+'</span><div id="railwam-database-daterange-errors"></div></span>'+
loggedOnlyElm+'<a class="railwam-wds wds-button railwam-database-search-active" id="railwam-database-search">'+i18n.msg('search').plain()+'</a></div><div class="railwam-database-searcharea-container" id="railwam-database-seemorebox"><span class="railwam-util-heading">'+i18n.msg('databaseSeeMoreHeader').plain()+'</span><div>'+i18n.msg('dashGraphDesc').plain()+'</div><a class="railwam-wds wds-button" href="'+mwConfig.wgServer+'/wiki/Special:BlankPage/RailWAM/Graph">'+i18n.msg('dashGraphBtn').plain()+'</a></div></div><div id="railwam-database-tablehead-container"><div class="railwam-database-tablehead railwam-sort-selected" sort-id="date-id">'+i18n.msg('date').plain()+'<span class="railwam-smalltext">('+timezone+')</span><span class="railwam-database-sort-icon-container"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 100" class="railwam-sort-icon"><use xlink:href="#railwam-sorted-dsc"/></span></div><div class="railwam-database-tablehead" sort-id="score">'+i18n.msg('score').plain(
)+sortSvg+'</div><div class="railwam-database-tablehead" sort-id="score-diff">'+i18n.msg('change').plain()+sortSvg+'</div><div class="railwam-database-tablehead" sort-id="rank">'+i18n.msg('rank').plain()+sortSvg+'</div><div class="railwam-database-tablehead" sort-id="rank-diff">'+i18n.msg('change').plain()+sortSvg+'</div><div class="railwam-database-tablehead" sort-id="vertRank">'+i18n.msg('vertRank').plain()+sortSvg+'</div><div class="railwam-database-tablehead" sort-id="vertRank-diff">'+i18n.msg('change').plain()+sortSvg+
'</div></div><div id="railwam-database-loading"><svg class="railwam-util-spinner" width="25" viewBox="-15 -15 30 30" xmlns="http://www.w3.org/2000/svg"> <g> <circle fill="none" stroke-width="1" stroke-linecap="round" r="10"></circle></g></svg><span id="railwam-database-loading-text"></span></div><div id="railwam-database-noentry"><span id="railwam-database-noentry-text"></span></div><div id="railwam-util-logafter"><div id="railwam-util-logafter-text"><span class="railwam-bold">'+i18n.msg('logAfterHeader').plain()+'</span><span id="railwam-notlogged-text-warning">'+i18n.msg('notLoggedWarning').plain()+'</span></div><div class="railwam-util-btn" id="railwam-util-logafter-dismiss">'+i18n.msg('dismiss').plain()+'</div><div class="railwam-util-btn railwam-util-btn-hasbg" id="railwam-util-logafter-log">'+i18n.msg('logBtn').plain()+'</div></div><div id="railwam-database-entries"></div>');const maxLabelWidth=local.css.getTextWidth([i18n.msg('minVertRank').plain(),i18n.msg('maxVertRank').plain(
)].sort(function(a,b){return b.length-a.length;})[0],$('.railwam-database-searchfield-container .railwam-util-filter-input').css('font')),maxScoreWidth=local.css.getTextWidth('99.9999',$('.railwam-database-searchfield-container .railwam-util-filter-input').css('font')),searchfieldInputWidth=maxLabelWidth>maxScoreWidth?maxLabelWidth:maxScoreWidth;$('.railwam-database-searchfield-container .railwam-util-filter-input').css('width',searchfieldInputWidth);$('.railwam-database-searchfield-container .railwam-util-filter-input').change(function(){if($(this).val()===''){$(this).removeClass('railwam-util-hasVal');}else{$(this).addClass('railwam-util-hasVal');}});mw.hook('rw.tab.changed').add(function(){var minField=$('#railwam-database-searchfield-min').val('').change(),maxField=$('#railwam-database-searchfield-max').val('').change();minField.val('').change();maxField.val('').change();minField.removeClass('railwam-util-input-error');maxField.removeClass('railwam-util-input-error');local.input.
clearErrors('#railwam-database-searchfield-errors');const minPlaceholderElm=$('#railwam-database-searchfield-min-ph'),maxPlaceholderElm=$('#railwam-database-searchfield-max-ph');switch($('.railwam-util-tab-active').attr('tabval')){case'score':minPlaceholderElm.text(i18n.msg('minScore').plain());maxPlaceholderElm.text(i18n.msg('maxScore').plain());break;case'rank':minPlaceholderElm.text(i18n.msg('minRank').plain());maxPlaceholderElm.text(i18n.msg('maxRank').plain());break;case'vertRank':minPlaceholderElm.text(i18n.msg('minVertRank').plain());maxPlaceholderElm.text(i18n.msg('maxVertRank').plain());break;}switch($('.railwam-util-tab-active').attr('tabval')){case'range':$('.railwam-database-searchfield-container').slideUp(200);break;case'score':case'rank':case'vertRank':$('.railwam-database-searchfield-container .railwam-datepicker').fadeOut(200,function(){$(this).remove();});$('.railwam-database-searchfield-container').slideDown(200);break;}local.datepicker.init('daterange',dateCreated);}
);mw.hook('rw.dp.dayClicked').add(function(){const displayRange=local.date.formatDate(dpStartDate)+' - '+local.date.formatDate(dpEndDate);$('#railwam-database-daterange').val(displayRange).change();});$('.railwam-database-tablehead').click(function(){const sortId=$(this).attr('sort-id'),sortIcon=$('.railwam-sort-icon',$(this));if(this.asc===true){this.asc=!1;local.database.sortEntries(sortId,'dsc');sortIcon.html('<use xlink:href="#railwam-sorted-dsc"/>');}else{this.asc=!0;local.database.sortEntries(sortId,'asc');sortIcon.html('<use xlink:href="#railwam-sorted-asc"/>');}});$('#railwam-database-searchfield-min').blur(function(){const searchType=$('.railwam-util-tab-active').attr('tabval');if(local.database.validate($(this),searchType,'#railwam-database-searchfield-min-errors')===true&&local.database.validate($('#railwam-database-searchfield-max'),searchType,'#railwam-database-searchfield-max-errors')===true&&$(this).val()>local.math.parseNum($('#railwam-database-searchfield-max').
val())){local.input.error(i18n.msg('errorAboveMax').plain(),'aboveMax','#railwam-database-searchfield-min-errors');$(this).addClass('railwam-util-input-error');local.input.clearErrors('#railwam-database-searchfield-max-errors');}});$('#railwam-database-searchfield-max').blur(function(){const searchType=$('.railwam-util-tab-active').attr('tabval');if(local.database.validate($(this),searchType,'#railwam-database-searchfield-max-errors')===true&&local.database.validate($('#railwam-database-searchfield-min'),searchType,'#railwam-database-searchfield-in-errors')===true&&$(this).val()<local.math.parseNum($('#railwam-database-searchfield-min').val())){local.input.error(i18n.msg('errorBelowMin').plain(),'belowMin','#railwam-database-searchfield-max-errors');$(this).addClass('railwam-util-input-error');local.input.clearErrors('#railwam-database-searchfield-min-errors');}});mw.hook('rw.dp.datepickerClosed').add(function(){local.database.validate($('#railwam-database-daterange'),'range',
'#railwam-database-daterange-errors');});body.on('click','.railwam-database-search-active',function(){const dateRangeElm=$('#railwam-database-daterange'),minSearchfieldElm=$('#railwam-database-searchfield-min'),maxSearchfieldElm=$('#railwam-database-searchfield-max'),searchType=$('.railwam-util-tab-active').attr('tabval'),logAfterElm=$('#railwam-util-logafter');var input,showLogAfter=!1;switch(searchType){case'range':input=[dpStartDate,dpEndDate];break;case'score':input=[minSearchfieldElm.val().trim()||0,maxSearchfieldElm.val().trim()||100];break;case'rank':case'vertRank':input=[minSearchfieldElm.val().trim()||1,maxSearchfieldElm.val().trim()||5000];break;}if(((searchType!=='range'&&local.database.validate(minSearchfieldElm,searchType,'#railwam-database-searchfield-min-errors')===true&&local.database.validate(maxSearchfieldElm,searchType,'#railwam-database-searchfield-max-errors')===true)||searchType==='range')&&local.database.validate(dateRangeElm,'range',
'#railwam-database-daterange-errors')===true){mw.hook('rw.db.searchStarted').fire();$('.railwam-database-entrytable').remove();minSearchfieldElm.attr('readonly','readonly');maxSearchfieldElm.attr('readonly','readonly');$('#railwam-database-searchside-container .railwam-util-tab-container').css('pointer-events','none');$('#railwam-database-searchtype option:not(:checked)').attr('disabled',true);$('#railwam-database-loggedonly').attr('disabled',true);$('#railwam-database-searchside-container').addClass('railwam-util-disabled');$('.railwam-datepicker').css('display','none');if($('#railwam-database-loggedonly').is(':checked')===true){$.each(logged,function(id,dayData){if(typeof dayData==='object'&&local.database.checkEntry({input:input,data:logged,dateId:id,startDate:dpStartDate,endDate:dpEndDate})===true){local.database.newEntry(logged,id);}});logAfterElm.css('display','none');local.database.timeLeft(0);mw.hook('rw.db.searchDone').fire();}else{rw.data.get({wikiId:mwConfig.wgCityId,
startDate:dpStartDate,endDate:dpEndDate,logged:logged,wikis:1,callback:function(data){$.each(data,function(id,dayData){if(typeof dayData==='object'&&local.database.checkEntry({input:input,data:data,dateId:id,startDate:dpStartDate,endDate:dpEndDate})===true){local.database.newEntry(data,id);}});local.database.timeLeft(0);mw.hook('rw.db.searchDone').fire();if(showLogAfter===true&&railWAM.showLogAlert===true&&$('.railwam-database-entrytable').length>0){logAfterElm.css('display','block');}else{logAfterElm.css('display','none');}$.extend(logged,data);},success:function(data,dateId,requests){local.database.timeLeft(requests*10);showLogAfter=!0;},error:function(data,dateId,requests){local.database.timeLeft(requests*10);},exists:function(data,dateId,requests){if(data[dateId].logged===false){showLogAfter=!0;}},});}}});mw.hook('rw.tab.changed').fire();$('#railwam-database-faq').click(function(){local.faq.display();});$('#railwam-util-logafter-dismiss').click(function(){$(
'#railwam-util-logafter').fadeOut(200);mw.hook('rw.db.logAlertDismissed').fire();});body.on('click','#railwam-util-logafter-log',function(){rw.data.log({data:logged,log:railWAM.logPage,summary:'[[w:c:dev:RailWAM|RailWAM]]: '+i18n.msg('logSummary').plain(),types:['wiki_id','wam','wam_rank','vertical_wam_rank'],addedBy:'RailWAM',version:3,bot:botFlag,override:!0,});$('#railwam-util-logafter-text').text(i18n.msg('scoreLogged').plain());$('#railwam-util-logafter-log').remove();mw.hook('rw.db.dataLogged').fire();});$(document).keydown(function(evt){if(evt.key.trim()==='Enter'){$('#railwam-database-search').trigger('click');}});mw.hook('rw.db.uiAdded').fire();}});},checkEntry:function(entry){var wamVal;if(entry.dateId<local.math.parseNum(entry.startDate)||entry.dateId>local.math.parseNum(entry.endDate)||entry.dateId>rw.config.maxDate){return false;}switch($('.railwam-util-tab-active').attr('tabval')){case'range':return true;case'score':wamVal=entry.data[entry.dateId].wam;break;case'rank':
wamVal=entry.data[entry.dateId].wam_rank;break;case'vertRank':wamVal=entry.data[entry.dateId].vertical_wam_rank;break;}if(wamVal>=local.math.parseNum(entry.input[0])&&wamVal<=local.math.parseNum(entry.input[1])){return true;}else{return false;}},newEntry:function(data,dateId){data[dateId]=$.extend({wam:null,wam_rank:null,vertical_wam_rank:null},data[dateId]);data[dateId-86400]=$.extend({wam:null,wam_rank:null,vertical_wam_rank:null},data[dateId-86400]);const displayDate=local.date.formatDate(local.math.parseNum(dateId)+(curDate.getTimezoneOffset()*60)+3600,true),score=isNaN(local.math.parseNum(data[dateId].wam))===!1?data[dateId].wam:i18n.msg('unknown').plain();var scoreDiff=rw.math.diff(data[dateId].wam,data[dateId-86400].wam)||'+/- '+i18n.msg('unknown').plain(),scorePercent=scoreDiff!=='+/- '+i18n.msg('unknown').plain()?('<span class="railwam-smalltext">('+((Math.abs(local.math.parseNum(data[dateId].wam)-local.math.parseNum(data[dateId-86400].wam))/local.math.parseNum(data[dateId-
86400].wam))*100).toFixed(1)+'%)</span>').replace('NaN','N/A'):'';const rank=isNaN(local.math.parseNum(data[dateId].wam_rank))===!1?data[dateId].wam_rank:i18n.msg('unknown').plain();var rankDiff=rw.math.diff(data[dateId-86400].wam_rank,data[dateId].wam_rank)||'+/- '+i18n.msg('unknown').plain(),rankPercent=rankDiff!=='+/- '+i18n.msg('unknown').plain()?('<span class="railwam-smalltext">('+((Math.abs(local.math.parseNum(data[dateId].wam_rank)-local.math.parseNum(data[dateId-86400].wam_rank))/local.math.parseNum(data[dateId-86400].wam_rank))*100).toFixed(1)+'%)</span>').replace('NaN','N/A'):'';const vertRank=isNaN(local.math.parseNum(data[dateId].vertical_wam_rank))===!1?data[dateId].vertical_wam_rank:i18n.msg('unknown').plain();var vertRankDiff=rw.math.diff(data[dateId-86400].vertical_wam_rank,data[dateId].vertical_wam_rank)||'+/- '+i18n.msg('unknown').plain(),vertRankPercent=vertRankDiff!=='+/- '+i18n.msg('unknown').plain()?('<span class="railwam-smalltext">('+((Math.abs(local.math
.parseNum(data[dateId].vertical_wam_rank)-local.math.parseNum(data[dateId-86400].vertical_wam_rank))/local.math.parseNum(data[dateId-86400].vertical_wam_rank))*100).toFixed(1)+'%)</span>').replace('NaN','N/A'):'';if(local.math.parseNum(data[dateId-86400].wam)===0){if(local.math.parseNum(data[dateId].wam===0)){scorePercent='<span class="railwam-smalltext">(0.0%)</span>';}else{scorePercent='<span class="railwam-smalltext">(N/A%)</span>';}}if(local.math.parseNum(data[dateId-86400].wam_rank)===0){if(local.math.parseNum(data[dateId].wam_rank===0)){rankPercent='<span class="railwam-smalltext">(0.0%)</span>';}else{rankPercent='<span class="railwam-smalltext">(N/A%)</span>';}}if(local.math.parseNum(data[dateId-86400].vertical_wam_rank)===0){if(local.math.parseNum(data[dateId].vertical_wam_rank===0)){vertRankPercent='<span class="railwam-smalltext">(0.0%)</span>';}else{vertRankPercent='<span class="railwam-smalltext">(N/A%)</span>';}}if(scoreDiff!=='+/- '+i18n.msg('unknown').plain()){scoreDiff=
scoreDiff.replace(/> (\d|\.)*$/,'> '+(local.math.parseNum((scoreDiff.match(/> (\d|\.)*$/)[0]).replace('> ',''))).toFixed(4));}if(score!==i18n.msg('unknown').plain()||rank!==i18n.msg('unknown').plain()||vertRank!==i18n.msg('unknown').plain()){const entriesElm=$('#railwam-database-entries');entriesElm.append('<div class="railwam-database-entrytable" id="railwam-entrytable-'+dateId+'" date-id="'+dateId+'" score="'+score+'" score-diff="'+scoreDiff.replace(/<svg.*?xlink:href="#railwam-arrow-down".*?<\/svg> /,'-').replace(/^<.*>/,'').trim()+'" rank="'+rank+'"rank-diff="'+rankDiff.replace(/<svg.*?xlink:href="#railwam-arrow-up".*?<\/svg> /,'-').replace(/^<.*>/,'').trim()+'" vertRank="'+vertRank+'" vertRank-diff="'+vertRankDiff.replace(/<svg.*?xlink:href="#railwam-arrow-up".*?<\/svg> /,'-').replace(/^<.*>/,'').trim()+'"><div class="railwam-database-entrytable-column">'+displayDate+'</div><div class="railwam-database-entrytable-column">'+score+
'</div><div class="railwam-database-entrytable-column">'+scoreDiff+scorePercent+'</div><div class="railwam-database-entrytable-column">'+rank+'</div><div class="railwam-database-entrytable-column">'+rankDiff+rankPercent+'</div><div class="railwam-database-entrytable-column">'+vertRank+'</div><div class="railwam-database-entrytable-column">'+vertRankDiff+vertRankPercent+'</div></div>');mw.hook('rw.db.entryAdded').fire();const sortSelected=document.querySelector('.railwam-sort-selected'),sortDir=sortSelected.asc===!0?'asc':'dsc';local.database.sortEntries(sortSelected.getAttribute('sort-id'),sortDir);}},sortEntries:function(id,dir){const sortIcon=$('.railwam-sort-icon',$('.railwam-database-tablehead[sort-id="'+id+'"]')),tblHeads=Array.prototype.slice.call(document.querySelectorAll('.railwam-database-tablehead'));tblHeads.forEach(function(elm){if(elm.getAttribute('sort-id')===id){if(elm.className.indexOf('railwam-sort-selected')===-1){elm.className+=' railwam-sort-selected';}}else{elm.
asc=!0;elm.className=elm.className.replace(' railwam-sort-selected','');}});$('.railwam-sort-icon').not(sortIcon).html('<use xlink:href="#railwam-unsorted"/>');const entriesElm=$('#railwam-database-entries');entriesElm.find('.railwam-database-entrytable').sort(function(a,b){if(isNaN(local.math.parseNum($(a).attr(id)))===true&&isNaN(local.math.parseNum($(b).attr(id)))===true){if(dir==='asc'){return local.math.parseNum($(a).attr('date-id'))-local.math.parseNum($(b).attr('date-id'));}else{return local.math.parseNum($(b).attr('date-id'))-local.math.parseNum($(a).attr('date-id'));}}if(isNaN(local.math.parseNum($(a).attr(id)))===true){return 1;}else if(isNaN(local.math.parseNum($(b).attr(id)))===true){return-1;}if(dir==='asc'){return local.math.parseNum($(a).attr(id))-local.math.parseNum($(b).attr(id));}else{return local.math.parseNum($(b).attr(id))-local.math.parseNum($(a).attr(id));}}).appendTo(entriesElm);mw.hook('rw.db.entriesSorted').fire();},timeLeft:function(sec){const cancelBtnElm=
$('#railwam-database-cancel'),loadingElm=$('#railwam-database-loading'),loadingTextElm=$('#railwam-database-loading-text'),noEntryElm=$('#railwam-database-noentry'),noEntryTextElm=$('#railwam-database-noentry-text'),logAfterElm=$('#railwam-util-logafter');if(sec===0){loadingTextElm.empty();loadingElm.css('display','none');if($('.railwam-database-entrytable').length<1){noEntryElm.css('display','block');noEntryTextElm.text(i18n.msg('noEntry').plain());logAfterElm.css('display','none');}else{noEntryElm.css('display','none');}$('#railwam-database-searchfield-min').removeAttr('readonly');$('#railwam-database-searchfield-max').removeAttr('readonly');$('#railwam-database-searchside-container .railwam-util-tab-container').css('pointer-events','auto');$('#railwam-database-searchtype option:not(:checked)').attr('disabled',false);$('#railwam-database-loggedonly').attr('disabled',false);$('#railwam-database-searchside-container').removeClass('railwam-util-disabled');$('.railwam-datepicker').css(
'display','block');}else{loadingTextElm.text(local.time.createTimer(rw.math.convertTime(sec)));if(cancelBtnElm.length<1){loadingElm.append('<div class="railwam-util-btn railwam-util-btn-hasbg" id="railwam-database-cancel">'+i18n.msg('cancel').plain()+'</div>');$('#railwam-database-cancel').click(function(){rw.data.cancel('get');loadingTextElm.text(i18n.msg('duringCancel').plain());$(this).remove();});}loadingElm.css('display','block');noEntryElm.css('display','none');logAfterElm.css('display','none');}},validate:function(inputElm,type,errorContainer){var input=inputElm.val().trim().length>0?local.math.parseNum(inputElm.val().trim()):'',isValid=!1;local.input.clearErrors(errorContainer);switch(type){case'range':if(typeof dpStartDate!=='number'||typeof dpEndDate!=='number'){local.input.error(i18n.msg('errorSelectRange').plain(),'range',errorContainer);inputElm.addClass('railwam-util-input-error');}inputElm.removeClass('railwam-util-input-error');isValid=!0;break;case'score':if(input
!==''){if(isNaN(input)===true){local.input.error(i18n.msg('errorScoreValidChars').plain(),'char',errorContainer);inputElm.addClass('railwam-util-input-error');}else if(input<0||input>100){local.input.error(i18n.msg('errorScoreValidRange').plain(),'tooHighOrLow',errorContainer);inputElm.addClass('railwam-util-input-error');}}inputElm.removeClass('railwam-util-input-error');isValid=!0;break;case'rank':case'vertRank':if(input!==''){if(isNaN(input)===true){local.input.error(i18n.msg('errorRankValidChars').plain(),'char',errorContainer);inputElm.addClass('railwam-util-input-error');}else if(input<1||input>5000){local.input.error(i18n.msg('errorRankValidRange').plain(),'tooHighOrLow',errorContainer);inputElm.addClass('railwam-util-input-error');}}inputElm.removeClass('railwam-util-input-error');isValid=!0;}if(isValid===true){mw.hook('rw.db.inputValid').fire();}else{mw.hook('rw.db.inputInvalid').fire();}return isValid;},};local.datepicker={init:function(id,min,y){min=isNaN(local.math.
parseNum(min))===!1?min:rw.config.minDate;const datepicker=$('#railwam-datepicker-'+id),minY=new Date(min*1000).getUTCFullYear();if(datepicker.children().length===0){y=y||curDate.getUTCFullYear();datepicker.append('<div class="railwam-datepicker-year-select-cont"><select class="railwam-datepicker-year-selector"></select></div><table class="railwam-datepicker-week-header"><thead><tr><th>'+i18n.msg('sundayAbbrev').plain()+'</th><th>'+i18n.msg('mondayAbbrev').plain()+'</th><th>'+i18n.msg('tuesdayAbbrev').plain()+'</th><th>'+i18n.msg('wednesdayAbbrev').plain()+'</th><th>'+i18n.msg('thursdayAbbrev').plain()+'</th><th>'+i18n.msg('fridayAbbrev').plain()+'</th><th>'+i18n.msg('saturdayAbbrev').plain()+'</th></tr></thead></table><div class="railwam-datepicker-scroll-container"></div>');for(var i=curDate.getUTCFullYear();i>=minY;i--){$('.railwam-datepicker-year-selector').append('<option val="'+i+'">'+i+'</option>');}$('.railwam-datepicker-week-header').css('width',datepicker.width()-
scrollbarWidth);datepicker.css('padding-left',scrollbarWidth);$('.railwam-datepicker-year-select-cont',datepicker).css('padding-right',scrollbarWidth);local.datepicker.populateYear(y,dpStartDate,dpEndDate,id,min);local.datepicker.addEvents(id,min);}},addEvents:function(id,min){var curMonth=curDate.getUTCMonth(),curYear=curDate.getUTCFullYear();$('#railwam-datepicker-'+id).siblings('.railwam-util-input').change(function(){if($(this).val()===''){$(this).removeClass('railwam-util-hasVal');}else{$(this).addClass('railwam-util-hasVal');}});$('#railwam-datepicker-'+id).siblings('.railwam-util-input').focus(function(){$(this).addClass('railwam-util-hasVal');$('#railwam-datepicker-'+id).css({'opacity':1,'pointer-events':'auto','visibility':'visible'});});body.on('click','#railwam-datepicker-'+id+' .railwam-datepicker-days th:not(:empty)',function(){const adjY=curYear+Math.floor(curMonth/12);var m=local.math.parseNum($(this).parents('.railwam-datepicker-month-calendar').attr('month-id'));if($(
this).text()!==''){const dpStartDateElm=$('#railwam-datepicker-startdate',$('#railwam-datepicker-'+id)),dpEndDateElm=$('#railwam-datepicker-enddate',$('#railwam-datepicker-'+id)),rangeInputElm=$('#railwam-datepicker-'+id).siblings('.railwam-util-input');if(typeof dpStartDate==='number'&&Date.UTC(adjY,m,$(this).text())/1000>dpStartDate){if(dpEndDate!==''){dpStartDateElm.attr('id','');dpEndDateElm.attr('id','');$('#railwam-datepicker-'+id+' .railwam-datepicker-selected').css('background','').removeClass('railwam-datepicker-selected');$(this).attr('id','railwam-datepicker-startdate');dpStartDate=Date.UTC(adjY,m,$(this).text())/1000;dpEndDate='';}else{if(dpStartDateElm.length>0){if(local.math.parseNum(dpStartDateElm.parents('.railwam-datepicker-month-calendar').attr('month-id'))===m){if(dpStartDateElm.parent()[0]===$(this).parent()[0]){(dpStartDateElm.nextUntil($(this))).addClass('railwam-datepicker-selected');}else{$('th:not(:empty)',((dpStartDateElm.parent()).nextUntil($(this).parent()))
).addClass('railwam-datepicker-selected');dpStartDateElm.nextAll('th:not(:empty)').addClass('railwam-datepicker-selected');$(this).prevAll('#railwam-datepicker-'+id+' .railwam-datepicker-days th:not(:empty)').addClass('railwam-datepicker-selected');}}else{dpStartDateElm.nextAll('th:not(:empty)').addClass('railwam-datepicker-selected');dpStartDateElm.parent().nextUntil($('.railwam-datepicker-days tr:last-child')).addClass('railwam-datepicker-selected');if(typeof dpStartDateElm.parent().siblings('tr:last-child')[0]==='object'){$('.railwam-datepicker-days tr:last-child th:not(:empty)',$('#railwam-datepicker-month-'+dpStartDateElm.parents('.railwam-datepicker-month-calendar').attr('month-id'))).addClass('railwam-datepicker-selected');}$(this).prevAll('#railwam-datepicker-'+id+' .railwam-datepicker-days th:not(:empty)').addClass('railwam-datepicker-selected');$('th:not(:empty)',$(this).parent().prevAll()).addClass('railwam-datepicker-selected');for(var i=local.math.parseNum(dpStartDateElm.
parents('.railwam-datepicker-month-calendar').attr('month-id'))+1;i<m;i++){$('#railwam-datepicker-month-'+i+' .railwam-datepicker-days th:not(:empty)').addClass('railwam-datepicker-selected');}}}else{$(this).prevAll('#railwam-datepicker-'+id+' .railwam-datepicker-days th:not(:empty)').addClass('railwam-datepicker-selected');$('th:not(:empty)',$(this).parent().prevAll()).addClass('railwam-datepicker-selected');$('th:not(:empty)',$(this).parents('.railwam-datepicker-month-calendar').prevAll()).addClass('railwam-datepicker-selected');}$('#railwam-datepicker-'+id+' .railwam-datepicker-selected').css('background',local.color.changeOpacity(local.color.lighten(headerBgColor,60),0.7));$(this).attr('id','railwam-datepicker-enddate');dpEndDate=Date.UTC(adjY,m,$(this).text())/1000;const minWidth=local.css.getTextWidth(local.date.formatDate(dpStartDate)+' - '+local.date.formatDate(dpEndDate),rangeInputElm.css('font'));if(minWidth>rangeInputElm.width()){rangeInputElm.width(minWidth);}}}else{
dpStartDateElm.attr('id','');dpEndDateElm.attr('id','');$(this).attr('id','railwam-datepicker-startdate');dpStartDate=Date.UTC(adjY,m,$(this).text())/1000;dpEndDate='';$('#railwam-datepicker-'+id+' .railwam-datepicker-selected').css('background','').removeClass('railwam-datepicker-selected');}}$('#railwam-datepicker-'+id).siblings('.railwam-util-input').change();mw.hook('rw.dp.dayClicked').fire();});body.on('change','.railwam-datepicker-year-selector',function(){curYear=local.math.parseNum($(this).val());local.datepicker.populateYear(curYear,dpStartDate,dpEndDate,id,min);mw.hook('rw.dp.yearChanged').fire();});body.on('mousedown',function(evt){if($(evt.target).closest('#railwam-datepicker-'+id).length===0&&$(evt.target).closest($('#railwam-datepicker-'+id).siblings('.railwam-util-input')).length===0){if($('#railwam-datepicker-'+id).css('visibility')==='visible'){$('#railwam-datepicker-'+id).css({'opacity':0,'pointer-events':'none','visibility':'hidden'});mw.hook('rw.dp.datepickerClosed'
).fire();}if($('#railwam-datepicker-'+id).siblings('.railwam-util-input').val()===''){$('#railwam-datepicker-'+id).siblings('.railwam-util-input').removeClass('railwam-util-hasVal');}}else{if($('#railwam-datepicker-'+id).css('visibility')==='hidden'){$('#railwam-datepicker-'+id).css({'opacity':1,'pointer-events':'auto','visibility':'visible'});mw.hook('rw.dp.datepickerOpened').fire();}mw.hook('rw.dp.datepickerClicked').fire();}});},populateYear:function(y,startDate,endDate,id,min){if($('.railwam-datepicker').length>0){const datepicker=$('#railwam-datepicker-'+id).length>0?$('#railwam-datepicker-'+id):$('.railwam-datepicker'),minDate=new Date(min*1000);$('.railwam-datepicker-scroll-container',datepicker).empty();var m=0;while((m<=11&&y<curDate.getUTCFullYear())||(m<=curDate.getUTCMonth()&&y===curDate.getUTCFullYear())){if(y>minDate.getUTCFullYear()||(m>=minDate.getUTCMonth()&&y===minDate.getUTCFullYear())){$('.railwam-datepicker-scroll-container',datepicker).append(
'<div class="railwam-datepicker-month-calendar" id="railwam-datepicker-month-'+m+'" month-id="'+m+'"><div class="railwam-datepicker-month-container"><span class="railwam-datepicker-monthname"></span></div><table class="railwam-datepicker-day-table"><tbody class="railwam-datepicker-days"></tbody></table></div>');const dayContainerElm=$('#railwam-datepicker-month-'+m+' .railwam-datepicker-days',datepicker);$('#railwam-datepicker-month-'+m+' .railwam-datepicker-monthname',datepicker).text(local.date.getMonthName(m)+' '+y);$('.WikiaArticle').css('overflow','visible');dayContainerElm.append('<tr></tr>');const firstDate=new Date(y,m,1);if(firstDate.getDay()>0){while(firstDate.getDay()>0){$('#railwam-datepicker-month-'+m+' .railwam-datepicker-days tr',datepicker).prepend('<th></th>');firstDate.setDate(firstDate.getDate()-1);}}const startDateObj=new Date(startDate*1000),endDateObj=new Date(endDate*1000);for(var i=0;i<local.date.getDaysInMonth(m,y);i++){var startEndId='',day=i+1;if(startDateObj
.getUTCDate()===day&&startDateObj.getUTCMonth()===m&&startDateObj.getUTCFullYear()===y){startEndId=' id="railwam-datepicker-startdate"';}if(endDateObj.getUTCDate()===day&&endDateObj.getUTCMonth()===m&&endDateObj.getUTCFullYear()===y){startEndId=' id="railwam-datepicker-enddate"';}if((curDate.getUTCMonth()===m&&curDate.getUTCFullYear()===y&&curDate.getUTCDate()<day)||(minDate.getUTCMonth()===m&&minDate.getUTCFullYear()===y&&minDate.getUTCDate()>day)){day='';}if(typeof day==='number'){if($('#railwam-datepicker-month-'+m+' .railwam-datepicker-days tr:last-child th',datepicker).length===7){dayContainerElm.append('<tr><th'+startEndId+'>'+day+'</th></tr>');}else{$('#railwam-datepicker-month-'+m+' .railwam-datepicker-days tr:last-child',datepicker).append('<th'+startEndId+'>'+day+'</th>');}}}while($('#railwam-datepicker-month-'+m+' .railwam-datepicker-days tr:last-child th',datepicker).length<7){$('#railwam-datepicker-month-'+m+' .railwam-datepicker-days tr:last-child',datepicker).append(
'<th></th>');}const startDateElm=$('#railwam-datepicker-month-'+m+' #railwam-datepicker-startdate',datepicker),endDateElm=$('#railwam-datepicker-month-'+m+' #railwam-datepicker-enddate',datepicker);if(startDateElm.length>0){if(endDateElm.length>0){if(startDateElm.parent()[0]===endDateElm.parent()[0]){(startDateElm.nextUntil(endDateElm)).addClass('railwam-datepicker-selected');}else{$('#railwam-datepicker-month-'+m+' th:not(:empty)',(startDateElm.parent()).nextUntil(endDateElm.parent())).addClass('railwam-datepicker-selected');startDateElm.nextAll('th:not(:empty)').addClass('railwam-datepicker-selected');endDateElm.prevAll('.railwam-datepicker-days th:not(:empty)').addClass('railwam-datepicker-selected');}}else if(isNaN(local.math.parseNum(endDate))===false){startDateElm.nextAll('th:not(:empty)').addClass('railwam-datepicker-selected');$('th:not(:empty)',(startDateElm.parent()).nextAll()).addClass('railwam-datepicker-selected');}}else{if(endDateElm.length>0){endDateElm.prevAll(
'.railwam-datepicker-days th:not(:empty)').addClass('railwam-datepicker-selected');$('th:not(:empty)',(endDateElm.parent()).prevAll()).addClass('railwam-datepicker-selected');}else if(new Date(y,m,1).getTime()/1000>startDate&&new Date(y,m+1,-1).getTime()/1000<endDate){$('#railwam-datepicker-month-'+m+' .railwam-datepicker-days th:not(:empty)').addClass('railwam-datepicker-selected');}}$('#railwam-datepicker-month-'+m+' .railwam-datepicker-selected',datepicker).css('background',local.color.changeOpacity(local.color.lighten(headerBgColor,60),0.7));}m++;}}mw.hook('rw.dp.yearPopulated').fire();},};local.dashboard={init:function(){if(railWAM.top5000Mode===true){rw.data.getLogged({log:railWAM.logPage,success:local.dashboard.getFullData,error:local.dashboard.getFullData,});}else if(railWAM.top5000Mode===false){rw.data.getLogged({log:railWAM.logPage,success:local.dashboard.getMinData,error:local.dashboard.getMinData,});}},getFullData:function(logged){rw.data.get({wikiId:mwConfig.wgCityId,
startDate:rw.config.maxDate,endDate:rw.config.maxDate,logged:logged,wikis:1,callback:function(data){if($.isEmptyObject(data[rw.config.maxDate])===false){if(wamDate-rw.config.maxDate>86400*2){data[rw.config.maxDate-86400]=data[rw.config.maxDate];}local.dashboard.insertHTML(data,rw.config.maxDate);}else{local.dashboard.getMinData(logged);}}});},getMinData:function(logged){rw.data.getLess({fixedWamDate:!0,wikiId:mwConfig.wgCityId,logged:logged,callback:function(data){local.dashboard.insertHTML(data,wamDate);},});},insertHTML:function(data,dateId){data[dateId]=$.extend({},{vertical_wam_rank:null,wam:null,wam_rank:null,},data[dateId]);data[dateId-86400]=$.extend({},{vertical_wam_rank:null,wam:null,wam_rank:null,},data[dateId-86400]);$.each(data,function(id,obj){$.each(obj,function(key,val){if(key==='wam'&&(isNaN(local.math.parseNum(val))===true||local.math.parseNum(val)>100||local.math.parseNum(val)<0)){data[id][key]=i18n.msg('unknown').plain();}else if((key==='wam_rank'||key===
'vertical_wam_rank')&&(isNaN(local.math.parseNum(val))===true||local.math.parseNum(val)>5000||local.math.parseNum(val)<0)){data[id][key]=i18n.msg('unknown').plain();}});});$('title').text('RailWAM: '+i18n.msg('dashboard').plain()+fandomTitle);$('.page-header__title').text('RailWAM: '+i18n.msg('dashboard').plain());const scoreElm='<div id="railwam-dashboard-score-container" class="railwam-dashboard-data-flex-item railwam-dashboard-card"><div class="railwam-inline-block"><div class="railwam-module-label">'+i18n.msg('score').plain()+'</div><div class="railwam-module-val">'+data[dateId].wam+'</div></div><div class="railwam-module-data-container"><span id="railwam-score-difference">+/- '+i18n.msg('unknown').plain()+'</span></div></div>',rankElm='<div id="railwam-dashboard-rank-container" class="railwam-dashboard-data-flex-item railwam-dashboard-card"><div class="railwam-inline-block"><div class="railwam-module-label">'+i18n.msg('rank').plain()+'</div><div class="railwam-module-val">'+data[
dateId].wam_rank+'</div></div><div class="railwam-module-data-container"><span id="railwam-rank-difference">+/- '+i18n.msg('unknown').plain()+'</span></div></div>',vertRankElm='<div id="railwam-dashboard-vertRank-container" class="railwam-dashboard-data-flex-item railwam-dashboard-card"><div class="railwam-inline-block"><div class="railwam-module-label">'+i18n.msg('vertRank').plain()+'</div><div class="railwam-module-val">'+data[dateId].vertical_wam_rank+'</div></div><div class="railwam-module-data-container"><span id="railwam-vertRank-difference">+/- '+i18n.msg('unknown').plain()+'</span></div></div>';$('#mw-content-text').html('<div class="railwam-flex-container" id="railwam-dashboard-wam-container">'+scoreElm+rankElm+vertRankElm+'</div><span id="railwam-not-logged">'+i18n.msg('yesterdayNotLogged').plain()+
'</span><div class="railwam-flex-container railwam-dashboard-card"><div id="railwam-dashboard-wam-graph-container"><canvas id="railwam-dashboard-wam-chart"></canvas></div><div id="railwam-dashboard-graph-link-container"><span class="railwam-dashboard-jumbo-heading">'+i18n.msg('dashGraphHeading').plain()+'</span><span class="railwam-dashboard-jumbo-desc">'+i18n.msg('dashGraphDesc').plain()+'</span><a class="railwam-wds wds-button" href="'+mwConfig.wgServer+'/wiki/Special:BlankPage/RailWAM/Graph">'+i18n.msg('dashGraphBtn').plain()+'</a></div></div><div id="railwam-dashboard-database-container" class="railwam-dashboard-card"><span class="railwam-dashboard-jumbo-heading">'+i18n.msg('database').plain()+'</span><span class="railwam-dashboard-jumbo-desc">'+i18n.msg('dashDatabaseDesc').plain()+'</span><a class="railwam-wds wds-button" href="'+mwConfig.wgServer+'/wiki/Special:BlankPage/RailWAM/Database">'+i18n.msg('wamDatabase').plain()+
'</a></div><div id="railwam-dashboard-util-section-container"><div class="railwam-flex-container"><div class="railwam-dashboard-util-container railwam-dashboard-card"><div class="railwam-dashboard-util-icon-container"><svg class="railwam-dashboard-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 563 500" id="railwam-log-old-icon"><use xlink:href="#railwam-log-old"/></svg></div><div class="railwam-dashboard-util-desc">'+i18n.msg('dashLogDesc').plain()+'</div><a class="railwam-wds wds-button" href="'+mwConfig.wgServer+'/wiki/Special:BlankPage/RailWAM/Log">'+i18n.msg('dashLogBtn').plain()+'</a></div><div class="railwam-dashboard-util-container railwam-dashboard-card"><div class="railwam-dashboard-util-icon-container"><svg class="railwam-dashboard-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500" id="railwam-docs-icon"><use xlink:href="#railwam-docs"/></svg></div><div class="railwam-dashboard-util-desc">'+i18n.msg('dashDocsDesc').plain()+
'</div><a class="railwam-wds wds-button" href="//dev.fandom.com/wiki/RailWAM">'+i18n.msg('dashDocsBtn').plain()+'</a></div><div class="railwam-dashboard-util-container railwam-dashboard-card"><div class="railwam-dashboard-util-icon-container"><svg class="railwam-dashboard-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500" id="railwam-faq-icon"><use xlink:href="#railwam-faq"/></svg></div><div class="railwam-dashboard-util-desc">'+i18n.msg('dashFaqDesc').plain()+'</div><a class="railwam-wds wds-button" id="railwam-dashboard-faq-link">'+i18n.msg('dashFaqBtn').plain()+'</a></div></div></div>');$('#railwam-dashboard-faq-link').click(function(){local.faq.display();});const scoreDiff=data[dateId].wam-data[dateId-86400].wam;var scoreDiffSvg=rw.math.diff(scoreDiff),scorePercent=(((Math.abs(local.math.parseNum(data[dateId].wam)-local.math.parseNum(data[dateId-86400].wam))/local.math.parseNum(data[dateId-86400].wam))*100).toFixed(1)+'%').replace('NaN','N/A');if(local.math.parseNum(data
[dateId-86400].wam)===0){if(local.math.parseNum(data[dateId].wam===0)){scorePercent='0.0%';}else{scorePercent='N/A%';}}scoreDiffSvg=typeof scoreDiffSvg==='string'?scoreDiffSvg.replace(/> (\d|\.)*$/,'> '+(local.math.parseNum((scoreDiffSvg.match(/> (\d|\.)*$/)[0]).replace('> ',''))).toFixed(4)):NaN;const scoreDiffElm='<div class="railwam-inline-block">'+scoreDiffSvg+'<br>'+scorePercent+'</div>';if(railWAM.showChange===true){if(typeof scoreDiffSvg==='string'){$('#railwam-score-difference').html(scoreDiffElm);}}else{$('#railwam-score-difference').remove();}const scoreArrow=$('#railwam-score-difference .railwam-arrow');scoreArrow.remove();$('#railwam-score-difference > div').before(scoreArrow);if(scoreArrow.length>0){const scoreContainer=$('#railwam-dashboard-score-container');scoreContainer.css('border-top','4px solid '+local.color.changeOpacity(scoreArrow.css('fill'),0.5));}const rankDiff=data[dateId].wam_rank-data[dateId-86400].wam_rank,rankDiffSvg=rw.math.diff(0,rankDiff);var rankPercent
=(((Math.abs(local.math.parseNum(data[dateId].wam_rank)-local.math.parseNum(data[dateId-86400].wam_rank))/local.math.parseNum(data[dateId-86400].wam_rank))*100).toFixed(1)+'%').replace('NaN','N/A');if(local.math.parseNum(data[dateId-86400].wam_rank)===0){if(local.math.parseNum(data[dateId].wam_rank===0)){rankPercent='0.0%';}else{rankPercent='N/A%';}}const rankDiffElm='<div class="railwam-inline-block">'+rankDiffSvg+'<br>'+rankPercent;if(railWAM.showChange===true){if(typeof rankDiffSvg==='string'){$('#railwam-rank-difference').html(rankDiffElm);}}else{$('#railwam-rank-difference').remove();}const rankArrow=$('#railwam-rank-difference .railwam-arrow');rankArrow.remove();$('#railwam-rank-difference > div').before(rankArrow);if(rankArrow.length>0){const rankContainer=$('#railwam-dashboard-rank-container');rankContainer.css('border-top','4px solid '+local.color.changeOpacity(rankArrow.css('fill'),0.5));}const vertRankDiff=data[dateId].vertical_wam_rank-data[dateId-86400].vertical_wam_rank,
vertRankDiffSvg=rw.math.diff(0,vertRankDiff);var vertRankPercent=(((Math.abs(local.math.parseNum(data[dateId].vertical_wam_rank)-local.math.parseNum(data[dateId-86400].vertical_wam_rank))/local.math.parseNum(data[dateId-86400].vertical_wam_rank))*100).toFixed(1)+'%').replace('NaN','N/A');if(local.math.parseNum(data[dateId-86400].vertical_wam_rank)===0){if(local.math.parseNum(data[dateId].vertical_wam_rank===0)){vertRankPercent='0.0%';}else{vertRankPercent='N/A%';}}const vertRankDiffElm='<div class="railwam-inline-block">'+vertRankDiffSvg+'<br>'+vertRankPercent;if(railWAM.showChange===true){if(typeof vertRankDiffSvg==='string'){$('#railwam-vertRank-difference').html(vertRankDiffElm);}}else{$('#railwam-vertRank-difference').remove();}const vertRankArrow=$('#railwam-vertRank-difference .railwam-arrow');vertRankArrow.remove();$('#railwam-vertRank-difference > div').before(vertRankArrow);if(vertRankArrow.length>0){const vertRankContainer=$('#railwam-dashboard-vertRank-container');
vertRankContainer.css('border-top','4px solid '+local.color.changeOpacity(vertRankArrow.css('fill'),0.5));}if(typeof scoreDiffSvg==='string'||typeof rankDiffSvg==='string'||typeof vertRankDiffSvg==='string'||railWAM.showChange===false){$('#railwam-not-logged').css('display','none');}else{$('#railwam-not-logged').css('display','block');}local.graph.insertChart({name:'railwam-dashboard-wam-chart',data:data,startDate:rw.config.maxDate-(29*86400),endDate:rw.config.maxDate,type:'score',selector:'#railwam-dashboard-wam-chart',title:i18n.msg('dashGraphTitle').plain(),});mw.hook('rw.dash.uiAdded').fire();}};local.faq={display:function(){const faqObj={title:'RailWAM: '+i18n.msg('faqTitle').plain(),items:[{name:i18n.msg('sectionWAM').plain(),head1:i18n.msg('quesWhatIsWAM').plain(),cnt1:i18n.msg('ansWhatIsWAM').plain(),head2:i18n.msg('quesCalcWAM').plain(),cnt2:i18n.msg('ansCalcWAM').plain(),head3:i18n.msg('quesImproveWAM').plain(),cnt3:i18n.msg('ansImproveWAM','<a href="//'+i18n.msg(
'communityLinkPrefix').plain()+'.wikia.com" target="_blank" rel="noopener noreferrer">'+i18n.msg('communityLinkText').plain()+'</a>').plain(),head4:i18n.msg('quesScoreZero').plain(),cnt4:i18n.msg('ansScoreZero').plain()},{name:'RailWAM',head1:i18n.msg('quesWhatIsRailWAM').plain(),cnt1:i18n.msg('ansWhatIsRailWAM','<a href="//dev.fandom.com/wiki/RailWAM" target="_blank" rel="noopener noreferrer">'+i18n.msg('docLinkText').plain()+'</a>').plain(),head2:i18n.msg('quesInstallRailWAM').plain(),cnt2:i18n.msg('ansInstallRailWAM','<a href="//dev.fandom.com/wiki/RailWAM" target="_blank" rel="noopener noreferrer">'+i18n.msg('docLinkText').plain()+'</a>').plain(),head3:i18n.msg('quesCreators').plain(),cnt3:i18n.msg('ansCreators','<a href="//community.fandom.com/wiki/User:Blaster_Niceshot" target="_blank" rel="noopener noreferrer">Blaster Niceshot</a>','<a href="//community.fandom.com/wiki/User:Demotivator" target="_blank" rel="noopener noreferrer">Demotivator</a>').plain(),},{name:i18n.msg(
'databaseAlt').plain(),head1:i18n.msg('quesWhatIsDatabase').plain(),cnt1:'<p>'+i18n.msg('ansWhatIsDatabaseIntro').plain()+'</p><h2>'+i18n.msg('ansWhatIsDatabaseUseHeading').plain()+'</h2><p>'+i18n.msg('ansWhatIsDatabaseInstructions').plain()+'</p><p>'+i18n.msg('ansWhatIsDatabaseMoreInfo').plain()+'</p>',head2:i18n.msg('quesSearchTime').plain(),cnt2:'<p>'+i18n.msg('searchTimeSummary').plain()+'</p><h2>'+i18n.msg('detailedFormula').plain()+'</h2>'+i18n.msg('searchTimeExp1').plain()+'<span class="railwam-math">T<sub>'+i18n.msg('requests').plain()+'</sub> = T<sub>'+i18n.msg('days').plain()+'</sub> + 1</span>'+i18n.msg('searchTimeExp2').plain()+'<span class="railwam-math">t<sub>'+i18n.msg('seconds').plain()+'</sub> = (T<sub>'+i18n.msg('requests').plain()+'</sub> - 2) ⋅ 10</span><p>'+i18n.msg('or').plain()+'</p><span class="railwam-math">t<sub>'+i18n.msg('seconds').plain()+'</sub> = (T<sub>'+i18n.msg('days').plain()+'</sub> - 1) ⋅ 10</span>',},{name:i18n.msg('dashGraphHeading').plain(),
head1:i18n.msg('quesHowToGraph').plain(),cnt1:i18n.msg('ansHowToGraph').plain(),head2:i18n.msg('quesGraphBlank').plain(),cnt2:i18n.msg('ansGraphBlank').plain(),},{name:i18n.msg('logOldHeading').plain(),head1:i18n.msg('quesHowToLogOldData').plain(),cnt1:i18n.msg('ansHowToLogOldData').plain(),head2:i18n.msg('quesNoOldData').plain(),cnt2:i18n.msg('ansNoOldData').plain(),}]};if(windowWidth>768){local.faq.createModal(faqObj);}else{$.showCustomModal('RailWAM: '+i18n.msg('faqTitle').plain(),i18n.msg('faqWelcome','<a href="//community.fandom.com/wiki/WAM/FAQ" target="_blank" rel="noopener noreferrer">'+i18n.msg('faqLinkText').plain()+'</a>').plain()+'<br>',{id:'railwam-modal-body-mobile',width:windowWidth*0.7,});local.faq.addHeaders(faqObj,'#railwam-modal-body-mobile .modalContent',true);}mw.hook('rw.faq.modalAdded').fire();},createModal:function(dataObj){const modalBase=
'<div id="railwam-modal-overlay"><div id="railwam-modal-body"><div id="railwam-modal-sidebar"><span class="railwam-modal-sidebar-item" id="railwam-modal-sidebar-home">'+i18n.msg('home').plain()+'</span></div><div id="railwam-modal-content-container"><div id="railwam-modal-footer">RailWAM | <a href="//dev.fandom.com/wiki/RailWAM" target="_blank">'+i18n.msg('documentation').plain()+'</a> | <a href="//dev.fandom.com/wiki/Talk:RailWAM" target="_blank">'+i18n.msg('reportBug').plain()+'</a></div></div></div></div>';$(modalBase).hide().appendTo('body').fadeIn(100);$('#railwam-modal-body').css({'width':(0.7*windowWidth)+'px','background':pageBgColor});body.css('overflow','hidden');$('#railwam-modal-body').append('<svg id="railwam-modal-close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 39 43"><path id="railwam-x" fill="'+bodyTextColor+
'" stroke-width="0" d="M 7.82,0.60 C 11.11,1.98 17.11,14.21 19.45,17.73 21.15,13.93 27.71,2.16 31.32,0.57 32.95,-0.14 35.91,-0.36 36.27,2.36 36.27,2.36 24.36,21.00 24.36,21.00 24.36,21.00 30.00,29.00 30.00,29.00 30.00,29.00 36.91,40.73 36.91,40.73 36.00,42.82 33.89,43.12 32.09,42.40 27.97,40.75 21.84,28.75 19.36,24.64 17.84,28.61 10.49,40.88 6.73,42.45 4.99,43.18 2.45,42.55 2.27,39.64 2.27,39.64 9.00,29.00 9.00,29.00 9.00,29.00 14.91,21.36 14.91,21.36 14.91,21.36 2.82,2.64 2.82,2.64 3.00,-0.27 6.09,-0.13 7.82,0.60 Z" /></svg>');$('#railwam-modal-close').click(function(){$('#railwam-modal-overlay').fadeOut(100,function(){$(this).remove();body.css('overflow',bodyOverflow);});});$('#railwam-modal-content-container').append('<span id="railwam-modal-title">'+dataObj.title+'</span>');local.faq.addHeaders(dataObj,'#railwam-modal-sidebar',false);if($('#railwam-modal-sidebar').height()!==$('#railwam-modal-sidebar')[0].scrollHeight){$('.railwam-modal-sidebar-item').trigger('click');}$(
'#railwam-modal-content-container').append('<span id="railwam-modal-navlink-container"><span class="railwam-modal-navlink" id="railwam-modal-navlink-home">'+i18n.msg('home').plain()+'</span><span> / </span></span>');$('#railwam-modal-content-container').append('<span id="railwam-modal-content-banner">'+i18n.msg('faqWelcomeShort').plain()+'</span>');var contentHeight=$('#railwam-modal-body').height();$('#railwam-modal-content-container').append('<span id="railwam-modal-content-area">'+i18n.msg('faqWelcome','<a href="//community.fandom.com/wiki/WAM/FAQ" target="_blank" rel="noopener noreferrer">'+i18n.msg('faqLinkText').plain()+'</a>').plain()+'</span>');$.each($('#railwam-modal-content-area').siblings(),function(i,thisSibling){contentHeight-=$(thisSibling).height();contentHeight-=$(thisSibling).css('margin-top').replace('px','');contentHeight-=$(thisSibling).css('margin-bottom').replace('px','');contentHeight-=$(thisSibling).css('padding-top').replace('px','');contentHeight-=$(
thisSibling).css('padding-bottom').replace('px','');});contentHeight-=$('#railwam-modal-content-area').css('padding-top').replace('px','');contentHeight-=$('#railwam-modal-content-area').css('padding-bottom').replace('px','');$('#railwam-modal-content-area').height(contentHeight);$('#railwam-modal-navlink-home').click(function(){local.faq.changePage(i18n.msg('faqWelcomeShort').plain(),i18n.msg('faqWelcome','<a href="//community.fandom.com/wiki/WAM/FAQ" target="_blank" rel="noopener noreferrer">'+i18n.msg('faqLinkText').plain()+'</a>').plain());});$('#railwam-modal-sidebar-home').click(function(){local.faq.changePage(i18n.msg('faqWelcomeShort').plain(),i18n.msg('faqWelcome','<a href="//community.fandom.com/wiki/WAM/FAQ" target="_blank" rel="noopener noreferrer">'+i18n.msg('faqLinkText').plain()+'</a>').plain());});},addHeaders:function(dataObj,appendTo,isMobile){const mobileFlag=isMobile===!0?'-mobile':'';$.each(dataObj.items,function(i,cur){$(appendTo).append(
'<ul id="railwam-modal-sidehead-'+i+mobileFlag+'" class="railwam-modal-sidehead'+mobileFlag+'"><span class="railwam-modal-sidebar-item'+mobileFlag+'">'+cur.name+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 28" class="railwam-modal-dropdown-arrow"><use xlink:href="#railwam-dropdown-arrow" fill="'+headerTextColor+'"/></svg></span><span class="railwam-modal-sidehead-container'+mobileFlag+'"></span></ul>');var degrees=180;$('#railwam-modal-sidehead-'+i+mobileFlag+' .railwam-modal-sidebar-item'+mobileFlag+' .railwam-modal-dropdown-arrow').css('transform','rotate(180deg)');$('#railwam-modal-sidehead-'+i+mobileFlag+' .railwam-modal-sidebar-item'+mobileFlag).click(function(){const headerContent=$(this).siblings('.railwam-modal-sidehead-container'+mobileFlag);headerContent.slideToggle(100);degrees+=180;$('.railwam-modal-dropdown-arrow',$(this)).css('transform','rotate('+degrees+'deg)');});$.each(cur,function(prop,val){if(prop.indexOf('head')!==-1){if(isMobile===false){$(
'#railwam-modal-sidehead-'+i+' .railwam-modal-sidehead-container').append('<li class="railwam-modal-sidehead-sub">'+val+'</li>');$('.railwam-modal-sidehead-sub:contains("'+val+'")').click(function(){local.faq.changePage(val,cur['cnt'+prop.replace('head','')]);});}else{$('#railwam-modal-sidehead-'+i+mobileFlag+' .railwam-modal-sidehead-container'+mobileFlag).append('<span><li class="railwam-modal-sidehead-sub'+mobileFlag+'">'+val+'</li><span class="railwam-modal-content'+mobileFlag+'">'+cur['cnt'+prop.replace('head','')]+'</span></span>');const modalWrapColor=local.color.getBgColor($('.modalWrapper'));$('.railwam-modal-sidebar-item-mobile').css('color',modalWrapColor);$('.railwam-modal-dropdown-arrow').css('fill',modalWrapColor);$('.railwam-modal-sidebar-item-mobile').focus(function(){$(this).css('background-color',local.color.changeOpacity(headerBgColor,0.4));});$('.railwam-modal-sidebar-item-mobile').focusout(function(){$(this).css('background-color',headerBgColor);});}}});});if(
isMobile===true){$('.railwam-modal-sidebar-item-mobile').trigger('click');}},changePage:function(banner,text){$('.railwam-modal-sidehead-sub-active').removeClass('railwam-modal-sidehead-sub-active');if(banner!=i18n.msg('faqWelcomeShort').plain()){$('.railwam-modal-sidehead-sub:contains("'+banner+'")').addClass('railwam-modal-sidehead-sub-active');}else{$('.railwam-modal-sidebar-item:contains("'+i18n.msg('home').plain()+'")').addClass('railwam-modal-sidehead-sub-active');}$('#railwam-modal-content-banner').text(banner);$('#railwam-modal-content-area').html(text);if($('#railwam-modal-navlink-page').length>0){if(banner!=i18n.msg('faqWelcomeShort').plain()){$('#railwam-modal-navlink-page').text($('.railwam-modal-sidebar-item',$('.railwam-modal-sidehead-sub:contains("'+banner+'")').closest('.railwam-modal-sidehead')).text());}else{$('#railwam-modal-navlink-page').remove();$('#railwam-modal-navlink-page-slash').remove();}}else{if(banner!=i18n.msg('faqWelcomeShort').plain()){$(
'#railwam-modal-navlink-container').append('<span class="railwam-modal-navlink" id="railwam-modal-navlink-page">'+$('.railwam-modal-sidebar-item',$('.railwam-modal-sidehead-sub:contains("'+banner+'")').closest('.railwam-modal-sidehead')).text()+'</span><span id="railwam-modal-navlink-page-slash"> / </span></span>');}}mw.hook('rw.faq.pageChanged').fire();},};local.graph={init:function(dateCreated){$('title').text('RailWAM: '+i18n.msg('dashGraphHeading').plain()+fandomTitle);$('.page-header__title').text('RailWAM: '+i18n.msg('dashGraphHeading').plain());$('.page-header__page-subtitle').html('< <a href="'+mwConfig.wgServer+'/wiki/Special:BlankPage/RailWAM/Dashboard">'+i18n.msg('dashboard').plain()+'</a>');rw.data.getLogged({log:railWAM.logPage,success:function(logged){local.graph.insertHTML(logged,dateCreated);},error:function(){local.graph.insertHTML({},dateCreated);},});},insertChart:function(settings){var typeProp;switch(settings.type){case'score':typeProp='wam';break;case'rank':
typeProp='wam_rank';break;case'vertRank':typeProp='vertical_wam_rank';break;}const chartData=[],chartLabels=[];var validPts=0,sameYear=new Date(settings.startDate*1000).getUTCFullYear()===new Date(settings.endDate*1000).getUTCFullYear();for(var id=settings.startDate;id<=settings.endDate;id+=86400){if(sameYear===true){chartLabels.push(local.date.formatDate(id+(curDate.getTimezoneOffset()*60)+3600,true).replace(/,.*$/,''));}else{chartLabels.push(local.date.formatDate(id+(curDate.getTimezoneOffset()*60)+3600,true));}if(typeof settings.data[id]==='object'&&isNaN(local.math.parseNum(settings.data[id][typeProp]))===false){chartData.push(settings.data[id][typeProp]);validPts++;}else{chartData.push(null);}}if(validPts>0){$(settings.selector).css('display','block');$(settings.selector).parent().removeClass('railwam-graph-nograph');$('.railwam-graph-nopoints-text',$(settings.selector).parent()).css('display','none');if(typeof charts[settings.name]==='undefined'||charts[settings.name]===null){
charts[settings.name]=new Chart($(settings.selector),{type:'line',data:{labels:chartLabels,datasets:[{label:i18n.msg(settings.type).plain(),data:chartData,backgroundColor:local.color.changeOpacity(linkTextColor,0.7),borderColor:linkTextColor,fill:!1,}]},options:{elements:{line:{tension:0,},point:{radius:1,pointBackgroundColor:local.color.lighten(linkTextColor,10),pointBorderColor:local.color.lighten(linkTextColor,20),},},layout:{padding:{left:10}},legend:{display:!1,},plugins:{avgLine:{showAvgLine:!0,},vertPosLine:{showVertPosLine:!0,},},scales:{xAxes:[{ticks:{fontColor:bodyTextColor,},}],yAxes:[{ticks:{fontColor:bodyTextColor,reverse:settings.type==='rank'||settings.type==='vertRank'?!0:false,},}]},title:{display:!0,fontColor:bodyTextColor,text:settings.title,},tooltips:{mode:'index',intersect:!1,callbacks:{label:function(tooltipItem,data){if(settings.type==='score'){return local.math.parseNum(tooltipItem.yLabel).toFixed(4);}else{return tooltipItem.yLabel;}},},},},});
mw.hook('rw.graph.chartAdded').fire();}else{charts[settings.name].data.labels=chartLabels;charts[settings.name].data.datasets[0].data=chartData;charts[settings.name].options.title.text=settings.title;charts[settings.name].options.scales.yAxes[0].ticks.reverse=settings.type==='rank'||settings.type==='vertRank'?true:!1;charts[settings.name].options.tooltips.callbacks.label=function(tooltipItem,data){if(settings.type==='score'){return local.math.parseNum(tooltipItem.yLabel).toFixed(4);}else{return tooltipItem.yLabel;}};charts[settings.name].update();mw.hook('rw.graph.chartUpdated').fire();}if(validPts<(settings.endDate-settings.startDate)/86400+1){if($('.railwam-graph-notlogged-text',$(settings.selector).parent()).length===0){$(settings.selector).after('<div class="railwam-graph-notlogged-text">'+i18n.msg('graphMissingPoints').plain()+'</div>');}$('.railwam-graph-notlogged-text',$(settings.selector).parent()).css('display','block');}else{$('.railwam-graph-notlogged-text',$(settings.
selector).parent()).css('display','none');}}else{if(typeof charts[settings.name]==='object'&&charts[settings.name]!==null){charts[settings.name].destroy();charts[settings.name]=null;mw.hook('rw.graph.chartDestroyed').fire();}if($('.railwam-graph-nopoints-text',$(settings.selector).parent()).length===0){$(settings.selector).after('<span class="railwam-graph-nopoints-text">'+i18n.msg('graphNotEnoughPoints').plain()+'</span>');}$('.railwam-graph-nopoints-text',$(settings.selector).parent()).css('display','block');$(settings.selector).css('display','none');$('.railwam-graph-notlogged-text',$(settings.selector).parent()).css('display','none');$(settings.selector).parent().addClass('railwam-graph-nograph');mw.hook('rw.graph.noPoints').fire();}},insertHTML:function(logged,dateCreated){$('#mw-content-text').html('<div class="railwam-flex-container"><div id="railwam-graph-options" class="railwam-graph-main-cont"><span class="railwam-util-heading">'+i18n.msg('customizeGraphHeading').plain()+
'</span><div class="railwam-util-tab-container"><div class="railwam-util-tab railwam-util-tab-active" tabval="score">'+i18n.msg('score').plain()+'</div><div class="railwam-util-tab" tabval="rank">'+i18n.msg('rank').plain()+'</div><div class="railwam-util-tab" tabval="vertRank">'+i18n.msg('vertRank').plain()+'</div></div><span class="railwam-util-filter railwam-graph-filter" id="railwam-graph-daterange-filter-cont"><input class="railwam-util-filter-input railwam-util-input" id="railwam-graph-daterange" type="text" required readonly="readonly"><div class="railwam-datepicker" id="railwam-datepicker-graphrange"></div><span class="railwam-util-placeholder railwam-util-filter-ph">'+i18n.msg('dateRange').plain()+'</span></span><div id="railwam-graph-errors"></div><div id="railwam-graph-loggedonly-container"><input type="checkbox" id="railwam-graph-loggedonly" checked><label for="railwam-graph-loggedonly">'+i18n.msg('graphLoggedOnly').plain()+
'</label></div><a class="railwam-wds wds-button railwam-graph-create-btn-active" id="railwam-graph-create-btn">'+i18n.msg('graphBtn').plain()+'</a></div><div id="railwam-graph-container" class="railwam-graph-main-cont"><div id="railwam-util-logafter"><div id="railwam-util-logafter-text"><span class="railwam-bold">'+i18n.msg('logAfterHeader').plain()+'</span><span id="railwam-notlogged-text-warning">'+i18n.msg('notLoggedWarning').plain()+'</span></div><div class="railwam-util-btn" id="railwam-util-logafter-dismiss">'+i18n.msg('dismiss').plain()+'</div><div class="railwam-util-btn railwam-util-btn-hasbg" id="railwam-util-logafter-log">'+i18n.msg('logBtn').plain()+
'</div></div><canvas id="railwam-graph-wam-chart"></canvas><div id="railwam-graph-loading"><svg class="railwam-util-spinner" width="25" viewBox="-15 -15 30 30" xmlns="http://www.w3.org/2000/svg"> <g> <circle fill="none" stroke-width="1" stroke-linecap="round" r="10"></circle></g></svg><span id="railwam-graph-loading-text"></span></div></div></div>');local.datepicker.init('graphrange',dateCreated);mw.hook('rw.dp.dayClicked').add(function(){const displayRange=local.date.formatDate(dpStartDate)+' - '+local.date.formatDate(dpEndDate);$('#railwam-graph-daterange').val(displayRange).change();});$('#railwam-util-logafter-dismiss').click(function(){$('#railwam-util-logafter').fadeOut(200);mw.hook('rw.graph.logAlertDismissed').fire();});body.on('click','#railwam-util-logafter-log',function(){rw.data.log({data:logged,log:railWAM.logPage,summary:'[[w:c:dev:RailWAM|RailWAM]]: '+i18n.msg('logSummary').plain(),types:['wiki_id','wam','wam_rank','vertical_wam_rank'],addedBy:'RailWAM',version:3,bot:
botFlag,override:!0,});$('#railwam-util-logafter-text').text(i18n.msg('scoreLogged').plain());$('#railwam-util-logafter-log').remove();mw.hook('rw.graph.dataLogged').fire();});body.on('click','.railwam-graph-create-btn-active',function(){const canvasSelector='railwam-graph-wam-chart',displayRange=local.date.formatDate(dpStartDate)+' - '+local.date.formatDate(dpEndDate),graphType=$('.railwam-util-tab-active').attr('tabval'),graphTitle=(function(){switch(graphType){case'score':return i18n.msg('scoreGraphTitle',displayRange).plain();case'rank':return i18n.msg('rankGraphTitle',displayRange).plain();case'vertRank':return i18n.msg('vertRankGraphTitle',displayRange).plain();}})(),loggedOnly=$('#railwam-graph-loggedonly').is(':checked');var showLogAfter=!1;if(typeof dpStartDate!=='number'||typeof dpEndDate!=='number'){local.input.error(i18n.msg('errorSelectRange').plain(),'range','#railwam-graph-errors');}else{local.input.clearErrors('#railwam-graph-errors');$(
'.railwam-graph-nopoints-text').css('display','none');if(loggedOnly===true){for(var id=dpStartDate;id<=dpEndDate;id+=86400){if(typeof logged[id]==='object'&&logged[id].logged===false){showLogAfter=!0;}}if(showLogAfter===true&&railWAM.showLogAlert===true){$('#railwam-util-logafter').css('display','block');if($('#railwam-util-logafter-log').length===0){$('#railwam-util-logafter').html('<div id="railwam-util-logafter-text"><span class="railwam-bold">'+i18n.msg('logAfterHeader').plain()+'</span><span id="railwam-notlogged-text-warning">'+i18n.msg('notLoggedWarning').plain()+'</span></div><div class="railwam-util-btn" id="railwam-util-logafter-dismiss">'+i18n.msg('dismiss').plain()+'</div><div class="railwam-util-btn railwam-util-btn-hasbg" id="railwam-util-logafter-log">'+i18n.msg('logBtn').plain()+'</div></div>');}}else{$('#railwam-util-logafter').css('display','none');}local.graph.insertChart({name:canvasSelector,data:logged,startDate:dpStartDate,endDate:dpEndDate,type:graphType,
selector:'#'+canvasSelector,title:graphTitle,});}else{mw.hook('rw.graph.searchStarted').fire();$(this).removeClass('railwam-graph-create-btn-active');$('#railwam-graph-graphtype option:not(:checked)').attr('disabled',true);$('#railwam-graph-loggedonly').attr('disabled',true);$('.railwam-datepicker').css('display','none');$('#railwam-graph-options').addClass('railwam-util-disabled');$('#railwam-graph-options .railwam-util-tab-container').css('pointer-events','none');$('.railwam-graph-notlogged-text').css('display','none');rw.data.get({wikiId:mwConfig.wgCityId,startDate:dpStartDate,endDate:dpEndDate,logged:logged,wikis:1,success:function(data,dateId,requests){local.graph.timeLeft(requests*10);showLogAfter=!0;},error:function(data,dateId,requests){local.graph.timeLeft(requests*10);},exists:function(data,dateId,requests){if(data[dateId].logged===false){showLogAfter=!0;}},callback:function(data){$('#railwam-graph-create-btn').addClass('railwam-graph-create-btn-active');$(
'#railwam-graph-graphtype option:not(:checked)').attr('disabled',false);$('#railwam-graph-loggedonly').attr('disabled',false);$('.railwam-datepicker').css('display','block');local.graph.timeLeft(0);mw.hook('rw.graph.searchDone').fire();local.graph.insertChart({name:canvasSelector,data:data,startDate:dpStartDate,endDate:dpEndDate,type:graphType,selector:'#'+canvasSelector,title:graphTitle,});if(showLogAfter===true&&railWAM.showLogAlert===true){$('#railwam-util-logafter').css('display','block');if($('#railwam-util-logafter-log').length===0){$('#railwam-util-logafter').html('<div id="railwam-util-logafter-text"><span class="railwam-bold">'+i18n.msg('logAfterHeader').plain()+'</span><span id="railwam-notlogged-text-warning">'+i18n.msg('notLoggedWarning').plain()+'</span></div><div class="railwam-util-btn" id="railwam-util-logafter-dismiss">'+i18n.msg('dismiss').plain()+'</div><div class="railwam-util-btn railwam-util-btn-hasbg" id="railwam-util-logafter-log">'+i18n.msg('logBtn').plain()+
'</div></div>');}}else{$('#railwam-util-logafter').css('display','none');}$.extend(logged,data);},});}}});dpStartDate=rw.config.maxDate-(29*86400);dpEndDate=rw.config.maxDate;local.datepicker.populateYear(curDate.getUTCFullYear(),dpStartDate,dpEndDate,'graphrange',dateCreated);mw.hook('rw.dp.dayClicked').fire();const initRange=local.date.formatDate(dpStartDate)+' - '+local.date.formatDate(dpEndDate),initWidth=local.css.getTextWidth(initRange,$('#railwam-graph-daterange').css('font'));$('#railwam-graph-daterange').width(initWidth);local.graph.insertChart({name:'railwam-graph-wam-chart',data:logged,startDate:dpStartDate,endDate:dpEndDate,type:'score',selector:'#railwam-graph-wam-chart',title:i18n.msg('scoreGraphTitle',initRange).plain(),});mw.hook('rw.graph.uiAdded').fire();},timeLeft:function(sec){const cancelBtnElm=$('#railwam-util-cancel'),canvasElm=$('#railwam-graph-wam-chart'),loadingElm=$('#railwam-graph-loading'),loadingTextElm=$('#railwam-graph-loading-text'),logAfterElm=$(
'#railwam-util-logafter');if(sec===0){canvasElm.css('display','block');canvasElm.parent().removeClass('railwam-graph-nograph');loadingTextElm.empty();loadingElm.css('display','none');$('#railwam-graph-options').removeClass('railwam-util-disabled');$('#railwam-graph-options .railwam-util-tab-container').css('pointer-events','auto');}else{loadingTextElm.text(local.time.createTimer(rw.math.convertTime(sec)));if(cancelBtnElm.length<1){loadingElm.append('<div class="railwam-util-btn railwam-util-btn-hasbg" id="railwam-util-cancel">'+i18n.msg('cancel').plain()+'</div>');$('#railwam-util-cancel').click(function(){rw.data.cancel('get');loadingTextElm.text(i18n.msg('duringCancel').plain());$(this).remove();});}canvasElm.css('display','none');canvasElm.parent().addClass('railwam-graph-nograph');loadingElm.css('display','block');logAfterElm.css('display','none');}},};local.logOld={init:function(dateCreated){$('title').text('RailWAM: '+i18n.msg('logOldHeading').plain()+fandomTitle);$(
'.page-header__title').text('RailWAM: '+i18n.msg('logOldHeading').plain());$('.page-header__page-subtitle').html('< <a href="'+mwConfig.wgServer+'/wiki/Special:BlankPage/RailWAM/Dashboard">'+i18n.msg('dashboard').plain()+'</a>');local.logOld.insertHTML(dateCreated);},insertHTML:function(dateCreated){$('#mw-content-text').html('<div id="railwam-log-options"><span class="railwam-util-heading">'+i18n.msg('logSelectRangeHeader').plain()+'</span><span class="railwam-util-filter railwam-log-filter" id="railwam-log-daterange-filter-cont"><input class="railwam-util-filter-input railwam-util-input" id="railwam-log-daterange" type="text" required readonly="readonly"><div class="railwam-datepicker" id="railwam-datepicker-logrange"></div><span class="railwam-util-placeholder railwam-util-filter-ph">'+i18n.msg('dateRange').plain()+'</span></span><div id="railwam-log-overwrite-cont"><input type="checkbox" id="railwam-log-overwrite"><label for="railwam-log-overwrite">'+i18n.msg('overwriteLogged').
plain()+'<span class="railwam-smalltext-lowercase">'+i18n.msg('logTimeIncrease').plain()+'</span></label></div><a class="railwam-wds wds-button railwam-log-log-btn-active" id="railwam-log-log-btn">'+i18n.msg('logBtn').plain()+'</a><div id="railwam-log-errors"></div><div id="railwam-log-notlogged-warning">'+i18n.msg('notLoggedWarning').plain()+'</div></div><div id="railwam-log-loading"><svg class="railwam-util-spinner" width="25" viewBox="-15 -15 30 30" xmlns="http://www.w3.org/2000/svg"> <g> <circle fill="none" stroke-width="1" stroke-linecap="round" r="10"></circle></g></svg><span id="railwam-log-loading-text"></span></div><div id="railwam-log-cancel-confirmation"><span id="railwam-log-confirmation-text">'+i18n.msg('logCancelConfirmationText').plain()+'</span><div class="railwam-util-btn" id="railwam-util-logafter-dismiss">'+i18n.msg('dismiss').plain()+'</div><div class="railwam-util-btn railwam-util-btn-hasbg" id="railwam-util-logafter-log">'+i18n.msg('logBtn').plain()+
'</div></div></div><div id="railwam-log-console"><span class="railwam-util-heading">'+i18n.msg('logConsoleHeader').plain()+'</span><div id="railwam-log-console-entries"></div></div>');local.datepicker.init('logrange',dateCreated);mw.hook('rw.dp.dayClicked').add(function(){const displayRange=local.date.formatDate(dpStartDate)+' - '+local.date.formatDate(dpEndDate);$('#railwam-log-daterange').val(displayRange).change();});body.on('click','.railwam-log-log-btn-active',function(){if(typeof dpStartDate!=='number'||typeof dpEndDate!=='number'){local.input.error(i18n.msg('errorSelectRange').plain(),'range','#railwam-log-errors');}else{$('#railwam-log-options').addClass('railwam-util-disabled');mw.hook('rw.graph.searchStarted').fire();local.input.clearErrors('#railwam-log-errors');$('#railwam-log-console-entries').empty();$(this).removeClass('railwam-log-log-btn-active');$('#railwam-log-overwrite').attr('disabled',true);$('.railwam-datepicker').css('display','none');var dataExists=!1,
foundData=!1,lastId;$('#railwam-log-cancel-confirmation').css('display','none');rw.data.getLogged({log:railWAM.logPage,complete:function(logged){rw.data.get({wikiId:mwConfig.wgCityId,startDate:dpStartDate,endDate:dpEndDate,logged:$('#railwam-log-overwrite').is(':checked')===!0?{}:logged,wikis:1,callback:function(data){local.logOld.timeLeft(0);mw.hook('rw.graph.searchDone').fire();$('#railwam-log-options').removeClass('railwam-util-disabled');$('#railwam-log-log-btn').addClass('railwam-log-log-btn-active');$('#railwam-log-overwrite').attr('disabled',false);$('.railwam-datepicker').css('display','block');$.extend(logged,data);if(foundData===true){if(lastId===dpEndDate||lastId===rw.config.maxDate){rw.data.log({data:data,log:railWAM.logPage,summary:'[[w:c:dev:RailWAM|RailWAM]]: '+i18n.msg('logSummary').plain(),types:['wiki_id','wam','wam_rank','vertical_wam_rank'],addedBy:'RailWAM',version:3,bot:botFlag,override:!0,callback:function(){local.logOld.newConsoleEntry(i18n.msg(
'logLoggedText').plain(),true);},});mw.hook('rw.graph.dataLogged').fire();}else{$('#railwam-log-cancel-confirmation').css('display','block');if($('#railwam-util-logafter-log').length===0){$('#railwam-log-cancel-confirmation').html('<span id="railwam-log-confirmation-text">'+i18n.msg('logCancelConfirmationText').plain()+'</span><div class="railwam-util-btn" id="railwam-util-logafter-dismiss">'+i18n.msg('dismiss').plain()+'</div><div class="railwam-util-btn railwam-util-btn-hasbg" id="railwam-util-logafter-log">'+i18n.msg('logBtn').plain()+'</div>');}}}else if(dataExists===true){local.logOld.newConsoleEntry(i18n.msg('logAlreadyLoggedText').plain(),false);}else{local.logOld.newConsoleEntry(i18n.msg('logNotLoggedText').plain(),false);}$('#railwam-util-logafter-log').off('click').click(function(){rw.data.log({data:logged,log:railWAM.logPage,summary:'[[w:c:dev:RailWAM|RailWAM]]: '+i18n.msg('logSummary').plain(),types:['wiki_id','wam','wam_rank','vertical_wam_rank'],addedBy:'RailWAM',version:
3,bot:botFlag,override:!0,});$('#railwam-log-confirmation-text').text(i18n.msg('scoreLogged').plain());$('#railwam-util-logafter-log').remove();local.logOld.newConsoleEntry(i18n.msg('logLoggedText').plain(),true);mw.hook('rw.log.dataLogged').fire();});},complete:function(data,dateId,requests){lastId=dateId;},success:function(data,dateId,requests){foundData=!0;local.logOld.timeLeft(requests*10);if(dateId>dpStartDate-86400){local.logOld.newConsoleEntry(i18n.msg('logFoundText').plain(),true,dateId);}},error:function(data,dateId,requests){local.logOld.timeLeft(requests*10);if(dateId>dpStartDate-86400){local.logOld.newConsoleEntry(i18n.msg('logMissingText').plain(),false,dateId);}},exists:function(data,dateId,requests){dataExists=!0;lastId=dateId;if(dateId>dpStartDate-86400){if(data[dateId].logged===true){local.logOld.newConsoleEntry(i18n.msg('logExistsText').plain(),false,dateId);}else{local.logOld.newConsoleEntry(i18n.msg('logFoundText').plain(),true,dateId);}}}});},});}});body.on(
'click','#railwam-util-logafter-dismiss',function(){$('#railwam-log-cancel-confirmation').fadeOut(200);mw.hook('rw.graph.logAlertDismissed').fire();});},newConsoleEntry:function(text,retrieved,dateId){var typeId;if(retrieved===true){typeId='found';}else{typeId='missing';}var dateElm=isNaN(local.math.parseNum(dateId))===!0?'':'<span class="railwam-log-entry-date">'+local.date.formatDate(dateId+(curDate.getTimezoneOffset()*60)+3600,true)+'<span class="railwam-smalltext">('+timezone+')</span></span>';$('<div class="railwam-log-console-entry railwam-log-console-entry-'+typeId+'">'+dateElm+'<span class="railwam-log-console-entry-text">'+text+'</span></div>').prependTo('#railwam-log-console-entries').slideDown(500);mw.hook('rw.log.consoleEntryAdded').fire();},timeLeft:function(sec){const cancelBtnElm=$('#railwam-util-cancel'),loadingElm=$('#railwam-log-loading'),loadingTextElm=$('#railwam-log-loading-text');if(sec===0){loadingTextElm.empty();loadingElm.css('display','none');}else{
loadingTextElm.text(local.time.createTimer(rw.math.convertTime(sec)));if(cancelBtnElm.length<1){loadingElm.append('<div class="railwam-util-btn railwam-util-btn-hasbg" id="railwam-util-cancel">'+i18n.msg('cancel').plain()+'</div>');$('#railwam-util-cancel').click(function(){rw.data.cancel('get');loadingTextElm.text(i18n.msg('duringCancel').plain());$(this).remove();});}loadingElm.css('display','block');}},};mw.hook('rw.api.ready').add(local.start);});});});;(function(){'use strict'
if(!window.rcstats){window.rcstats={onLoad:function(){mw.log('window.rcstats.onLoad')
if(window.rcstats.isStatsPage()){document.getElementById('mw-content-text').innerHTML='<svg class="wds-spinner wds-spinner__block" width="45" height="45" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg"><g transform="translate(22.5, 22.5)"><circle class="wds-spinner__stroke" fill="none" stroke-width="5" stroke-dasharray="125.66370614359172" stroke-dashoffset="125.66370614359172" stroke-linecap="round" r="20"></circle></g></svg>'}if(!mw.loader.getState('rcstats.i18n')){mw.loader.implement('rcstats.i18n',['/load.php?mode=articles&only=scripts&articles=u:dev:I18n-js/code.js'],{},{})}mw.loader.using(['rcstats.i18n','mediawiki.api','mediawiki.util'],function(){window.dev.i18n.loadMessages('RCStats').done(function(i18n){window.rcstats.i18n=i18n
window.rcstats.init()})})},init:function(){mw.log('window.rcstats.init')
mw.hook('rcstats.init').fire()
window.rcstats.createLink()
if(window.rcstats.isStatsPage()){window.rcstats.loadPage()}},createLink:function(){mw.log('window.rcstats.createLink')
var text=window.rcstats.i18n.msg('shortName').plain()
var href=mw.util.getUrl('Special:Blankpage',{'blankspecial':'rcstats'})
var elem=document.createElement('li')
var link=document.createElement('a')
link.appendChild(document.createTextNode(text))
link.setAttribute('href',href)
elem.appendChild(link)
document.querySelector('.wds-community-header__wiki-buttons > .wds-dropdown > .wds-dropdown__content > .wds-list').appendChild(elem)
mw.hook('rcstats.link').fire({elem:elem,text:text,href:href})},loadPage:function(){mw.log('window.rcstats.loadPage')
importArticle({type:'style',article:'u:dev:MediaWiki:RCStats.css',loaded:function(){window.sectionsData=[]
mw.loader.using(['ext.hydralytics.scripts'],function(){window.rcstats.generateStatsPage()
window.rcstats.request(null,[],new mw.Api(),500,new Date(new Date().setHours(25,0,0,0)-1000*60*60*24*7))})}})},request:function(rcstart,fetchedData,api,requestSize,furthestDate){api.get({action:'query',list:'recentchanges',rcprop:['user','timestamp','title','loginfo','flags'].join('|'),rclimit:500,rcstart:rcstart,maxage:86400,smaxage:86400}).done(function(data){var newData=fetchedData.concat(data.query.recentchanges.filter(function(entry){return new Date(entry.timestamp)>=furthestDate}))
if(data.query.recentchanges.length<requestSize){window.rcstats.requestsFinished(newData)
return}var furthestEntry=data.query.recentchanges[requestSize-1]
if(new Date(furthestEntry.timestamp)>=furthestDate){window.rcstats.request(data['query-continue'].recentchanges.rcstart,newData,api,requestSize,furthestDate)}else{window.rcstats.requestsFinished(newData)}})},requestsFinished:function(fetchedData){mw.log('window.rcstats.requestsFinished')
window.rcstats.data=fetchedData.map(function(entry){return{type:window.rcstats.getPageType(entry.ns),timestamp:new Date(entry.timestamp),user:entry.user,bot:entry.bot!==undefined,minor:entry.minor!==undefined}}).reverse()
window.rcstats.createCharts()},generateStatsPage:function(){mw.log('window.rcstats.generateStatsPage')
document.querySelector('#PageHeader .page-header__title').textContent=window.rcstats.i18n.msg('name').plain()
document.title=window.rcstats.i18n.msg('name').plain()+' | '+mw.config.get('wgSiteName')
var mwContentText=document.getElementById('mw-content-text')
while(mwContentText.lastChild){mwContentText.removeChild(mwContentText.lastChild)}var docFrag=document.createDocumentFragment()
var mainElem=document.createElement('main')
mainElem.classList.add('rcstats');['users','days','pages'].forEach(function(sectionName){var sectionElem=document.createElement('section')
sectionElem.classList.add('rcsection')
var sectionTitle=document.createElement('h2')
sectionTitle.appendChild(document.createTextNode(window.rcstats.i18n.msg(sectionName).plain()))
sectionElem.appendChild(sectionTitle)
var chartWrapper=document.createElement('div')
chartWrapper.classList.add('rccanvaswrapper')
var canvasElem=document.createElement('canvas')
canvasElem.id='rcstats-'+sectionName
canvasElem.setAttribute('width',10)
canvasElem.setAttribute('height',9)
chartWrapper.appendChild(canvasElem)
sectionElem.appendChild(chartWrapper)
mainElem.appendChild(sectionElem)})
docFrag.appendChild(mainElem)
var filtersElem=document.createElement('section')
var mainFieldset=document.createElement('fieldset')
mainFieldset.classList.add('rcfilters');['article','social','user','media','code','other'].forEach(function(catName){var labelElem=document.createElement('label')
var checkbox=document.createElement('input')
checkbox.setAttribute('type','checkbox')
checkbox.setAttribute('data-type',catName)
checkbox.checked=!0
checkbox.disabled=!0
labelElem.appendChild(checkbox)
labelElem.appendChild(document.createTextNode(window.rcstats.i18n.msg(catName).plain()))
mainFieldset.appendChild(labelElem)})
filtersElem.appendChild(mainFieldset)
var secondaryFieldset=document.createElement('fieldset')
secondaryFieldset.classList.add('rcfilters')
var botsLabel=document.createElement('label')
var botsCheckbox=document.createElement('input')
botsCheckbox.setAttribute('type','checkbox')
botsCheckbox.setAttribute('data-bots',true)
botsCheckbox.checked=!1
botsCheckbox.disabled=!0
botsLabel.appendChild(botsCheckbox)
botsLabel.appendChild(document.createTextNode(window.rcstats.i18n.msg('bots').plain()))
secondaryFieldset.appendChild(botsLabel)
var minorLabel=document.createElement('label')
var minorCheckbox=document.createElement('input')
minorCheckbox.setAttribute('type','checkbox')
minorCheckbox.setAttribute('data-minor',true)
minorCheckbox.checked=!0
minorCheckbox.disabled=!0
minorLabel.appendChild(minorCheckbox)
minorLabel.appendChild(document.createTextNode(window.rcstats.i18n.msg('showMinor').plain()))
secondaryFieldset.appendChild(minorLabel)
filtersElem.appendChild(secondaryFieldset)
docFrag.appendChild(filtersElem)
var footerElem=document.createElement('footer')
footerElem.classList.add('rcfooter')
footerElem.appendChild(document.createTextNode(window.rcstats.i18n.msg('nodata').plain()))
docFrag.appendChild(footerElem)
mwContentText.appendChild(docFrag)
new mw.Api().get({action:'parse',text:'{{int:statistics-footer}}',prop:'text'}).done(function(data){var elem=document.createElement('template')
elem.innerHTML=data.parse.text['*']
elem.content.querySelector('.editsection').remove()
mwContentText.appendChild(elem)})},createCharts:function(){mw.log('window.rcstats.createCharts')
window.rcstats.updateFooter(window.rcstats.data)
if(window.rcstats.data.length===0){return}var dicts=window.rcstats.getEditDicts(window.rcstats.data)
var usersChartData=window.rcstats.getUsersChartData(dicts.editsByUsers)
window.rcstats.charts.users=new Chart(document.getElementById('rcstats-users').getContext('2d'),{type:'doughnut',data:{datasets:usersChartData.datasets,labels:usersChartData.labels},options:{legend:{display:!1},tooltips:{displayColors:!1}}})
document.getElementById('rcstats-users').addEventListener('click',function(e){var elem=window.rcstats.charts.users.getElementsAtEvent(e)[0]
if(elem===undefined){return}window.open(mw.util.getUrl('Special:Contributions/'+window.rcstats.charts.users.data.labels[elem._index]))})
var daysChartData=window.rcstats.getDaysChartData(dicts.editsByDays)
window.rcstats.charts.days=new Chart(document.getElementById('rcstats-days').getContext('2d'),{type:'line',data:{datasets:daysChartData.datasets,labels:daysChartData.labels},options:{scales:{xAxes:[{ticks:{autoSkip:!1}}],yAxes:[{ticks:{beginAtZero:!0}}]},tooltips:{mode:'index',intersect:!1},hover:{mode:'nearest'}}})
var pagesChartData=window.rcstats.getPagesChartData(dicts.editsByType)
window.rcstats.charts.pages=new Chart(document.getElementById('rcstats-pages').getContext('2d'),{type:'bar',data:{datasets:pagesChartData.datasets,labels:pagesChartData.labels},options:{tooltips:{displayColors:!1},scales:{xAxes:[{stacked:!0,ticks:{autoSkip:!1}}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0}}]}}})
Array.from(document.querySelectorAll('.rcfilters input[type=checkbox][data-type]')).forEach(function(check){if(window.rcstats.data.filter(function(rev){return rev.type===check.getAttribute('data-type')}).length===0){check.parentNode.remove()}else{check.removeAttribute('disabled')}})
if(window.rcstats.data.filter(function(rev){return rev.bot}).length===0){document.querySelector('.rcfilters input[type=checkbox][data-bots]').parentNode.remove()}else{document.querySelector('.rcfilters input[type=checkbox][data-bots]').removeAttribute('disabled')}if(window.rcstats.data.filter(function(rev){return rev.minor}).length===0){document.querySelector('.rcfilters input[type=checkbox][data-minor]').parentNode.remove()}else{document.querySelector('.rcfilters input[type=checkbox][data-minor]').removeAttribute('disabled')}Array.from(document.querySelectorAll('.rcfilters input[type=checkbox]')).forEach(function(check){check.addEventListener('change',function(){window.rcstats.updateFilter()})})
window.rcstats.updateFilter()},getPageType:function(ns){if([0,4,5,14,15].includes(ns)){return'article'}else if([-2,6,7].includes(ns)){return'media'}else if([8,9,10,11,828,829].includes(ns)){return'code'}else if([1,3,110,111,500,501,502,503,1200,1201,2000,2001,2002].includes(ns)){return'social'}else if([2,1202].includes(ns)){return'user'}else{return'other'}},getEditDicts:function(data){var editsByUsers={}
var editsByDays={}
var editsByType={}
Object.entries(data).forEach(function(entry){if(editsByUsers[entry[1].user]){editsByUsers[entry[1].user]+=1}else{editsByUsers[entry[1].user]=1}var date=entry[1].timestamp
var day=date.getFullYear()+'-'+(date.getMonth()+1).toString().padStart(2)+'-'+date.getDate().toString().padStart(2)
if(editsByDays[day]){editsByDays[day].edits+=1
if(!editsByDays[day].users.includes(entry[1].user)){editsByDays[day].users.push(entry[1].user)}}else{var weekday=date.toLocaleString(window.navigator.language||'en-EN',{weekday:'long'})
editsByDays[day]={edits:1,day:weekday.charAt(0).toUpperCase()+weekday.slice(1),users:[entry[1].user]}}if(editsByType[entry[1].type]){editsByType[entry[1].type].minor+=entry[1].minor?1:0
editsByType[entry[1].type].major+=entry[1].minor?0:1}else{editsByType[entry[1].type]={minor:entry[1].minor?1:0,major:entry[1].minor?0:1}}})
return{editsByUsers:editsByUsers,editsByDays:editsByDays,editsByType:editsByType}},getUsersChartData:function(editsByUsers,filter){var usersData=[]
var usersLabels=[]
var usersColors=[]
var usersHoverColors=[]
var usersBorders=window.sassParams['color-page']
Object.entries(editsByUsers).sort(function(a,b){return b[1]-a[1]}).filter(function(e){return filter?filter(e[1]):!0}).forEach(function(e){usersData.push(e[1])
usersLabels.push(e[0])
var hue=((Array.from(e[0]).reduce(function(s,c){return Math.imul(31,s)+c.charCodeAt(0)|0},0)+2147483647)/4294967295)*360
if(window.rcstats.charts.users&&window.rcstats.charts.users.data.labels&&window.rcstats.charts.users.data.datasets[0]){var id=Object.entries(window.rcstats.charts.users.data.labels).find(function(dataE){return dataE[1]===e[0]})
if(id){usersColors.push(window.rcstats.charts.users.data.datasets[0].backgroundColor[id[0]])
usersHoverColors.push(window.rcstats.charts.users.data.datasets[0].hoverBackgroundColor[id[0]])}else{usersColors.push('hsl('+hue+', 80%, 50%)')
usersHoverColors.push('hsl('+hue+', 80%, 25%)')}}else{usersColors.push('hsl('+hue+', 80%, 50%)')
usersHoverColors.push('hsl('+hue+', 80%, 25%)')}})
return{datasets:[{data:usersData,backgroundColor:usersColors,hoverBackgroundColor:usersHoverColors,borderColor:usersBorders,hoverBorderColor:usersBorders}],labels:usersLabels}},getDaysChartData:function(editsByDays){var daysEditsData=[]
var daysUsersData=[]
var daysLabels=[]
Object.values(editsByDays).forEach(function(v){daysEditsData.push(v.edits)
daysUsersData.push(v.users.length)
daysLabels.push(v.day)})
return{datasets:[{label:window.rcstats.i18n.msg('edits').plain(),data:daysEditsData,backgroundColor:'#00d6d6',borderColor:'#00d6d6',fill:!1},{label:window.rcstats.i18n.msg('users').plain(),data:daysUsersData,backgroundColor:'#ff6a64',borderColor:'#ff6a64',fill:!1}],labels:daysLabels}},getPagesChartData:function(editsByType){var typeEditsMinor=[]
var typeEditsMajor=[]
var typeEditsLabels=[]
Object.entries(editsByType).sort(function(a,b){return b[1].major+b[1].minor-(a[1].major+a[1].minor)}).forEach(function(e){typeEditsMinor.push(e[1].minor)
typeEditsMajor.push(e[1].major)
typeEditsLabels.push(window.rcstats.i18n.msg(e[0]).plain())})
var datasets=[{label:window.rcstats.i18n.msg('edits').plain(),data:typeEditsMajor,backgroundColor:'#006661'}]
if(typeEditsMinor.some(function(v){return v>0})){datasets.push({label:window.rcstats.i18n.msg('minorEdits').plain(),data:typeEditsMinor,backgroundColor:'#5df2ae'})}return{datasets:datasets,labels:typeEditsLabels}},updateCharts:function(data,usersFilter){var dicts=window.rcstats.getEditDicts(data)
var results={users:window.rcstats.getUsersChartData(dicts.editsByUsers,usersFilter),days:window.rcstats.getDaysChartData(dicts.editsByDays),pages:window.rcstats.getPagesChartData(dicts.editsByType)}
Object.entries(results).forEach(function(chart){var previous=JSON.stringify(window.rcstats.charts[chart[0]].data.datasets.map(function(o){return Object.entries(o).find(function(e){return e[0]==='data'})[1]}))
var current=JSON.stringify(chart[1].datasets.map(function(o){return Object.entries(o).find(function(e){return e[0]==='data'})[1]}))
if(previous!==current){window.rcstats.charts[chart[0]].data.datasets=chart[1].datasets
window.rcstats.charts[chart[0]].data.labels=chart[1].labels
window.rcstats.charts[chart[0]].update()}})
window.rcstats.updateFooter(data)},updateFilter:function(){var enabledTypes=[]
Array.from(document.querySelectorAll('.rcfilters input[type=checkbox][data-type]')).forEach(function(elem){if(elem.checked){enabledTypes.push(elem.getAttribute('data-type'))}})
var botsEnabled=(document.querySelector('.rcfilters input[type=checkbox][data-bots]')||{}).checked
var minorEnabled=(document.querySelector('.rcfilters input[type=checkbox][data-minor]')||{}).checked
window.rcstats.updateCharts(window.rcstats.data.filter(function(e){if((!botsEnabled&&e.bot)||(!minorEnabled&&e.minor)){return false}return enabledTypes.includes(e.type)}))},updateFooter:function(data){if(!data[0]){document.querySelector('.rcfooter').textContent=window.rcstats.i18n.msg('nodata').plain()}else{document.querySelector('.rcfooter').textContent=window.rcstats.i18n.msg('footer',data.length,Math.ceil((new Date().getTime()-data[0].timestamp.getTime())/(1000*60*60*24))).plain()}},isStatsPage:function(){return mw.config.get('wgCanonicalSpecialPageName')==='Blankpage'&&new URLSearchParams(window.location.search).get('blankspecial')==='rcstats'},charts:{users:null,days:null,pages:null},data:[]}
if(document.readyState!=='loading'){window.rcstats.onLoad()}else{document.addEventListener('DOMContentLoaded',function(){window.rcstats.onLoad()})}}})();window.dev=window.dev||{};dev.ReferencePopups=dev.ReferencePopups||{};dev.ReferencePopups.unload=dev.ReferencePopups.unload||function(){"use strict";delete this.Popup;delete this.configure;if(this.unloadCore){this.unloadCore();}};(function(module,lang){"use strict";var i18n={en:{coreConfigureText:'Configure Reference Popups',coreConfigureHover:'Change settings for Reference Popups'},ar:{coreConfigureText:'اضبط تلميحات المراجع',coreConfigureHover:'اضبط إعدادات تلميح المراجع'},be:{coreConfigureText:'Налада усплываючых падказак',coreConfigureHover:'Змяніць налады усплываючых падказак'},ca:{coreConfigureText:'Configura referències emergents',coreConfigureHover:'Canviar la configuració de referències emergents'},de:{coreConfigureText:
'Referenz-Popups konfigurieren',coreConfigureHover:'Einstellungsänderungen für Referenz-Popups'},el:{coreConfigureText:'Ρύθμιση Αναδυόμενων Αναφορών',coreConfigureHover:'Αλλαγή ρυθμίσεων για τις Αναδυόμενες Αναφορές'},es:{coreConfigureText:'Configurar popups de referencias',coreConfigureHover:'Modificar la configuración de los popups de referencias'},fr:{coreConfigureText:'Configurer Popups de Référence',coreConfigureHover:'Modifier les préférences pour les Popups de Référence'},it:{coreConfigureText:'Configura le note a popup',coreConfigureHover:'Cambia le impostazioni per le note a popup'},ja:{coreConfigureText:'注釈ふきだしの設定',coreConfigureHover:'注釈ふきだしの設定を変更する'},ko:{coreConfigureText:'주석 말풍선 설정',coreConfigureHover:'주석 말풍선 설정하기'},nl:{coreConfigureText:'Configureer Referentie Popups',coreConfigureHover:
'Wijzig de instellingen voor Referentie Popups'},pl:{coreConfigureText:'Skonfiguruj wyskakujące przypisy',coreConfigureHover:'Zmień ustawienia dla wyskakujących przypisów'},'pt-br':{coreConfigureText:'Configurar Popups de Referência',coreConfigureHover:'Mudar configurações para Popups de Referência'},ro:{coreConfigureText:'Configurați popupurile de referință',coreConfigureHover:'Schimbă setările pentru popupurile de referință'},ru:{coreConfigureText:'Настройка всплывающих подсказок',coreConfigureHover:'Изменить настройки всплывающих подсказок'},tr:{coreConfigureText:'Referans Bildirimlerini Yapılandır',coreConfigureHover:'Referans Bildirimleri\'nin seçeneklerini değiştir'},uk:{coreConfigureText:'Налаштування спливаючих підказок',coreConfigureHover:'Змінити налаштування спливаючих підказок'},vi:{coreConfigureText:
'Thiết Đặt Popup Tham Khảo',coreConfigureHover:'Thay đổi thiết đặt cho Popup Tham Khảo'},zh:{coreConfigureText:'设定参考资料弹窗',coreConfigureHover:'更改参考弹出窗口的设置'},'zh-hk':{coreConfigureText:'設定參考資料彈窗',coreConfigureHover:'更改參考彈出窗口的設置'},'zh-tw':{coreConfigureText:'設定參考資料彈窗',coreConfigureHover:'更改參考彈出窗口的設置'}};var msg=module.messages=module.messages||{};for(var m in i18n.en){msg[m]=msg[m]||(i18n[lang]&&i18n[lang][m])||i18n.en[m];}})(dev.ReferencePopups,mediaWiki.config.get('wgUserLanguage'));(function(window,$,mw){"use strict";var module=window.dev.ReferencePopups;if(module.Popup){return $.noop;}var mwReady=$.Deferred(),mwDeps=['jquery.ui.position','jquery.effects.fold','jquery.ui.core','jquery.ui.widget'];mw.loader.load(mwDeps,null,true);mw.loader.using(mwDeps,mwReady.resolve,mwReady.reject);var colors=window.dev.colors||$.ajax({url:mw.config.get('wgLoadScript'),data
:{mode:'articles',only:'scripts',articles:'u:dev:Colors/code.js'},dataType:'script',cache:!0});if(!module.cssLoaded){window.importArticle({type:'style',article:'u:dev:MediaWiki:ReferencePopups.css'});module.cssLoaded=!0;}var dfd=$.Deferred();module.Popup=dfd.promise();return function(callback){$.when(mwReady,colors).done(function(){dfd.resolve(module.Popup=callback(module,window,$,mw,window.dev.colors));}).fail(function(){delete module.Popup;dfd.reject();});};}(window,jQuery,mediaWiki))(function(module,window,$,mw,Colors){"use strict";$.curCSS=$.curCSS||$.css;(function(color,Colors,mw,$){function ifOk(val,alt){return(val&&val!=='transparent'&&val!=='rgba(0, 0, 0, 0)')?val:alt;}function tryParse(val,alt){try{return Colors.parse(val);}catch(e){if(window.console){window.console.warn('Colors Parse Error ('+val+'): ',e,e.stack);}return Colors.parse(alt);}}function toRgba(color,alpha){return'rgba('+color.red()+','+color.green()+','+color.blue()+','+alpha+')';}if(mw.config.get('skin')===
'oasis'){color.page=Colors.parse(Colors.wikia.page);color.pageBorder=Colors.parse(Colors.wikia.border);color.accent=Colors.parse(Colors.wikia.menu);color.popText=Colors.wikia.text;}else{var $content=$('#content');color.page=tryParse(ifOk($('#globalWrapper').css('backgroundColor'),$content.css('backgroundColor')),'white');color.pageBorder=tryParse(ifOk($content.css('borderLeftColor'),$content.css('borderRightColor')),'#AAA');color.accent=tryParse(ifOk($('#footer').css('borderTopColor'),$('body').css('backgroundColor')),'#fabd23');color.popText=tryParse($('#mw-content-text').css('color'),'black');}var mixCol;if(color.page.isBright()){color.back=color.page.mix(mixCol='black',95).mix('blue',97);}else{color.back=color.page.mix(mixCol='white',95);}color.popEdge=color.accent.mix(color.pageBorder,90);color.backA=toRgba(color.back,0.95);color.backB=toRgba(color.back.mix(mixCol,99),0.95);color.backC=toRgba(color.back.mix(mixCol,97),0.95);Colors.css(
'\
	.refpopups-box {\
		background-color: $back;\
		color: $popText;\
		border-color: $popEdge;\
		background: -webkit-linear-gradient(30deg, $backA, $backB 15%, $backB 25%, $backA 40%, $backA 50%, $backB 60%, $backB 70%, $backC 70%, $backC 90%, $backA 92%);\
		background: linear-gradient(60deg, $backA, $backB 15%, $backB 25%, $backA 40%, $backA 50%, $backB 60%, $backB 70%, $backC 70%, $backC 90%, $backA 92%);\
	}\
	.refpopups-chevron-in {\
		border-top-color: $back;\
		border-top-color: $backA;\
	}\
	.refpopups-flipped > .refpopups-chevron-in {\
		border-bottom-color: $back;\
		border-bottom-color: $backA;\
	}\
	.refpopups-chevron-out {\
		border-top-color: $popEdge;\
	}\
	.refpopups-flipped > .refpopups-chevron-out {\
		border-bottom-color: $popEdge;\
	}',color);})(module.colors=module.colors||{},Colors,mw,$);var widgetId=0;$.widget('Lunarity.referencePopup',{options:{activateBy:'hover',hoverDelay:200,content:'',disabled:!1,visible:!1,animation:'fold',animSpeed:300,context:null
,escapeCloses:!0,extraClass:'',contentBoxClass:'',stickyHover:!1,open:null,close:null},_create:function(){if(!this.document){this.document=$(this.element[0].ownerDocument);this.window=$(this.document[0].defaultView||this.document[0].parentWindow);this.eventNamespace='.'+this.widgetBaseClass+widgetId++;}this._timeouts={};this._$popup=$('<div class="refpopups-popup" id="'+this.eventNamespace.substr(1)+'">'+'<div class="refpopups-chevron-out"></div>'+'<div class="refpopups-chevron-in"></div>'+'<div class="refpopups-box">'+'</div></div>').addClass(this.options.extraClass).find('> .refpopups-box').addClass(this.options.contentBoxClass).end();this.options.context=$(this.document.find(this.options.context)[0]);if(!this.options.context.length){this.options.context=$(this.document[0].body);}this._setOption('activateBy',this.options.activateBy==='click'?'click':'hover');this._updateContent();if(!this.options.disabled){this.options.disabled=!0;this.enable();}if(this.options.visible){this.
options.visible=!1;this.show();}},_clearTimeout:function(name){if(this._timeouts[name]!==null){window.clearTimeout(this._timeouts[name]);this._timeouts[name]=null;}},_setTimeout:function(name,callback,delay){this._clearTimeout(name);var me=this;this._timeouts[name]=window.setTimeout(function(){me._timeouts[name]=null;callback.call(me);},delay||0);},_installEvents:function(){var self=this,map,ns=this.eventNamespace;this._$popup.off(ns);this.element.off(ns);this._clearTimeout('open');this._clearTimeout('close');if(this.options.disabled){return;}if(this.options.activateBy==='hover'){map={};map['mouseenter'+ns]=function(){self._clearTimeout('close');};map['mouseleave'+ns]=function(ev){self._setTimeout('close',function(){this.hide(ev);},self.options.hoverDelay);};this._$popup.on(map);map={};map['mouseenter'+ns]=function(ev){self._clearTimeout('close');self._setTimeout('open',function(){this.show(ev);},self.options.hoverDelay);};map['mouseleave'+ns]=function(ev){self._clearTimeout('open')
;if(!self.options.stickyHover){self._setTimeout('close',function(){this.hide(ev);},self.options.hoverDelay);}};this.element.on(map);}var lastTouch;map={};map['touchEnd'+ns]=function(ev){lastTouch=ev.originalEvent;};map['click'+ns]=function(ev){if((self.options.activateBy!=='click'&&(!lastTouch||lastTouch.defaultPrevented))||self.options.disabled){return;}lastTouch=null;if(!self.options.visible){ev.preventDefault();self.show(ev);}else{self.hide(ev);}};if(this.options.escapeCloses){var onKeyUp=function(ev){if(ev.which===$.ui.keyCode.ESCAPE){self.hide(ev);}};map['keyup'+ns]=onKeyUp;this._$popup.on('keyup'+ns,onKeyUp);}this.element.on(map);map=null;},triggerHover:function(event){if(this.options.activateBy==='hover'){this._setTimeout('open',function(){this.show(event);},this.options.hoverDelay);}},destroy:function(){this.hide();this._$popup.remove();this.element.off(this.eventNamespace);return $.Widget.prototype.destroy.call(this);},_updateContent:function(val){val=val||this.options.content
||'';if(!val.jquery&&!val.nodeType){this.options.content=val=$($(this.document[0].createElement('div')).html(val).contents().unwrap());}this._$popup.find('> .refpopups-box').empty().append(val);},_describeAria:function(yes){var k='aria-describedby',val=this.element.attr(k),s=val?val.split(/\s+/g):[],id=this._$popup[0].id,at=$.inArray(id,s);if(at!==-1){if(!yes){s.splice(at,1);}}else if(yes){s.push(id);}val=s.join(' ');this.element[val?'attr':'removeAttr'](k,val);},show:function(event){if(this.options.visible||this.options.disabled){return;}this.options.context.append(this._$popup.stop(true,true));this._positionPopup();this._describeAria(true);if(this.options.animation){this._$popup.hide().show(this.options.animation,this.options.animSpeed);}var triggered=0,self=this,ns=this.eventNamespace;this.window.on('scroll'+ns+' resize'+ns,function adaptCallback(){if(++triggered!==1){return;}self._positionPopup();window.setTimeout(function(){var t=triggered;triggered=0;if(t>1&&self.options.visible)
{adaptCallback();}},100);});if(this.options.activateBy==='click'){this.document.on('click'+ns,function(ev){if(!$(ev.target).closest(self._$popup.add(self.element)).length){self.hide();}});}this.options.visible=!0;this._trigger('open',event);},hide:function(event){if(!this.options.visible){return;}this.document.off(this.eventNamespace);this.window.off(this.eventNamespace);if(this.options.animation){var $clone=this._$popup.clone();this._$popup.after($clone);$clone.hide(this.options.animation,this.options.animSpeed,function(){$clone.remove();});}this._$popup.detach();this._describeAria(false);this.options.visible=!1;this._trigger('close',event);},toggle:function(yesno){yesno=(yesno!==void 0?yesno:!this.options.visible);this[yesno?'show':'hide']();},_setOption:function(key,val){switch(key){case'disabled':if(val&&this.options.visible){this.hide();}this.options.disabled=!!val;this._installEvents();return;case'visible':this[val?'show':'hide']();return;case'activateBy':if(({hover:1,click:
1})[val]===1){this.options.activateBy=val;this._installEvents();}return;case'content':this.options.content=val;this._updateContent();return;case'context':return;case'extraClass':this._$popup[0].className='refpopups-popup';this._$popup.addClass(val);break;case'extraBoxClass':this._$popup.find('> .refpopups-box').prop('className','refpopups-box').addClass(val);break;}return $.Widget.prototype._setOption.call(this,key,val);},_positionPopup:function(){var $popup=this._$popup.removeClass('refpopups-flipped'),$this=this.element,$chevOut=$popup.find('> .refpopups-chevron-out'),chevOutHeight=0;if($chevOut.is(':visible')){chevOutHeight=$chevOut.position().top+$chevOut.outerHeight()-$popup.outerHeight();}$popup.position({my:'bottom',at:'top',of:$this,collision:'fit none',offset:'0 -'+chevOutHeight});var spaceAtTop=$this.offset().top,spaceAtBottom=spaceAtTop+$this[0].offsetHeight,popupHeight=$popup[0].offsetHeight+chevOutHeight,scroll=this.window.scrollTop();spaceAtTop=spaceAtTop-scroll;
spaceAtBottom=(scroll+this.window.height())-spaceAtBottom;if(spaceAtTop<popupHeight&&spaceAtTop<spaceAtBottom){$popup.addClass('refpopups-flipped').position({my:'top',at:'bottom',of:$this,collision:'fit none',offset:'0 '+chevOutHeight});}if(!chevOutHeight){return;}var $chevIn=$popup.find('> .refpopups-chevron-in'),myLoc=$this.offset().left-$popup.offset().left+$this.outerWidth()/2;$chevOut.css('left',(myLoc-$chevOut.outerWidth()/2)+'px');$chevIn.css('left',(myLoc-$chevIn.outerWidth()/2)+'px');}});return $.Lunarity.referencePopup;});(function(window,$){"use strict";var module=window.dev.ReferencePopups;if(module.unloadCore){return $.noop;}module.unloadCore=$.noop;return function(callback){$.when(module.Popup).done(function(){callback(module,window,$,window.mediaWiki);}).fail(function(){delete module.unloadCore;});};}(window,jQuery))(function(module,window,$,mw){"use strict";var store={get:function(key){try{return JSON.parse(window.localStorage.getItem(key));}catch(e){return null;}},set:
function(key,data){try{window.localStorage.setItem(key,JSON.stringify(data));}catch(e){}}};var userConfig=(function(config,defaults){if(typeof(config)!=='object'||config===null){config={};}if(({hover:1,click:1})[config.react]!==1){config.react='hover';}config.hoverDelay=config.hoverDelay||defaults.hoverDelay||200;config.animate=(config.animate===void 0?defaults.animate===void 0||defaults.animate:!!config.animate);config.disabled=!!config.disabled&&!module.lockdown;config.stick=(config.stick===void 0?defaults.stick!==void 0&&defaults.stick:!!config.stick);return config;})(store.get('RefPopupsJS'),module.defaults||{});var armedPop=null,openPop=null,mwContentProcessed=!1;function cyclePopup(newTarget){if(openPop&&openPop.element.is(newTarget)){return;}if(armedPop){if(armedPop.element.is(newTarget)){return;}armedPop.destroy();}return(armedPop=constructPopup($(newTarget)));}function cleanupPopups(){if(openPop){openPop.destroy();}if(armedPop){armedPop.destroy();}openPop=armedPop=null;}
function installHooks($content){var lastTouch;$content=$content instanceof jQuery?$content:$('#mw-content-text');$content.on({'touchEnd.RefPopups':function(ev){lastTouch=ev.originalEvent;},'click.RefPopups':function(ev){if(((!lastTouch||lastTouch.defaultPrevented)&&userConfig.react!=='click')||userConfig.disabled){return;}lastTouch=null;var pop=cyclePopup(this);if(pop){ev.preventDefault();pop.show(ev);}},'referencepopupopen.RefPopups':function(){if(!armedPop||!armedPop.element.is(this)){return;}var oldOpen=openPop;openPop=armedPop;armedPop=null;if(oldOpen){oldOpen.destroy();}},'referencepopupclose.RefPopups':function(){if(!openPop||!openPop.element.is(this)){return;}if(armedPop){openPop.destroy();}else{armedPop=openPop;}openPop=null;}},'.reference');$(window).off('pagehide.RefPopups',cleanupPopups);$(window).on('pagehide.RefPopups',cleanupPopups);applyHoverEvents($content);}mw.hook('wikipage.content').add(function($content){mwContentProcessed=(($content instanceof jQuery)&&($content.
selector==='#mw-content-text'))?true:!1;if(!mwContentProcessed){mwContentProcessed=!0;installHooks($('#mw-content-text'));}installHooks($content);});function applyHoverEvents($content){var $article=($content&&($content instanceof jQuery)&&$content.length)?$content:$('#mw-content-text');$article.off('mouseenter.RefPopups');if(userConfig.disabled){return;}if(userConfig.react!=='hover'){if(openPop){openPop.option('activateBy','click');}if(armedPop){armedPop.option('activateBy','click');}return;}$article.on('mouseenter.RefPopups','.reference',function(){var pop=cyclePopup(this);if(pop){pop.triggerHover();}});if(openPop){openPop.option('activateBy','hover');}if(armedPop){armedPop.option('activateBy','hover');}}if(!module.lockdown){$(function($){$('#articleCategories, #catlinks').first().after($('<a href="#configure-refpopups" class="refpopups-configure-page" />').html('['+module.messages.coreConfigureText+']').click(onClickConfigure).appendTo(this));});}module.unloadCore=function(){$(
'#mw-content-text').off('.RefPopups');$(window).off('.RefPopups');$('a[href="#configure-refpopups"]').remove();cleanupPopups();delete this.unloadCore;};$(window).trigger('dev-ReferencePopups-config',module.settings=$.extend({},userConfig));var configureIsPending=!1;function onClickConfigure(ev){ev.preventDefault();var closeFunc=function(){configureIsPending=!1;},interfaceFunc=function(confFunc){confFunc(userConfig,function(newSettings){store.set('RefPopupsJS',newSettings);cleanupPopups();applyHoverEvents();$(window).trigger('dev-ReferencePopups-config',module.settings=$.extend({},newSettings));},closeFunc);};if(configureIsPending){return;}configureIsPending=!0;if(module.configure){$.when(module.configure).done(interfaceFunc).fail(closeFunc);return;}$.ajax({url:mw.config.get('wgLoadScript'),data:{mode:'articles',only:'scripts',articles:'w:dev:ReferencePopups/code.configure.js'},dataType:'script',cache:!0}).then(function(){$.when(module.configure).done(interfaceFunc).fail(
closeFunc);}).fail(closeFunc);}function constructPopup($ref){var frag=$ref.find('a[href^="#cite_note"]').first();if(!frag.length){return null;}var $cite=$(frag.attr('href').replace(/([.:])/g,'\\$1'));if(!$cite.length){return null;}var $content=$('<div style="overflow:auto">'),$conf=$('<a href="#" class="refpopups-configure" />').prop('title',module.messages.coreConfigureHover).click(onClickConfigure);$content.append($cite.find('.reference-text').clone());return new module.Popup({content:$conf.add($content),activateBy:userConfig.react,hoverDelay:userConfig.hoverDelay,animation:userConfig.animate&&'fold',stickyHover:userConfig.stick,contentBoxClass:'WikiaArticle'},$ref[0]);}});;(function($,document,mw,module){"use strict";if(module.loaderInited){console.log("[RecentChangesMultiple] Script already started; exiting.");return;}module.loaderInited=!0;if(document.querySelector('.rc-content-multiple, #rc-content-multiple')){startLoad();}else{if(document.querySelector('[id^=flytabs_]')){
console.log('[RecentChangesMultiple] No "rc-content-multiple" container(s) found; waiting for Tab Views to load.');mw.hook('wikipage.content').add(checkSectionHooked);}else{console.log('[RecentChangesMultiple] No "rc-content-multiple" container(s) found.');}}function checkSectionHooked(pSection){if(pSection[0].classList&&pSection[0].classList.contains("tabBody")){if(pSection[0].querySelector('.rc-content-multiple, #rc-content-multiple')){startLoad(pSection[0]);mw.hook('wikipage.content').remove(checkSectionHooked);}else{console.log('[RecentChangesMultiple] No "rc-content-multiple" container found in tab.');return;}}}function startLoad(pCont){if(module.loaded){return;}module.loaded=!0;var scripts=["u:dev:MediaWiki:RecentChangesMultiple/core.js"];window.importArticles({type:'script',articles:scripts});}})(window.jQuery,document,window.mediaWiki,(window.dev=window.dev||{}).RecentChangesMultiple=dev.RecentChangesMultiple||{});;(function(){if(window.SandboxTabLoaded){return;}window.
SandboxTabLoaded=!0;importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});mw.hook('dev.i18n').add(function(i18no){$.when(i18no.loadMessages('SandboxTab'),mw.loader.using('mediawiki.util')).then(function(i18n){var $header=$('#WikiaUserPagesHeader'),title='User:'+$header.find('#UserProfileMasthead h1').text()+'/'+i18n.inContentLang().msg('sandbox').plain();if($header.exists()){$header.find('.tabs-container .tabs').append($('<li>',{'data-id':'sandbox'}).append($('<a>',{href:mw.util.getUrl(title),title:title,text:i18n.msg('sandbox').plain()})));}});});})();;require(['wikia.window','jquery','mw'],function(window,$,mw){'use strict';var $rail=$('#WikiaRail');if(!$rail.exists()||window.SeeMoreActivityButtonLoaded){return;}window.SeeMoreActivityButtonLoaded=!0;function loadLib(lib,mod){var deferred=$.Deferred();if(!window.dev||!window.dev[lib]){importArticle({type:'script',article:mod});}mw.hook('dev.'+lib).add(function(){deferred.resolve();});return deferred.promise();}
function preload(){$.when(loadLib('i18n','u:dev:I18n-js/code.js').then(function(){return window.dev.i18n.loadMessages('SeeMoreActivityButton');}),loadLib('wds','u:dev:WDSIcons/code.js'),mw.loader.using('mediawiki.api')).done(function(i18n,_1,_2){init(i18n);});}function init(i18n){i18n.useUserLang();window.dev.seeMoreActivity=new SeeMoreActivity(i18n);}function SeeMoreActivity(i18n){this.i18n=i18n.msg('see-more').plain();this.icon={diff:window.dev.wds.icon('magnifying-glass-tiny'),btn:window.dev.wds.icon('menu-control-small')};this.conf={rc:window.SeeMoreActivityButtonRC||!1,old:window.SeeMoreActivityButtonOld||!1};if(!this.conf.old){this._api=new mw.Api();this._api.get({action:'query',meta:'allmessages',ammessages:'Custom-SeeMoreActivityButton-config-old',amlang:mw.config.get('wgUserLanguage'),smaxage:300,maxage:300}).done(this._call.bind(this));}else{this._call();}}SeeMoreActivity.prototype._call=function(d){if(d){try{if(JSON.parse(d.query.allmessages[0]['*'].trim())){this.conf.
old=!0;}}catch(e){this.conf.old=!1;}}else{this.conf.old=!0;}if($rail.hasClass('loaded')){this._execute();}else{$rail.on('afterLoad.rail',$.proxy(this._execute,this));}};SeeMoreActivity.prototype._execute=function(){var $activity=$rail.children('#wikia-recent-activity');if(!$activity.exists()){return;}$activity.children('h2').append($('<a>',{'href':mw.util.getUrl('Special:'+(this.conf.rc?'RecentChanges':'WikiActivity')),'class':'wds-button wds-is-text','id':'seemoreactivity-button','title':this.i18n,html:this.icon.btn.cloneNode(true)}));$activity.find('.page-title-link').each($.proxy(function(i,p){var $p=$(p);$p.parent().before($('<a>',{'class':'seemoreactivity-diff-link','href':$p.attr('href')+'?diff=cur',html:this.icon.diff.cloneNode(true)}));},this));if(Boolean(this.conf.old)){$activity.addClass('seemoreactivity-old');$activity.find('.activity-item:last-child .edit-info-user').css('max-width',(+$activity.width()-$activity.find('#seemoreactivity-button').width()-$activity.find(
'.activity-item:last-child .edit-info-time').width()-12).toString()+'px');}mw.hook('SeeMoreActivityButton.loaded').fire();};importArticle({type:'style',article:'u:dev:MediaWiki:SeeMoreActivityButton.css'});preload();});;$(function(){'use strict';var $textarea=$('#wpSummary');if(!$textarea.length||document.getElementById('stdSummaries'))return;var presets=(window.dev&&window.dev.editSummaries)||{},select=presets.select||'Template:Stdsummaries';$textarea.attr('tabindex','3');$('#wpMinoredit').attr('tabindex','4');$('#wpSave').attr('tabindex','5');var $summary=$('#wpSummaryEnhanced');if(!$summary.length)$summary=$textarea;if('css'in presets){mw.util.addCSS(presets.css);}else{importArticle({type:'style',article:'u:dev:MediaWiki:Standard_Edit_Summary.css'});}var $combo=$('<select id="stdSummaries" tabindex="2"></select>').insertAfter($textarea).change(function(){$summary.val($(this).val());});function flatten(options,indent){var flattened=[];indent=indent||'';for(var i=0;i<options.length;i++
){if($.isArray(options[i])){flattened=flattened.concat(flatten(options[i],'-- '));}else{flattened.push(indent+options[i]);}}return flattened;}function render(lines){var options='',selected=' selected',ignore={':':1,'*':1,'<':1};for(var i=0;i<lines.length;i++,selected=''){if(!lines[i].length||ignore[lines[i][0]]){continue;}if(lines[i].substring(0,3)==='-- '){var contents=mw.html.escape(lines[i].substring(3));options+='<option value="'+contents+'"'+selected+'>&nbsp;&nbsp;'+contents+'</option>';}else{options+='<option value="" disabled'+selected+'>'+mw.html.escape(lines[i])+'</option>';}}$combo.append(options);}if(typeof select==='string'){$.get(mw.util.getUrl(select,{action:'raw'})).done(function(data){render(data.split(/\r\n|\n|\r/));});}else if(Array.isArray(select)){render(flatten(select));}});;(function(){var inUserNamespace=$.inArray(wgNamespaceNumber,[2,3,1200])!==-1;var $statusElements=$('span[data-user-status]');if(!inUserNamespace&&!$statusElements.length){return;}var date=new
Date();date.setUTCHours(date.getUTCHours()-1);function getRecentEdits(userName){userName=encodeURIComponent(userName);return $.get('/api.php',{action:'query',list:'usercontribs|logevents',ucuser:userName,leuser:userName,ucend:date.toJSON(),leend:date.toJSON(),format:'json'});}function getUserStatus(data){var recentEdits=data.query&&(data.query.usercontribs.length+data.query.logevents.length);if(recentEdits>0&&recentEdits<10){return{status:'Online',color:'green',image:'//vignette3.wikia.nocookie.net/scratchpad/images/5/58/Ledgreen.png/revision/latest/scale-to-width-down/20'};}else if(recentEdits>0){return{status:'Busy',color:'orange',image:'//vignette2.wikia.nocookie.net/scratchpad/images/8/80/Ledorange.png/revision/latest/scale-to-width-down/20'};}else{return{status:'Offline',color:'red',image:'//vignette3.wikia.nocookie.net/scratchpad/images/6/6d/Ledred.png/revision/latest/scale-to-width-down/20'};}}if(inUserNamespace){var userName=wgTitle.split('/')[0];if(!(mw.util.isIPv4Address(
userName)||mw.util.isIPv6Address(userName))){getRecentEdits(userName).done(function(data){var userStatus=getUserStatus(data);switch(skin){case'monobook':$('<span style="float: right; font-size: initial; margin-right: 10px;"><b>Status: <span style="color: '+userStatus.color+';">'+userStatus.status+' </span></b><img src="'+userStatus.image+'"></span>').appendTo('#firstHeading');break;case'oasis':case'wikia':$('<li style="color: '+userStatus.color+';"><span>Status</span> <b>'+userStatus.status+'</b> <img style="vertical-align: bottom;" src="'+userStatus.image+'"></li>').appendTo('.UserProfileMasthead .details');break;}});}}if($statusElements.length){$statusElements.each(function(){var $element=$(this);if($element.data('userStatus')){getRecentEdits($element.data('userStatus')).done(function(data){var userStatus=getUserStatus(data);$element.css('color',userStatus.color).html(userStatus.status+' <img src="'+userStatus.image+'">');});}});}}());;require(['wikia.window','jquery','mw',
'wikia.nirvana','BannerNotification'],function(window,$,mw,nirvana,BannerNotification){'use strict';var config=mw.config.get(['wgNamespaceNumber','wgContentLanguage','wgArticleId']);if(config.wgNamespaceNumber!==10||config.wgArticleId===0||window.TemplateTypeButtonsLoaded){return;}window.TemplateTypeButtonsLoaded=!0;var Main={};Main.messages=['template-classification-type-infobox','template-classification-type-quote','template-classification-type-navbox','template-classification-type-notice','template-classification-type-context-link','template-classification-type-infoicon','template-classification-type-scrollbox','template-classification-type-references','template-classification-type-media','template-classification-type-data','template-classification-type-design','template-classification-type-navigation','template-classification-type-nonarticle','template-classification-type-unknown','template-classification-edit-modal-success'];Main.types=['infobox','quote','navbox','notice',
'context-link','infoicon','scrollbox','references','media','data','design','navigation','nonarticle','unknown'];Main.buttons=function(i18n){$.each(this.types,function(k,v){$('<span>',{'class':'button temptype-button','data-id':v,'text':i18n()[k]}).insertAfter('#PageHeader');});$('.temptype-button').click(function(){var that=$(this);if($('.template-classification-type-label').text()!==that.text()){nirvana.postJson('TemplateClassificationApi','classifyTemplate',{pageId:config.wgArticleId,type:that.data().id,editToken:mw.user.tokens.get('editToken')},function(){new BannerNotification(i18n(14),'confirm').show();});}});};Main.init=function(fetch){fetch(this.messages,$.proxy(this.buttons,this),config.wgContentLanguage);};Main.preload=function(){mw.hook('dev.fetch').add($.proxy(this.init,this));};mw.loader.using('mediawiki.user').then($.proxy(Main.preload,Main));importArticle({type:'script',article:'u:dev:MediaWiki:Fetch.js'});});;Date.parseISO8601=function(text){"use strict";var when=(
/^(\d{4})-?(\d\d)-?(\d\d)[T\s](\d\d):?(\d\d):?(\d\d)(?:\.?(\d+))?(?:Z|\+00(?::?00)?)$/).exec(text);if(!when){return NaN;}return+new Date(when[1],when[2]-1,when[3],when[4],when[5],when[6],('.'+when[7])*1000|0);};(function(window,$,mw,config){"use strict";var loaderData=(function($,mw){var siteSkin=mw.config.get('skin');if(({oasis:1,wikia:1})[siteSkin]===1){siteSkin='oasis';}else if(({wowwiki:1,uncyclopedia:1,monobook:1,vector:1})[siteSkin]===1){siteSkin='monobook';}else{if(window.console){window.console.log('USERTAGS(Loader): Unsupported skin:',siteSkin);}return;}var username=mw.config.get('wgTitle'),namespace=mw.config.get('wgNamespaceNumber')|0;if(siteSkin==='oasis'){if(({'-1':1,2:1,3:1,500:1,1200:1})[namespace]!==1){return;}if(mw.config.get('wgAction')==='edit'&&namespace!==1200){return;}if(({1200:1,500:1,2:1,3:1})[namespace]===1&&username.indexOf('/')!==-1){return;}if(namespace===-1){username=null;namespace=mw.config.get('wgCanonicalSpecialPageName');if(namespace==='Contributions'){
username=window.location.pathname;namespace=window.decodeURIComponent(username.substr(username.lastIndexOf('/')+1));namespace=(namespace!==mw.config.get('wgPageName')&&namespace);username=(/(?:^\?|&)target=([^&]*)/).exec(window.location.search);username=(username&&window.decodeURIComponent(username[1]));username=username||namespace;username=(username&&username.replace(/_/g,' '));}else if(namespace!=='Following'){return;}username=username||mw.config.get('wgUserName');}}else{if(({2:1,3:1,1200:1})[namespace]!==1){return;}username=username.match(/^[^\/]+/)[0];}if(mw.util.isIPv4Address(username)||mw.util.isIPv6Address(username)){return;}return{skin:siteSkin,user:username};})($,mw);config=($.isPlainObject(config)&&config)||{};if(loaderData){window.UserTagsJS=config;config.loader=loaderData;if((/(?:^\?|&)debugusertags=1(?:&|$)/i).test(window.location.search)){config.debug=!0;}config.modules=($.isPlainObject(config.modules)&&config.modules)||{};if($.isEmptyObject(config.modules)){config.
modules={inactive:!0,newuser:!0,autoconfirmed:!0,mwGroups:!0,metafilter:{sysop:['bureaucrat','founder'],bureaucrat:['founder'],chatmoderator:['sysop','bureaucrat']}};}config.modules.stopblocked=config.modules.stopblocked||config.modules.stopblocked===void 0;config.modules.isblocked=config.modules.isblocked||(config.modules.isblocked===void 0&&loaderData.skin==='monobook');config.modules.i18n=!0;}var importList=(function(config,alwaysOnly){var moduleMap={explode:{s:'u:dev:MediaWiki:UserTags/module.implode.js'}};var list=[],hash={},exts=config.extensions||{},script,data,module;for(module in config.modules){if(exts[module]!==void 0){continue;}if(moduleMap.hasOwnProperty(module)){data=moduleMap[module];if(alwaysOnly&&!data.always){continue;}script=data.s;}else if(!alwaysOnly){script='u:dev:MediaWiki:UserTags/module.'+module+'.js';}else{continue;}if(hash[script]!==1){hash[script]=1;list[list.length]=script;}}list.sort();if(!alwaysOnly){list[list.length]=
'u:dev:MediaWiki:UserTags/core.js';}return list;})(config,!loaderData);if(!importList.length){window.UserTagsJS=null;try{delete window.UserTagsJS;}catch(e){}return;}if(!loaderData){window.UserTagsJS=config={};}config.extensions=($.isPlainObject(config.extensions)&&config.extensions)||{};var coreDeps=['mediawiki.util'];mw.loader.load(coreDeps,null,true);if(config.debug!=='noload'){mw.loader.using(coreDeps,function(){window.importArticles({type:'script',articles:importList});});}else{config.imports=importList;}})(window,jQuery,mediaWiki,window.UserTagsJS);;(function(module,mw,$){'use strict';if(module.loadSource)return;var config=mw.config.get(['wgAction','wgArticleId','wgArticlePath','wgContentLanguage','wgCurRevisionId','wgFormattedNamespaces','wgPageName','wgUserLanguage']),parserFunctions={'#expr':'Help:Extension:ParserFunctions#.23expr','#if':'Help:Extension:ParserFunctions#.23if','#ifeq':'Help:Extension:ParserFunctions#.23ifeq','#iferror':'Help:Extension:ParserFunctions#.23iferror'
,'#ifexpr':'Help:Extension:ParserFunctions#.23ifexpr','#ifexist':'Help:Extension:ParserFunctions#.23ifexist','#rel2abs':'Help:Extension:ParserFunctions#.23rel2abs','#switch':'Help:Extension:ParserFunctions#.23switch','#time':'Help:Extension:ParserFunctions#.23time','#timel':'Help:Extension:ParserFunctions#.23timel','#titleparts':'Help:Extension:ParserFunctions#.23titleparts','subst':'Help:Substitution','safesubst':'Help:Substitution','#len':'Extension:StringFunctions#.23len:','#pos':'Extension:StringFunctions#.23pos:','#rpos':'Extension:StringFunctions#.23rpos:','#sub':'Extension:StringFunctions#.23sub:','#pad':'Extension:StringFunctions#.23pad:','#replace':'Extension:StringFunctions#.23replace:','#explode':'Extension:StringFunctions#.23explode:','#urlencode':'Extension:StringFunctions#.23urlencode:_and_.23urldecode:','#urldecode':'Extension:StringFunctions#.23urlencode:_and_.23urldecode:','#invoke':'Extension:Scribunto#Usage','#lst':
'Extension:Labeled_Section_Transclusion#How_it_works','#lsth':'Extension:Labeled_Section_Transclusion#How_it_works','#lstx':'Extension:Labeled_Section_Transclusion#How_it_works','#var':'Extension:Variables#.23var','#var_final':'Extension:Variables#.23var_final','#vardefine':'Extension:Variables#.23vardefine','#vardefineecho':'Extension:Variables#.23vardefineecho','#varexists':'Extension:Variables#.varexists','#dpl':'Extension:DynamicPageList_(third-party)','#dateformat':'Help:Magic_words#Formatting','#formatdate':'Help:Magic_words#Formatting','lc':'Help:Magic_words#Formatting','lcfirst':'Help:Magic_words#Formatting','uc':'Help:Magic_words#Formatting','ucfirst':'Help:Magic_words#Formatting','#language':'Help:Magic_words#Miscellaneous','#special':'Help:Magic_words#Miscellaneous','#tag':'Help:Magic_words#Miscellaneous','ns':'Help:Magic_words#Namespaces','PAGESINCAT':'Help:Magic_words#Statistics','PAGESINCATEGORY':'Help:Magic_words#Statistics','DEFAULTSORT':
'Help:Magic_words#Technical_metadata','DISPLAYTITLE':'Help:Magic_words#Technical_metadata','int':'Help:Magic_words#Transclusion_modifiers'},parserTags={activityfeed:'https://community.fandom.com/wiki/Help:Wiki_Activity',aoaudio:'https://community.fandom.com/wiki/Help:Video',aovideo:'https://community.fandom.com/wiki/Help:Video',bloglist:'https://community.fandom.com/wiki/Help:Blog_article/Bloglist',categorytree:'https://www.mediawiki.org/wiki/Categorytree',charinsert:'https://www.mediawiki.org/wiki/Extension:CharInsert',chat:'https://community.fandom.com/wiki/Help:Chat',choose:'https://www.mediawiki.org/wiki/Extension:RandomSelection',createbox:'https://www.mediawiki.org/wiki/Extension:CreateBox',dpl:'https://community.fandom.com/wiki/Help:DynamicPageList','fb:facepile':'https://community.fandom.com/wiki/Help:Social_media_integration#Adding_Facebook_widgets','fb:follow':'https://community.fandom.com/wiki/Help:Social_media_integration#Adding_Facebook_widgets','fb:like':
'https://community.fandom.com/wiki/Help:Social_media_integration#Adding_Facebook_widgets','fb:likebox':'https://community.fandom.com/wiki/Help:Social_media_integration#Adding_Facebook_widgets','fb:recommendations':'https://community.fandom.com/wiki/Help:Social_media_integration#Adding_Facebook_widgets','fb:share-button':'https://community.fandom.com/wiki/Help:Social_media_integration#Adding_Facebook_widgets',forum:'https://community.fandom.com/wiki/Help:Wiki-style_forums',gallery:'https://www.mediawiki.org/wiki/Gallery#Rendering_a_gallery_of_images',ggtube:'https://community.fandom.com/wiki/Help:Video',googlespreadsheet:'https://www.mediawiki.org/wiki/Extension:GoogleDocs4MW',gtrailer:'https://community.fandom.com/wiki/Help:Video',gvideo:'https://community.fandom.com/wiki/Help:Video',helper:'https://community.fandom.com/wiki/Help:Volunteers_and_Helpers#Helpers',hiero:'https://www.mediawiki.org/wiki/Hiero',imagemap:'https://www.mediawiki.org/wiki/Imagemap',includeonly:
'https://www.mediawiki.org/wiki/Templates',infobox:'https://community.fandom.com/wiki/Help:Infoboxes',inputbox:'https://www.mediawiki.org/wiki/Inputbox','mainpage-endcolumn':'https://community.fandom.com/wiki/Help:Main_page_column_tags','mainpage-leftcolumn-start':'https://community.fandom.com/wiki/Help:Main_page_column_tags','mainpage-rightcolumn-start':'https://community.fandom.com/wiki/Help:Main_page_column_tags',math:'https://www.mediawiki.org/wiki/Math',nicovideo:'https://community.fandom.com/wiki/Help:Video',noinclude:'https://www.mediawiki.org/wiki/Templates',nowiki:'https://meta.wikimedia.org/wiki/Help:Wikitext_examples#Just_show_what_I_typed',onlyinclude:'https://www.mediawiki.org/wiki/Templates',poem:'https://www.mediawiki.org/wiki/Extension:Poem',poll:'https://www.mediawiki.org/wiki/Extension:AJAXPoll',pre:'https://meta.wikimedia.org/wiki/Help:Wikitext_examples#Just_show_what_I_typed',randomimage:'https://www.mediawiki.org/wiki/Extension:RandomImage',ref:
'https://www.mediawiki.org/wiki/Ref',references:'https://www.mediawiki.org/wiki/Ref',rss:'https://community.fandom.com/wiki/Help:Feeds',section:'https://www.mediawiki.org/wiki/Extension:Labeled_Section_Transclusion',source:'https://www.mediawiki.org/wiki/Extension:SyntaxHighlight_GeSHi',syntaxhighlight:'https://www.mediawiki.org/wiki/Extension:SyntaxHighlight_GeSHi',staff:'https://community.fandom.com/wiki/Community_Central:Staff',tabber:'https://community.fandom.com/wiki/Help:Tabber',tabview:'https://community.fandom.com/wiki/Help:Tab_view',tangler:'https://community.fandom.com/wiki/Help:Video',timeline:'https://www.mediawiki.org/wiki/Extension:Timeline',twitter:'https://community.fandom.com/wiki/Help:Social_media_integration#Adding_a_Twitter_timeline',verbatim:'https://community.fandom.com/wiki/Help:Verbatim_tags',videogallery:'https://community.fandom.com/wiki/Help:Video',wegame:'https://community.fandom.com/wiki/Help:Video',youtube:'https://community.fandom.com/wiki/Help:Video'},
interwikiMap={w:'https://community.fandom.com/wiki/$1',community:'https://community.fandom.com/wiki/$1',bugzilla:'https://bugzilla.wikimedia.org/show_bug.cgi?id=$1',commons:'https://commons.wikimedia.org/wiki/$1',creativecommons:'https://creativecommons.org/licenses/$1',creativecommonswiki:'https://wiki.creativecommons.org/$1',dictionary:'http://www.dict.org/bin/Dict?Database=*&Form=Dict1&Strategy=*&Query=$1',dict:'http://www.dict.org/bin/Dict?Database=*&Form=Dict1&Strategy=*&Query=$1',docbook:'http://wiki.docbook.org/topic/$1',download:'https://download.wikimedia.org/$1',dbdump:'https://download.wikimedia.org/$1/latest/',dreamhost:'http://wiki.dreamhost.com/index.php/$1',finalfantasy:'https://finalfantasy.wikia.com/wiki/$1',flickruser:'https://www.flickr.com/people/$1',flickrphoto:'https://www.flickr.com/photo.gne?id=$1',foundation:'https://wikimediafoundation.org/wiki/$1',gerrit:'https://gerrit.wikimedia.org/r/$1',it:
'https://gerrit.wikimedia.org/r/gitweb?p=mediawiki/$1;a=log;h=refs/heads/master',google:'https://www.google.com/search?q=$1',googledefine:'https://www.google.com/search?q=define:$1',googlegroups:'https://groups.google.com/groups?q=$1',guildwiki:'https://guildwars.wikia.com/wiki/$1',gutenberg:'https://www.gutenberg.org/etext/$1',gutenbergwiki:'https://www.gutenberg.org/wiki/$1',h2wiki:'http://halowiki.net/p/$1',imdbname:'https://www.imdb.com/name/nm$1/',imdbtitle:'https://www.imdb.com/title/tt$1/',imdbcompany:'https://www.imdb.com/company/co$1/',imdbcharacter:'https://www.imdb.com/character/ch$1/',incubator:'https://incubator.wikimedia.org/wiki/$1',infosecpedia:'http://infosecpedia.org/wiki/$1',irc:'irc://irc.freenode.net/$1',ircrc:'irc://irc.wikimedia.org/$1',rcirc:'irc://irc.wikimedia.org/$1','iso639-3':'https://www.sil.org/iso639-3/documentation.asp?id=$1',issn:'https://www.worldcat.org/issn/$1',javanet:'http://wiki.java.net/bin/view/Main/$1',javapedia:
'http://wiki.java.net/bin/view/Javapedia/$1',lostpedia:'https://lostpedia.wikia.com/wiki/$1',mail:'https://lists.wikimedia.org/mailman/listinfo/$1',mailarchive:'https://lists.wikimedia.org/pipermail/$1',mariowiki:'https://www.mariowiki.com/$1',marveldatabase:'http://www.marveldatabase.com/wiki/index.php/$1',mediawikiwiki:'https://www.mediawiki.org/wiki/$1',mediazilla:'https://bugzilla.wikimedia.org/$1',memoryalpha:'http://memory-alpha.org/wiki/$1',metawiki:'http://sunir.org/apps/meta.pl?$1',metawikipedia:'https://meta.wikimedia.org/wiki/$1',mozcom:'https://mozilla.wikia.com/wiki/$1',mozillawiki:'https://wiki.mozilla.org/$1',mozillazinekb:'http://kb.mozillazine.org/$1',musicbrainz:'https://musicbrainz.org/doc/$1',mw:'https://www.mediawiki.org/wiki/$1',mwod:'https://www.merriam-webster.com/cgi-bin/dictionary?book=Dictionary&va=$1',mwot:'https://www.merriam-webster.com/cgi-bin/thesaurus?book=Thesaurus&va=$1',nost:'https://nostalgia.wikipedia.org/wiki/$1',nostalgia:
'https://nostalgia.wikipedia.org/wiki/$1',openfacts:'http://openfacts.berlios.de/index-en.phtml?title=$1',openlibrary:'https://openlibrary.org/$1',openstreetmap:'https://wiki.openstreetmap.org/wiki/$1',openwetware:'https://openwetware.org/wiki/$1',openwiki:'http://openwiki.com/?$1',osmwiki:'https://wiki.openstreetmap.org/wiki/$1',otrs:'https://ticket.wikimedia.org/otrs/index.pl?Action=AgentTicketZoom&TicketID=$1',otrswiki:'https://otrs-wiki.wikimedia.org/wiki/$1',perlnet:'http://perl.net.au/wiki/$1',phpwiki:'http://phpwiki.sourceforge.net/phpwiki/index.php?$1',pyrev:'https://www.mediawiki.org/wiki/Special:Code/pywikipedia/$1',pythoninfo:'https://www.python.org/cgi-bin/moinmoin/$1',pythonwiki:'http://www.pythonwiki.de/$1',pywiki:'http://c2.com/cgi/wiki?$1',rev:'https://www.mediawiki.org/wiki/Special:Code/MediaWiki/$1',revo:'https://purl.org/NET/voko/revo/art/$1.html',rfc:'https://tools.ietf.org/html/rfc$1',robowiki:'http://robowiki.net/?$1',reuterswiki:
'http://glossary.reuters.com/index.php/$1',slashdot:'https://slashdot.org/article.pl?sid=$1',sourceforge:'https://sourceforge.net/$1',species:'https://species.wikimedia.org/wiki/$1',strategy:'https://strategy.wikimedia.org/wiki/$1',strategywiki:'https://strategywiki.org/wiki/$1',sulutil:'https://toolserver.org/~quentinv57/sulinfo/$1',svn:'https://svn.wikimedia.org/viewvc/mediawiki/$1?view=log',svgwiki:'http://wiki.svg.org/index.php/$1',technorati:'http://www.technorati.com/search/$1',tenwiki:'https://ten.wikipedia.org/wiki/$1',testwiki:'https://test.wikipedia.org/wiki/$1',ticket:'https://ticket.wikimedia.org/otrs/index.pl?Action=AgentTicketZoom&TicketNumber=$1',tools:'https://toolserver.org/$1',tswiki:'https://wiki.toolserver.org/view/$1',translatewiki:'https://translatewiki.net/wiki/$1',tvtropes:'https://www.tvtropes.org/pmwiki/pmwiki.php/Main/$1',unreal:'https://wiki.beyondunreal.com/wiki/$1',urbandict:'https://www.urbandictionary.com/define.php?term=$1',usemod:
'http://www.usemod.com/cgi-bin/wiki.pl?$1',usability:'https://usability.wikimedia.org/wiki/$1',webisodes:'http://www.webisodes.org/$1',wg:'https://wg.en.wikipedia.org/wiki/$1',wiki:'http://c2.com/cgi/wiki?$1',wikia:'https://www.wikia.com/wiki/c:$1',wikiasite:'https://www.wikia.com/wiki/c:$1',wikibooks:'https://en.wikibooks.org/wiki/$1',wikichat:'http://www.wikichat.org/$1',wikicities:'https://www.wikia.com/wiki/$1',wikicity:'https://www.wikia.com/wiki/c:$1',wikihow:'https://www.wikihow.com/$1',wikiindex:'https://wikiindex.org/$1',wikimedia:'https://wikimediafoundation.org/wiki/$1',wikinews:'https://en.wikinews.org/wiki/$1',wikipedia:'https://en.wikipedia.org/wiki/$1',wikipediawikipedia:'https://en.wikipedia.org/wiki/Wikipedia:$1',wikiquote:'https://en.wikiquote.org/wiki/$1',wikischool:'https://www.wikischool.de/wiki/$1',wikisource:'https://en.wikisource.org/wiki/$1',wikispecies:'https://species.wikimedia.org/wiki/$1',wikispot:'http://wikispot.org/?action=gotowikipage&v=$1',wikitech:
'https://wikitech.wikimedia.org/view/$1',wikiversity:'https://en.wikiversity.org/wiki/$1',betawikiversity:'https://beta.wikiversity.org/wiki/$1',wiktionary:'https://en.wiktionary.org/wiki/$1',wmar:'https://www.wikimedia.org.ar/wiki/$1',wmau:'https://wikimedia.org.au/wiki/$1',wmbd:'https://bd.wikimedia.org/wiki/$1',wmbe:'https://be.wikimedia.org/wiki/$1',wmbr:'https://br.wikimedia.org/wiki/$1',wmca:'https://wikimedia.ca/wiki/$1',wmch:'https://www.wikimedia.ch/$1',wmcz:'https://meta.wikimedia.org/wiki/Wikimedia_Czech_Republic/$1',wmdc:'https://wikimediadc.org/wiki/$1',securewikidc:'https://secure.wikidc.org/$1',wmde:'https://wikimedia.de/wiki/$1',wmfi:'https://fi.wikimedia.org/wiki/$1',wmfr:'https://wikimedia.fr/$1',wmhk:'https://wikimedia.hk/index.php/$1',wmhu:'http://wiki.media.hu/wiki/$1',wmid:'https://www.wikimedia.or.id/wiki/$1',wmil:'https://www.wikimedia.org.il/$1',wmin:'https://wiki.wikimedia.in/$1',wmit:'https://wiki.wikimedia.it/wiki/$1',wmmx:'https://mx.wikimedia.org/wiki/$1',
wmnl:'https://nl.wikimedia.org/wiki/$1',wmnyc:'https://nyc.wikimedia.org/wiki/$1',wmno:'https://no.wikimedia.org/wiki/$1',wmpl:'https://pl.wikimedia.org/wiki/$1',wmrs:'https://rs.wikimedia.org/wiki/$1',wmru:'https://ru.wikimedia.org/wiki/$1',wmse:'https://se.wikimedia.org/wiki/$1',wmtw:'https://wikimedia.tw/wiki/index.php5/$1',wmua:'https://ua.wikimedia.org/wiki/$1',wmuk:'https://uk.wikimedia.org/wiki/$1',wmf:'https://wikimediafoundation.org/wiki/$1',wmfblog:'https://blog.wikimedia.org/$1',wookieepedia:'https://starwars.wikia.com/wiki/$1',wowwiki:'http://www.wowwiki.com/$1'},i18n,$content,$list,$source,$a,$toc,headers=[];importArticle({type:'style',article:'u:dev:MediaWiki:View_Source.css'});function addButton(){$a=$('<a>',{id:'ca-view-source',text:i18n.msg('viewSource').plain()}).data('source',false).click(function(){$a.closest('.wikia-menu-button').removeClass('active');module[$a.data('source')?'hideSource':'loadSource']();});$('<li>').append($a).appendTo($list);}function init(
i18nInstance){i18n=i18nInstance;$content=$('#mw-content-text');$list=$('.page-header__contribution-buttons .wds-list, .UserProfileActionButton .WikiaMenuElement');if($content.length&&$list.length){addButton();if(mw.util.getParamValue('view')==='source'){module.loadSource();}}}function joinHrefParts(parts){for(var i=0;i<parts.length;i++){parts[i]=encodeURIComponent(parts[i]);}return parts.join(':').replace(/ /g,'_');}function createHref(link){var parts,hash='';if(link.indexOf('#')!==-1){parts=link.split(/\#/);link=parts.shift();if(!link.length)link=config.wgPageName;hash='#'+parts.pop();}if(link[0]==='/')link=config.wgPageName+link;parts=link.split(/\:/);if(parts.length>1&&interwikiMap[parts[0].toLowerCase()]){return interwikiMap[parts.shift().toLowerCase()].replace(/\$1/,joinHrefParts(parts)+hash);}return config.wgArticlePath.replace('$1',joinHrefParts(parts)+hash);}function replaceTag(all,delim,tag){if(!parserTags[tag])if(/\//g.test(all))return'&lt;/'+tag;else return'&lt;'+tag;return delim
+'<a href="'+parserTags[tag]+'">'+tag+'</a>';}function replaceHeaders(m){headers.push(m);return'<a name="h'+(headers.length-1)+'"></a>'+m;}function replaceWikiLink(all,link,title){title=title||'';return'[[<a href="'+createHref(link)+'">'+link+'</a>'+title+']]';}function replaceTemplates(all,delim,name){var href,m=name.match(/^(\#?)(\w+)(\:.*)/),fn=m&&parserFunctions[m[1]+m[2]];if(fn){return delim+m[1]+'<a href="https://www.mediawiki.org/wiki/'+fn+'">'+m[2]+'</a>'+m[3];}name=name.replace(/&lt;\!\-\-[\s\S]*\-\-&gt;/,'');m=name.match(/^(\s*)(.+)(\s*)$/);if(m[2][0]===':'){href=m[2].substring(1);}else if(m[2].indexOf('w:')===0){href='w:'+(m[2][2]===':'?m[2].substring(3):'Template:'+m[2].substring(2));console.log(href);}else{href=m[2];var templ=config.wgFormattedNamespaces[10]+':';if(href.indexOf('Template:')!==0&&href.indexOf(templ)!==0){href=templ+href;}}return delim+m[1]+'<a href="'+createHref(href)+'">'+m[2]+'</a>'+m[3];}function replaceRegularLinks(all,link,title){title=title||'';return'[<a href="'
+link+'">'+link+'</a>'+title+']';}function replaceModules(all,prefix,title,postfix){var page=config.wgFormattedNamespaces[828]+':'+title.trim();return(prefix+'<a href="'+createHref(page)+'">'+title.trim()+'</a>'+postfix);}function createPseudoToc(){var $rail=$('#WikiaRail'),toc,$ads;if(headers.length&&$source.height()>$(window).height()&&$rail[0]&&$rail.filter('.loaded')[0]){toc='<ul>';for(var i=0;i<headers.length;i++){toc+='<li><a href="#h'+i+'">'+headers[i]+'</a></li>';}toc+='</ul>';$toc=$('<section id="source-toc" class="rail-module">'+toc+'</section>');$ads=$rail.find('#top-right-boxad-wrapper, #top-boxad-wrapper, #NATIVE_TABOOLA_RAIL').last();if($ads[0]){$ads.after($toc);}else{$rail.prepend($toc);}}}module.loadSource=function(){$a.text(i18n.msg('viewArticle').plain()).data('source',true);if($source){$source.show();$content.hide();if($toc)$toc.show();}else{$.get(mw.util.getUrl(config.wgPageName,{action:'raw',maxage:'0',smaxage:'0',oldid:mw.util.getParamValue('diff')||mw.util.
getParamValue('oldid')||config.wgCurRevisionId})).done(function(wikitext){$source=$('<pre id="source-code">'+wikitext.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/({{#invoke:)([\s\S]*?)(\||})/igm,replaceModules).replace(/(&lt;\/?)([\w\:\-]+)/g,replaceTag).replace(/^((=+)[^\[\]\{\}]+?\2)/gm,replaceHeaders).replace(/\[{2}([^\[\]\{\}\|]+)(\|[^\]]+)?\]{2}/g,replaceWikiLink).replace(/\[(https?:\/\/[^ \]]+)([^\]]*)\]/g,replaceRegularLinks).replace(/((?:^|[^\{])\{\{)([^\{\|\}]+)/g,replaceTemplates).replace(/\r\n|\r|\n/g,'<br />')+'</pre>').insertBefore($content.css('display','none'));createPseudoToc();});}};module.hideSource=function(){if(!$source)return;$a.text(i18n.msg('viewSource').plain()).data('source',false);$source.hide();$content.show();if($toc)$toc.hide();};if(config.wgAction==='view'&&config.wgArticleId!==0){mw.hook('dev.i18n').add(function(){window.dev.i18n.loadMessages('View Source').done(init);});importArticle({type:'script',article:
'u:dev:MediaWiki:I18n-js/code.js'});}}((window.dev=window.dev||{}).viewSource=window.dev.viewSource||{},mediaWiki,jQuery));;(function(window,$,mw){'use strict';var config=mw.config.get(['wgAction','wgNamespaceNumber','wgTitle','wgUserGroups','wgUserName']),groups=config.wgUserGroups.join(' ');if(config.wgNamespaceNumber===1202){$('#ca-talk').remove();return;}else if(config.wgTitle.indexOf('/')!==-1||config.wgNamespaceNumber!==1200||!(config.wgUserName===config.wgTitle||/sysop|threadmoderator|vstf|helper|staff/.test(groups))||config.wgAction!=='edit'||window.WallGreetingButtonLoaded){return;}window.WallGreetingButtonLoaded=!0;function init(i18n){i18n.useUserLang();var params={url:new mw.Title(config.wgTitle,1202).getUrl(),wallUrl:new mw.Title(config.wgTitle,1200).getUrl()};['editGreeting','history','wallHistory','delete','protect','raw'].forEach(function(el){params[el]=i18n.msg(el).plain();});$('#WikiaMainContentContainer').prepend(window.Mustache.render(
'<div class="page-header" id="PageHeader" style="padding: 0;">'+'<div class="UserProfileActionButton" id="EditMessageWallGreeting">'+'<div class="wds-button-group" id="ca-edit" style="text-align: left;">'+'<a accesskey="e" href="{{url}}?action=edit" class="wds-is-squished wds-button">'+'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" class="wds-icon wds-icon-small" id="wds-icons-pencil-small">'+'<path d="M9.1 4.5l-7.8 7.8c-.2.2-.3.4-.3.7v3c0 .6.4 1 1 1h3c.3 0 .5-.1.7-.3l7.8-7.8-4.4-4.4zm7.6-.2l-3-3c-.4-.4-1-.4-1.4 0l-1.8 1.8 4.4 4.4 1.8-1.8c.4-.4.4-1 0-1.4z" fill-rule="evenodd"></path>'+'</svg>'+'<span>{{editGreeting}}</span>'+'</a>'+'<div class="wds-dropdown">'+'<div class="wds-button wds-is-squished wds-dropdown__toggle">'+'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" class="wds-icon wds-icon-tiny wds-dropdown__toggle-chevron" id="wds-icons-dropdown-tiny">'+'<path d="M6 9l4-5H2" fill-rule="evenodd"></path>'+
'</svg>'+'</div>'+'<div class="wds-dropdown__content wds-is-not-scrollable wds-is-right-aligned" style="z-index: 2;">'+'<ul class="wds-list wds-is-linked">'+'<li><a id="ca-history" href="{{url}}?action=history">{{history}}</a></li>'+'<li><a accesskey="h" href="{{wallUrl}}?action=history">{{wallHistory}}</a></li>'+(/sysop|content-moderator|vstf|helper|staff/.test(groups)?'<li><a id="ca-delete" href="{{url}}?action=delete">{{delete}}</a></li>'+(window.WallGreetingButtonProtect?'<li><a id="ca-protect" href="{{url}}?action=protect">{{protect}}</a></li>':''):'')+(window.WallGreetingButtonRaw?'<li><a id="ca-raw" href="{{url}}?action=raw">{{raw}}</a></li>':'')+'</ul>'+'</div>'+'</div>'+'</div>'+'</div>'+'</div>',params));}importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});mw.hook('dev.i18n').add(function(i18no){$.when(i18no.loadMessages('WallGreetingButton'),mw.loader.using(['mediawiki.Title','wikia.mustache'])).then(init);});})(window,jQuery,mediaWiki);;(function(){
'use strict';var $list=$('.page-header__contribution-buttons .wds-list, .UserProfileActionButton .WikiaMenuElement');if(!$list.exists()||window.WhatLinksHereLoaded){return;}window.WhatLinksHereLoaded=!0;var config=mw.config.get(['wgPageName','wgUserLanguage']);mw.hook('dev.fetch').add(function(fetch){fetch('whatlinkshere').then(function(text){var url=mw.util.getUrl('Special:WhatLinksHere/'+config.wgPageName);$list.append($('<li>',{id:'ca-whatlinkshere'}).append($('<a>',{href:url,text:text})));if(mw.util.getParamValue('redirect')==='no'){$('.redirectText').append($('<br>'),$('<span>',{id:'redirectWLH'}).append('→ ',$('<a>',{'class':'redirectWLH-link',href:url,text:text})));}});});importArticle({type:'script',article:'u:dev:MediaWiki:Fetch.js'});})();;require(['wikia.window','jquery','mw'],function(window,$,mw){var config=mw.config.get(['wgScriptPath','wgCanonicalSpecialPageName']);if(config.wgCanonicalSpecialPageName!=='Community'||$('#wiki-manager-module').length){return;}function
wikiManagerModule(wds,i18n){var api=new mw.Api();api.get({action:'query',meta:'allmessages',ammessages:'custom-Wiki_Manager'}).done(function(r,s){if(s!=='success'||!r.query){return;}api.get({action:'query',list:'users',ususers:r.query.allmessages[0]['*'],usprop:'groups'}).done(function(r,s){if(s!=='success'||!r.query){return;}var user=r.query.users[0];$.getJSON(config.wgScriptPath+'/api/v1/User/Details',{ids:user.userid,size:50}).done(function(r,s){if(s!=='success'||!r.items){return;}var user2=r.items[0],badge=user.groups.includes('staff')?'staff':user.groups.includes('helper')?'helper':undefined;if(badge){badge={badgeText:badge,badgeMarkup:wds.badge(badge,{width:18}).outerHTML};}require(['wikia.mustache','communitypage.templates.mustache'],function(mustache,templates){$(mustache.render(templates.adminsModule,{topAdminsData:{topAdminsHeaderText:i18n.msg('wiki-manager').plain(),topAdminsList:[{avatar:'<img src="'+user2.avatar+'">',badge:badge,profilePage:user2.url,userName:user.name}],
adminsText:'<a href="https://community.fandom.com/wiki/Help:Wiki_Managers">'+i18n.msg('wiki-manager_desc').escape()+'</a>'}},{topAdmins:templates.topAdmins.replace(/([^{]){{adminsText}}([^}])/,'$1{{{adminsText}}}$2')})).attr('id','wiki-manager-module').insertAfter('.community-page-admins-module');});});});});}$.when(new $.Deferred(function(deferred){if(window.dev&&window.dev.wds){deferred.resolve(window.dev.wds);}else{mw.hook('dev.wds').add(function(wds){deferred.resolve(wds);});importArticle({type:'script',article:'u:dev:MediaWiki:WDSIcons/code.js'});}}),new $.Deferred(function(deferred){if(window.dev&&window.dev.i18n){window.dev.i18n.loadMessages('WikiManager_Nameplate').done(deferred.resolve);}else{mw.hook('dev.i18n').add(function(i18n){i18n.loadMessages('WikiManager_Nameplate').done(deferred.resolve);});importArticle({type:'script',article:'u:dev:MediaWiki:I18n-js/code.js'});}}),mw.loader.using(['mediawiki.api','mediawiki.util'])).done(wikiManagerModule);});;require(['jquery','mw']
,function($,mw){var storageKey='ls-wikianotifications';function log(error){console.log('WikiaNotifications error: '+error);}function getNotificationData(){return(new mw.Api()).get({action:'parse',disablepp:'',page:'MediaWiki:Custom-WikiaNotifications',format:'json'}).then(function(res){var dfd=$.Deferred();if(res.error){return dfd.rejectWith(this,[res.error.info]);}var text=res.parse.text['*'].trim();text=(text||'').replace(/<script>[\s\S]*?<\/script>/igm,'').replace(/<!\-\-[\s\S]*?\-\->/igm,'');if(!text.length||!text.trim().length){return dfd.rejectWith(this,['empty content']);}return dfd.resolveWith(this,[{version:res.parse.revid,contents:text}]);});}function showNotificationIfNotViewed(notification){var notifsData=JSON.parse(window.localStorage.getItem(storageKey))||{},hasSeen=(notifsData[mw.config.get('wgCityId')]===notification.version),$notificationArea=$('#WikiaNotifications'),hasNotifications=$notificationArea.length?1:0;if(hasSeen){return;}var $notif=$('<li/>').attr('class',
'custom').append($('<div>').attr('data-type','2').html(notification.contents).append($('<a>').addClass('sprite close-notification')));if(hasNotifications){$notificationArea.append($notif);}else{$('body').addClass('notifications').append($('<ul id="WikiaNotifications" class="WikiaNotifications"></ul>').append($notif));}$('.sprite.close-notification').on('click',function(){$notif.hide();notifsData[mw.config.get('wgCityId')]=notification.version;window.localStorage.setItem(storageKey,JSON.stringify(notifsData));});}mw.loader.using('mediawiki.api',function(){if(mw.config.get('wgUserName')){$(function(){getNotificationData().then(showNotificationIfNotViewed).fail(log);});}});});;(function(){var state=0;mw.hook('wikipage.content').add(function($content){if($content.find('.g-ytsubscribe').length>0){if(state===0){state=1;$.getScript('https://apis.google.com/js/platform.js',function(){state=2;});}else if(state===2){$content.each(function(i,elem){gapi.ytsubscribe.go(elem);});}}});}());;;mw.
loader.state({"wikia.fake.articles.4cffb90f3079250db2048a3e2f0efecf":"ready"});

/* cache key: hildatheseries76:resourceloader:filter:minify-js:7:517c34cbd806d77bb5380bb6484a774e */